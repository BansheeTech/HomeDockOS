const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["hdos_DP2qXfLO6N_jlyGAakb7V.js","hdos_D6-XlEtGdUWrcdOe4mzvB.js"])))=>i.map(i=>d[i]);
import{d as F,r as g,u as K,o as te,c as I,a as k,b as s,e as t,f as e,n as i,_ as j,w as Q,g as D,h as b,i as se,I as _,v as ae,T as Z,F as oe,A as ne,j as le,k as re,N as ie,l as ce,t as de,m as ue,p as me,q as pe}from"./hdos_CKk5OUaXGoErGLONG9qzi.js";import{d as he,a as q,A as fe}from"./hdos_C8xfccjiB6DoCk5KlfHGx.js";import{d as ge,a as ve}from"./hdos_Bvh04Eb4vZliPGElbm3Gt.js";import{d as O}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{d as we}from"./hdos_R8ecdjzHoP22_qvuHhYVs.js";import{_ as L,B as H}from"./hdos_BAMJ5gktsfphRxELVOV4Q.js";import{S as ye}from"./hdos_Eewg4ol9347H8vTuPUbzE.js";import{A as _e}from"./hdos_BHYbvoaqluhMgNtFFE2op.js";import{d as be}from"./hdos_ZmCbB4Uq2A8pQKvDpZM1l.js";import{F as $}from"./hdos_CyCYxAAXLqvPCPwklwcAk.js";import"./hdos_CK8ZpjZrUClGDYquaWuMe.js";import{I as R}from"./hdos_C22Dt8kga9v9Ck7I1EAeF.js";import{a as C}from"./hdos_BkqwZK080_QVMOVeWuVv-.js";import"./hdos_ZR0NdWOGAtyCH4X78dssi.js";import"./hdos_D3Dkkhyyw68vFJ4vq_2lG.js";import"./hdos_GERNXi0GnSmQRCczvhA3V.js";const xe="modulepreload",Se=function(S){return"/homedock-ui/vue3/dist/"+S},N={},ke=function(n,l,w){let h=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),o=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));h=Promise.allSettled(l.map(c=>{if(c=Se(c),c in N)return;N[c]=!0;const a=c.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":xe,a||(r.as="script"),r.crossOrigin="",r.href=c,o&&r.setAttribute("nonce",o),document.head.appendChild(r),a)return new Promise((d,A)=>{r.addEventListener("load",d),r.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function y(m){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=m,window.dispatchEvent(o),!o.defaultPrevented)throw m}return h.then(m=>{for(const o of m||[])o.status==="rejected"&&y(o.reason);return n().catch(y)})},Ce={width:24,height:24,body:'<path fill="currentColor" d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z"/>'},Ie={width:24,height:24,body:'<path fill="currentColor" d="M12 17.5c-3.8 0-7.2-2.1-8.8-5.5H1c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5h-2.2c-1.6 3.4-5 5.5-8.8 5.5Z"/>'},Te={width:24,height:24,body:'<path fill="currentColor" d="M19.79 15.41c.95-2.17.95-4.66 0-6.82l-2.74 1.24c.6 1.38.6 2.95.01 4.34l2.73 1.24m-4.37-11.2a8.54 8.54 0 0 0-6.83 0l1.24 2.73c1.39-.59 2.96-.59 4.35.01l1.24-2.74M4.21 8.58a8.564 8.564 0 0 0 0 6.84l2.74-1.25c-.6-1.38-.6-2.96 0-4.35L4.21 8.58m4.38 11.21a8.5 8.5 0 0 0 6.83-.01l-1.24-2.73a5.5 5.5 0 0 1-4.34.01l-1.25 2.73M12 2a10 10 0 0 1 10 10a10 10 0 0 1-10 10A10 10 0 0 1 2 12A10 10 0 0 1 12 2m0 6a4 4 0 0 0-4 4a4 4 0 0 0 4 4a4 4 0 0 0 4-4a4 4 0 0 0-4-4Z"/>'},Ae={width:24,height:24,body:'<path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/>'},Ee={width:24,height:24,body:'<path fill="currentColor" d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20Z"/>'},qe={width:24,height:24,body:'<path fill="currentColor" d="M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z"/>'},$e={id:"cloudScreen",class:"cloud-screen"},De={class:"banshee-cloud"},Le={target:"_blank",href:"https://banshee.pro"},Fe={class:"objectHead"},je={class:"object"},Pe=300,Ve=750,Be=2500,Oe=F({__name:"SplashScreen",setup(S){const n=g(null),l=g(null),w=g(null),{themeClasses:h}=K(),y=new Audio("/audio/splash.mp3"),m=(a,f,r)=>{setTimeout(()=>{a.classList.add(f)},r)},o=()=>{y.play().catch(r=>console.error("Error playing sound: ",r));let a=Pe;n.value.querySelectorAll(".object").forEach(r=>{m(r,"filling",a),a+=Ve}),setTimeout(()=>{n.value.classList.add("splashFadeOut"),n.value.addEventListener("transitionend",function r(d){d.propertyName==="opacity"&&(n.value.remove(),n.value.removeEventListener("transitionend",r))})},a+Be)},c=()=>{w.value.classList.add("shootUp"),l.value.style.opacity="0",o(),l.value.addEventListener("transitionend",()=>{l.value.style.display="none"},{once:!0}),localStorage.setItem("splashShown","true")};return te(()=>{l.value=document.getElementById("cloudScreen"),w.value=document.getElementById("cloudImage"),localStorage.getItem("splashShown")?(n.value.style.display="none",l.value.style.display="none"):(n.value.style.display="block",l.value.style.display="flex")}),(a,f)=>(k(),I("div",null,[s("div",$e,[s("div",{id:"cloudImage",class:"flex flex-col items-center justify-center",onClick:c},[t(_e,{class:i([e(h).splashColor]),icons:[e(Ee),e(qe)],interval:1e3,iconSize:96},null,8,["class","icons"]),s("div",{class:i([[e(h).splashColor],"cloudtext text-center"])},"Click to Start",2)]),s("span",De,[s("a",Le,[s("span",null,[t(L,{class:i([[e(h).compLogo],"optin-banshee will-change-transform"]),src:"/images/optin_banshee.png"},null,8,["class"])])])])]),s("div",{class:i([[e(h).cloudBack],"splash"]),ref_key:"splashElement",ref:n},[s("h1",Fe,[s("div",je,[t(L,{class:i([[e(h).compLogo],"object-logo mr-1"]),src:"/images/logo_trans.svg"},null,8,["class"])]),s("div",{class:i([[e(h).afterSplash],"object object-text ml-1 h-8"])},"HomeDock OS",2)])],2)]))}}),He=j(Oe,[["__scopeId","data-v-e634c4be"]]),Re={class:"relative text-xs w-full h-8 z-30 text-white text-center flex items-center justify-center rounded-2xl bg-gradient-to-r from-[#6e0000] via-[#4b0092] to-[#1575bf] animate-rainbow py-2.5"},Ne={target:"_blank",href:"https://www.homedock.cloud",class:"flex items-center justify-center"},Ue=F({__name:"CloudInstances",props:{isVisible:{type:Boolean}},emits:["update:isVisible"],setup(S,{emit:n}){const l=S,w=n,h=g(!1),y=()=>{const o=new Date().toISOString().split("T")[0];localStorage.setItem("cloudInstancePopShown",o),h.value=!1,w("update:isVisible",!1)},m=()=>{const o=localStorage.getItem("cloudInstancePopShown"),c=new Date;let a=!1;if(!o)a=!0;else{const f=new Date(o);(c.getTime()-f.getTime())/(1e3*3600*24)>7&&(a=!0)}a?(h.value=!0,w("update:isVisible",!0)):(h.value=!1,w("update:isVisible",!1))};return Q(()=>l.isVisible,o=>{o&&m()}),(o,c)=>(k(),D(Z,{name:"slide-down-fade"},{default:b(()=>[se(s("div",Re,[s("span",{id:"CloudInstancesClose",class:"absolute right-4 text-white cursor-pointer",onClick:y},[t(e(_),{icon:e(ge),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"])]),s("a",Ne,[t(e(_),{icon:e(be),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"]),c[0]||(c[0]=s("span",null,"Check out our HomeDock OS Cloud Instances!",-1))])],512),[[ae,h.value]])]),_:1}))}}),Me=j(Ue,[["__scopeId","data-v-06360ac0"]]),Ke={class:"flex justify-between items-start mb-6"},Qe={key:0,class:"flex items-center justify-center"},Ze={key:1},ze={href:"https://github.com/BansheeTech/HomeDockOS",target:"_blank",class:"flex items-center"},We={href:"https://www.homedock.cloud",target:"_blank",class:"flex items-center"},Xe={href:"https://docs.homedock.cloud",target:"_blank",class:"flex items-center"},Ge=F({__name:"Login",setup(S){var V;const n=g({username:"",password:""}),l=g(!1),w=()=>{l.value||(l.value=!0,setTimeout(()=>{l.value=!1},1e3))},h={username:[{required:!0,message:"Username is required",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"}]},y=g(!1),m=g(!1),o=g(!1),c=g(((V=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:V.getAttribute("content"))||null),a=g(void 0),f=g(null),r=g(!1),{themeClasses:d}=K(),A=()=>{y.value=!y.value},P=()=>{m.value=!0},z=async()=>{if(!c.value){C.error("CSRF token missing.");return}if(!(o.value||r.value)){o.value=!0;try{const p=await q.get("/api/pksend",{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":c.value}}),u=p.data.public_key,v=p.data.token;if(!u||!v)throw new Error("Public Key or token not found in response.");const T=(await ke(async()=>{const{default:E}=await import("./hdos_DP2qXfLO6N_jlyGAakb7V.js").then(ee=>ee.i);return{default:E}},__vite__mapDeps([0,1]))).default,X=new TextEncoder().encode(n.value.password),G=Array.from(X).map(E=>String.fromCharCode(E)).join(""),J=T.pki.publicKeyFromPem(u).encrypt(G,"RSA-OAEP",{md:T.md.sha256.create(),mgf1:{md:T.md.sha256.create()}}),Y=T.util.encode64(J),B=await q.post("/api/pcrypt",{token:v,password:Y},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":c.value}});if(B.data.status!=="success"){C.error(B.data.message||"Error encrypting password.");return}const x=await q.post("/login",{token:v,username:n.value.username,homedock_csrf_token:c.value},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":c.value}});if(x.data.message?x.data.status==="success"?(C.success(x.data.message),r.value=!0,setTimeout(()=>{window.location.href=x.data.redirect_url},2500)):(x.data.remaining_attempts!==void 0&&(f.value=x.data.remaining_attempts),C.error(x.data.message),a.value="error"):C.error("Unexpected error, please contact support."),x.data.redirect_url){setTimeout(()=>{window.location.href=x.data.redirect_url},2500);return}}catch(p){if(p instanceof fe)if(p.response&&p.response.data){const{message:u,redirect_url:v}=p.response.data;if(u&&(C.error(u),a.value="error"),p.response.data.remaining_attempts!==void 0&&(f.value=p.response.data.remaining_attempts),v){setTimeout(()=>{window.location.href=v},2500);return}}else console.error("There was an error while signing in:",p),C.error("There was an error while signing in.")}finally{o.value=!1}}};Q(f,()=>{const p=document.querySelector(".animated-attempts");p&&(p.classList.add("updated"),setTimeout(()=>p.classList.remove("updated"),300))});const W=p=>{console.log("Validation failed:",p)};return(p,u)=>(k(),I(ue,null,[t(oe),t(ne),t(le),t(re),t(ie),t(He),t(ye),s("div",{class:i([[e(d).back],"flex items-center justify-center min-h-screen login-wrapper relative p-3 overflow-hidden"])},[s("div",{class:i([{bounce:l.value},"w-full max-w-xl"])},[s("div",{class:i([[e(d).form],"group px-6 py-12 lg:px-12 rounded-3xl shadow-lg w-full relative z-10 container-scroller mb-2"])},[s("div",Ke,[t(L,{src:"/images/logo_trans.svg",alt:"Logo",class:i([[e(d).logo],"h-20 hd-top-form-logo animate-pulse"])},null,8,["class"])]),s("h2",{class:i([[e(d).mainText],"text-xl font-normal mb-2"])},"Welcome to HomeDock OS",2),s("p",{class:i([[e(d).subText],"font-light mb-6 leading-3"])},"Sign in to continue",2),t(e($),{layout:"vertical",model:n.value,rules:h,onFinish:z,onFinishFailed:W},{default:b(()=>[t(e($).Item,{name:"username"},{default:b(()=>[u[3]||(u[3]=s("label",{class:"text-gray-300",for:"username"},"Username",-1)),t(e(R),{class:i([[e(d).scopeSelector,e(d).loginFormInput],"h-10 group inputUser"]),autocomplete:"username",value:n.value.username,"onUpdate:value":u[0]||(u[0]=v=>n.value.username=v),placeholder:"Username...",maxlength:30,status:a.value,required:"",onFocus:P},{prefix:b(()=>[t(e(_),{icon:e(ve),class:i(["mr-0.5 transition duration-300",[e(d).formIcon,{"text-gray-300 group-hover:text-blue-500":a.value!=="error","text-red-500":a.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),_:1},8,["class","value","status"])]),_:1}),u[6]||(u[6]=s("div",{class:"mt-2"},null,-1)),t(e($).Item,{name:""},{default:b(()=>[u[4]||(u[4]=s("label",{class:"text-gray-300",for:"password"},"Password",-1)),t(e(R),{class:i([[e(d).scopeSelector,e(d).loginFormInput],"h-10 group"]),autocomplete:"current-password",value:n.value.password,"onUpdate:value":u[1]||(u[1]=v=>n.value.password=v),type:y.value?"text":"password",placeholder:"••••••••",status:a.value,maxlength:30,required:"",onFocus:P},{prefix:b(()=>[t(e(_),{icon:e(O),class:i(["mr-0.5 transition duration-300",[e(d).formIcon,{"text-gray-300 group-hover:text-blue-500":a.value!=="error","text-red-500":a.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),suffix:b(()=>[t(e(H),{class:i(["mb-1 transition duration-300",{"text-gray-300 group-hover:text-blue-500":a.value!=="error","text-red-500":a.value==="error"}]),type:"link",onClick:A,icon:""},{default:b(()=>[y.value?(k(),D(e(_),{key:0,icon:e(Ce),class:"mt-1"},null,8,["icon"])):(k(),D(e(_),{key:1,icon:e(Ie),class:"mt-1"},null,8,["icon"]))]),_:1},8,["class"])]),_:1},8,["class","value","type","status"])]),_:1}),t(e(H),{id:"main_button_login",onClick:w,class:i([{clicked:r.value},"w-full flex items-center justify-center h-14 mt-8 relative overflow-hidden border-0 disabled:bg-blue-400 disabled:cursor-pointer disabled:text-white"]),loading:o.value,type:"primary",htmlType:"submit",disabled:o.value||r.value},{default:b(()=>[r.value?(k(),I("span",Ze,[t(e(_),{icon:e(he),class:"text-white animate-spin",width:"26",height:"26"},null,8,["icon"])])):(k(),I("div",Qe,[t(e(_),{icon:e(O),class:"text-white",width:"16",height:"16"},null,8,["icon"]),u[5]||(u[5]=s("span",{class:"ml-1"},"Sign In",-1))]))]),_:1},8,["class","loading","disabled"]),t(Z,{name:"slide-down-error"},{default:b(()=>[f.value!==null?(k(),I("p",{key:0,class:i([[e(d).subText,"animated-attempts"],"text-xs mt-2"])},"Remaining attempts: "+de(f.value),3)):ce("",!0)]),_:1})]),_:1},8,["model"]),s("div",{class:i([[e(d).loginSocialsCont],"flex items-center space-x-2 transition-all duration-300 ease-in-out transform translate-y-5 w-fit px-2 hover:px-6 py-1 rounded-full mx-auto"])},[s("a",ze,[t(e(_),{class:i([[e(d).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(Ae)},null,8,["class","icon"])]),s("a",We,[t(e(_),{class:i([[e(d).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(we)},null,8,["class","icon"])]),s("a",Xe,[t(e(_),{class:i([[e(d).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(Te)},null,8,["class","icon"])])],2)],2),t(Me,{isVisible:m.value,"onUpdate:isVisible":u[2]||(u[2]=v=>m.value=v)},null,8,["isVisible"])],2)],2)],64))}}),Je=j(Ge,[["__scopeId","data-v-a62d05ee"]]);var M;const U=(M=document.getElementById("data-theme"))==null?void 0:M.textContent;if(U){const S=atob(U);let n;try{n=JSON.parse(S);const l=me(Je);l.provide("data-theme",{selectedTheme:n.selected_theme,selectedBack:n.selected_back});const w=pe();l.use(w),l.mount("#app-login-root")}catch(l){console.error("Error parsing data-theme objects:",l)}}else console.error("The element 'data-theme' wasn't found or it's empty.");
