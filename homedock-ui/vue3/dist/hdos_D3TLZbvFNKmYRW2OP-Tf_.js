import{a as V,i as O,j as q,k as R,l as N,m as L,n as S,o as X,h as G,p as A}from"./hdos_C1SM8zIakD3hgtPa5T1OY.js";import{j as _,r as W,B as $,y as c,A as u,H as r,u as t,z as a,F as o,X as Z,G as H,D as m,M as x,_ as D,T as B,E as j,R as T,S as K,U as P,K as Y,d as k}from"./hdos_BcxwjlzXf6g6-h4_1FWrZ.js";import{a as J,d as Q}from"./hdos_DaRSEFpqf81ZuDgc4Rzsj.js";import{B as w}from"./hdos_Dl_8y7XL2p14O2wBj5-oC.js";import{U as tt}from"./hdos_CYfVOnC01_f-bQhP7dD8J.js";import{j as C}from"./hdos_C6pDJGZJXz5nQihFgwgfK.js";import{_ as et}from"./hdos_wOdT9vgYDfqBfvN--oFbN.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_BHcEyB3ojTLWV5gKTBfxt.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_BaUrF9Cr2fXFo4DuK-sZ2.js";import"./hdos_DObXWkno6quyALmbQVYqi.js";import"./hdos_ygG0b3owQt8-gXm_Txrh9.js";import"./hdos_CVzzgcPhkaG_5l_73yb41.js";import"./hdos_Dbd2mxyH-R2y9xaggFO1w.js";import"./hdos_mEBj4ZJpX_askY5fpJbtX.js";import"./hdos_DkNwpkYCCMgzkRrLBjv_5.js";import"./hdos_DTM5j6AomKVq9UMQGxoAD.js";import"./hdos_DpDVKxrEixovpf2ajDl0e.js";const at={width:24,height:24,body:'<path fill="currentColor" d="M12 1L8 5h3v9h2V5h3m2 18H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h3v2H6v12h12V9h-3V7h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/>'},ot={width:24,height:24,body:'<path fill="currentColor" d="M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42Z"/>'},st={class:"app-header flex items-center space-x-4"},nt={class:"flex flex-col justify-center overflow-hidden"},lt={class:"button-container grid grid-cols-2 gap-2 mt-3"},it="docker-icons/notfound.jpg",rt=_({__name:"ControlHubApp",props:{app:{type:Object,required:!0}},setup(l){const i=l,b=i.app.image_path||it,d=W([]),h=document.querySelector('meta[name="homedock_csrf_token"]')?.getAttribute("content")||"",g={"X-HomeDock-CSRF-Token":h},{themeClasses:n}=$(),v=V(),I=s=>{v.openWindow("edit",{title:`${i.app.display_name||s} - Edit Config`,data:{appName:s},allowMultiple:!0})},M=s=>{v.openWindow("logs",{title:`${i.app.display_name||s} - Logs`,data:{appName:s},allowMultiple:!0})},E=async s=>{try{const e=await J.get("/api/get-compose-info",{headers:{"X-HomeDock-CSRF-Token":h},params:{containerName:s}});e.data?.data?.ymlContent&&e.data.data.ymlContent.trim()!==""&&U(e.data.data.ymlContent,`${s}.yml`)}catch{C.error("Failed to fetch configuration for export.")}},U=(s,e)=>{const f=new Blob([s],{type:"text/yaml;charset=utf-8;"}),p=document.createElement("a"),y=URL.createObjectURL(f);p.setAttribute("href",y),p.setAttribute("download",e),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(y)},z=async({file:s,onSuccess:e,onError:f})=>{const p=new FormData;p.append("compose_file",s),p.append("container_name",i.app.name),p.append("homedock_csrf_token",h||"");try{const y=await fetch("/api/upload_compose_file",{method:"POST",headers:{"X-HomeDock-CSRF-Token":h||""},body:p});if(y.ok){const F=await y.json();e(F,s),C.success(`${s.name} uploaded succesfully for ${i.app.display_name||i.app.name} application.`)}else throw new Error("Upload failed")}catch(y){f(y),C.error(`${s.name} upload failed.`)}};return(s,e)=>(u(),c("div",{class:r([[t(n).hubContMainer],"relative flex-1 border rounded-2xl p-3 shadow-sm transition-shadow duration-300 hover:shadow-lg"])},[a("div",st,[o(Z,{draggable:"false",src:t(b),alt:l.app.name,class:r([[t(n).hubIconHolder],"app-icon w-12 h-12 rounded-xl drop-shadow-md ring-[1px]"])},null,8,["src","alt","class"]),a("div",nt,[a("h3",{class:r([[t(n).hubCardTextAppName],"font-semibold text-xs truncate"])},H(l.app.display_name||l.app.name),3),a("h4",{class:r([[t(n).hubCardTextRepo],"font-normal text-xs truncate ellipsis"])},H(l.app.image),3)])]),a("hr",{class:r([[t(n).hubSeparator],"border-0 h-px mt-3 bg-gray-200"])},null,2),a("div",lt,[o(t(w),{class:r([[t(n).storeLinkHDOSButton],"flex items-center justify-center !rounded-xl py-1 transition-all duration-300"]),ref:"exportButton",onClick:e[0]||(e[0]=f=>E(l.app.name)),type:"dashed",size:"small",block:""},{default:m(()=>[o(t(x),{icon:t(at),class:"mr-1 h-3 w-3"},null,8,["icon"]),e[4]||(e[4]=a("span",null,"Export",-1))]),_:1},8,["class"]),o(t(tt),{"custom-request":z,"file-list":d.value,"onUpdate:fileList":e[1]||(e[1]=f=>d.value=f),accept:"yml",maxCount:1,showUploadList:!1,headers:g},{default:m(()=>[o(t(w),{class:r([[t(n).storeLinkHDOSButton],"w-full flex items-center justify-center !rounded-xl py-1 transition-all duration-300"]),type:"dashed",size:"small"},{default:m(()=>[o(t(x),{icon:t(ot),class:"mr-1 h-3 w-3"},null,8,["icon"]),e[5]||(e[5]=a("span",null,"Import",-1))]),_:1},8,["class"])]),_:1},8,["file-list"]),o(t(w),{ref:"editButton",onClick:e[2]||(e[2]=f=>I(l.app.name)),type:"primary",size:"small",block:"",class:"flex items-center justify-center !rounded-xl py-1 transition-all duration-300"},{default:m(()=>[o(t(x),{icon:t(O),class:"mr-1 h-3 w-3"},null,8,["icon"]),e[6]||(e[6]=a("span",null,"Edit",-1))]),_:1},512),o(t(w),{ref:"logsButton",onClick:e[3]||(e[3]=f=>M(l.app.name)),type:"primary",size:"small",block:"",class:"flex items-center justify-center !rounded-xl py-1 transition-all duration-300"},{default:m(()=>[o(t(x),{icon:t(q),class:"mr-1 h-3 w-3"},null,8,["icon"]),e[7]||(e[7]=a("span",null,"Logs",-1))]),_:1},512)])],2))}}),pt=D(rt,[["__scopeId","data-v-f66039b3"]]),dt={class:"relative"},ct={key:0,class:"absolute inset-0 h-32 flex justify-center items-center z-10"},ut={key:0,class:"control-hub-grid"},mt={key:1,class:"empty-state-container"},ft=_({__name:"ControlHubRender",props:{apps:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(l){const{themeClasses:i}=$(),b=R();function d(){b.openSystemApp("appstore")}return(h,g)=>(u(),c("div",dt,[o(B,{name:"fade"},{default:m(()=>[l.isLoading?(u(),c("div",ct,[o(t(x),{icon:t(Q),class:"text-blue-600 animate-spin",width:"60",height:"60"},null,8,["icon"])])):j("",!0)]),_:1}),o(B,{name:"fade"},{default:m(()=>[l.isLoading?j("",!0):(u(),c(T,{key:0},[l.apps.length>0?(u(),c("div",ut,[o(K,{name:"control-list",tag:"div",class:"grid-container"},{default:m(()=>[(u(!0),c(T,null,P(l.apps.filter(n=>n.HDRole!=="dependency"),n=>(u(),c("div",{key:n.name,class:"grid-item"},[o(pt,{app:n},null,8,["app"])]))),128))]),_:1})])):(u(),c("div",mt,[o(Y,{icons:[t(N),t(L),t(S),t(X),t(S),t(L)],interval:1e3,iconSize:64,containerClass:t(i).noAppsIcon,class:"transition duration-500 hover:-translate-y-2 hover:scale-105"},null,8,["icons","containerClass"]),a("p",{class:r([[t(i).noAppsTextMain],"text-sm text-center text-balance empty-title"])},"No apps installed yet",2),a("p",{class:r([[t(i).noAppsTextMain],"text-sm text-center text-balance empty-description"])},"Get started by installing your first application from the App Store",2),a("button",{class:"install-app-button",onClick:d},[o(t(x),{icon:t(G),class:"button-icon"},null,8,["icon"]),g[0]||(g[0]=a("span",null,"Browse App Store",-1))])]))],64))]),_:1})]))}}),ht=D(ft,[["__scopeId","data-v-33bfb35e"]]),yt={class:"app-controlhub flex flex-col h-full overflow-hidden"},xt={class:"flex-1 overflow-auto p-5"},gt={class:"space-y-2.5 max-w-sm"},bt={class:"flex items-center gap-2"},Ot=_({__name:"AppControlHub",setup(l){const{themeClasses:i}=$(),b=R(),d=k(()=>b.mainDockerApps),h=k(()=>d.value.filter(n=>n.status==="running").length),g=k(()=>!1);return(n,v)=>(u(),c("div",yt,[a("div",xt,[o(ht,{apps:d.value,isLoading:g.value},null,8,["apps","isLoading"])]),o(et,{icon:t(A),message:`${d.value.length} ${d.value.length===1?"app":"apps"} installed`,info:`${h.value} running`,showHelp:!0},{help:m(()=>[a("div",gt,[a("div",bt,[o(t(x),{icon:t(A),class:r(["w-5 h-5",t(i).statusBarIcon])},null,8,["icon","class"]),a("h4",{class:r(["text-base font-semibold",t(i).statusBarText])},"Control Hub",2)]),a("div",{class:r(["text-[10px] md:text-xs space-y-2 leading-relaxed",t(i).statusBarInfo])},[...v[0]||(v[0]=[a("p",null,"Centralized interface for managing all your installed applications. Export and import configurations, edit app specific settings with save or recreate options, and monitor real-time logs for debugging. Complete control over all your applications in one place.",-1)])],2)])]),_:1},8,["icon","message","info"])]))}});export{Ot as default};
