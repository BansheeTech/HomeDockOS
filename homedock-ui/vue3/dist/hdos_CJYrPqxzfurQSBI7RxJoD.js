const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["hdos_Dcdi4eXd4uLPhnXndZIef.js","hdos_BosuxZz1dT6oamTSRRrG0.js"])))=>i.map(i=>d[i]);
import{d as j,r as g,u as M,o as te,a as k,c as C,b as n,e as s,n as d,f as e,I as x,_ as L,g as q,w as W,h as P,i as _,T as z,j as se,v as ae,F as oe,k as ne,A as le,l as re,m as ie,N as ce,B as O,t as ue,p as de,q as me,s as pe}from"./hdos_C0aY3Fey1WUHqPybNYKRz.js";import{A as fe}from"./hdos_CFoVaE7ljBGw2C3fQDaBD.js";import{d as he,a as D,b as ge,c as ve}from"./hdos_a2q7Rm7CT21k0XOXIxdI_.js";import{d as R}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{d as we,S as ye}from"./hdos_CJ16jrjil3BZuV9HrqQnt.js";import{a as I}from"./hdos_BIBtAW1ZVROvaAJ7WBa1i.js";import{F}from"./hdos_BMB2AnYFtxfnfGUOoP5l2.js";import"./hdos_e2xmaqYNK2jSTcicJN_7E.js";import{I as H}from"./hdos_CMdAvjnh2ZcdES4oQfaIa.js";import"./hdos_Xc1TA1F9PTYgM_5aA0Xad.js";import"./hdos_BZ_MWBsbYHqTZ5nWxwpSx.js";import"./hdos_Db_a3fZqzqV_79hJERcMZ.js";const _e="modulepreload",be=function(S){return"/homedock-ui/vue3/dist/"+S},N={},xe=function(o,l,w){let f=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),a=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));f=Promise.allSettled(l.map(i=>{if(i=be(i),i in N)return;N[i]=!0;const t=i.endsWith(".css"),h=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${h}`))return;const r=document.createElement("link");if(r.rel=t?"stylesheet":_e,t||(r.as="script"),r.crossOrigin="",r.href=i,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t)return new Promise((m,E)=>{r.addEventListener("load",m),r.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${i}`)))})}))}function y(u){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=u,window.dispatchEvent(a),!a.defaultPrevented)throw u}return f.then(u=>{for(const a of u||[])a.status==="rejected"&&y(a.reason);return o().catch(y)})},Se={width:24,height:24,body:'<path fill="currentColor" d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z"/>'},ke={width:24,height:24,body:'<path fill="currentColor" d="M12 17.5c-3.8 0-7.2-2.1-8.8-5.5H1c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5h-2.2c-1.6 3.4-5 5.5-8.8 5.5Z"/>'},Ie={width:24,height:24,body:'<path fill="currentColor" d="M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z"/>'},Ce={id:"cloudScreen",class:"cloud-screen"},Te={class:"banshee-cloud"},Ee={target:"_blank",href:"https://banshee.pro"},Ae={class:"objectHead"},De={class:"object"},Fe=300,Le=750,Pe=2500,je=j({__name:"SplashScreen",setup(S){const o=g(null),l=g(null),w=g(null),{themeClasses:f}=M(),y=new Audio("/audio/splash.mp3"),u=(t,h,r)=>{setTimeout(()=>{t.classList.add(h)},r)},a=()=>{y.play().catch(r=>console.error("Error playing sound: ",r));let t=Fe;o.value.querySelectorAll(".object").forEach(r=>{u(r,"filling",t),t+=Le}),setTimeout(()=>{o.value.classList.add("splashFadeOut"),o.value.addEventListener("transitionend",function r(m){m.propertyName==="opacity"&&(o.value.remove(),o.value.removeEventListener("transitionend",r))})},t+Pe)},i=()=>{w.value.classList.add("shootUp"),l.value.style.opacity="0",a(),l.value.addEventListener("transitionend",()=>{l.value.style.display="none"},{once:!0}),localStorage.setItem("splashShown","true")};return te(()=>{l.value=document.getElementById("cloudScreen"),w.value=document.getElementById("cloudImage"),localStorage.getItem("splashShown")?(o.value.style.display="none",l.value.style.display="none"):(o.value.style.display="block",l.value.style.display="flex")}),(t,h)=>(k(),C("div",null,[n("div",Ce,[n("div",{id:"cloudImage",class:"flex flex-col items-center justify-center",onClick:i},[s(e(x),{class:d([e(f).splashColor]),icon:e(Ie),width:"60",height:"60"},null,8,["class","icon"]),n("div",{class:d([[e(f).splashColor],"cloudtext text-center"])},"Click to Start",2)]),n("span",Te,[n("a",Ee,[n("span",null,[s(L,{class:d([[e(f).compLogo],"optin-banshee will-change-transform"]),src:"/images/optin_banshee.png"},null,8,["class"])])])])]),n("div",{class:d([[e(f).cloudBack],"splash"]),ref_key:"splashElement",ref:o},[n("h1",Ae,[n("div",De,[s(L,{class:d([[e(f).compLogo],"object-logo mr-1"]),src:"/images/logo_trans.svg"},null,8,["class"])]),n("div",{class:d([[e(f).afterSplash],"object object-text ml-1 h-8"])},"HomeDock OS",2)])],2)]))}}),qe=q(je,[["__scopeId","data-v-81a8ddf8"]]),$e={class:"relative text-xs w-full h-8 z-30 text-white text-center flex items-center justify-center rounded-2xl bg-gradient-to-r from-[#6e0000] via-[#4b0092] to-[#1575bf] animate-rainbow py-2.5"},Ve={target:"_blank",href:"https://www.homedock.cloud",class:"flex items-center justify-center"},Be=j({__name:"CloudInstances",props:{isVisible:{type:Boolean}},emits:["update:isVisible"],setup(S,{emit:o}){const l=S,w=o,f=g(!1),y=()=>{const a=new Date().toISOString().split("T")[0];localStorage.setItem("cloudInstancePopShown",a),f.value=!1,w("update:isVisible",!1)},u=()=>{const a=localStorage.getItem("cloudInstancePopShown"),i=new Date;let t=!1;if(!a)t=!0;else{const h=new Date(a);(i.getTime()-h.getTime())/(1e3*3600*24)>7&&(t=!0)}t?(f.value=!0,w("update:isVisible",!0)):(f.value=!1,w("update:isVisible",!1))};return W(()=>l.isVisible,a=>{a&&u()}),(a,i)=>(k(),P(z,{name:"slide-down-fade"},{default:_(()=>[se(n("div",$e,[n("span",{id:"CloudInstancesClose",class:"absolute right-4 text-white cursor-pointer",onClick:y},[s(e(x),{icon:e(he),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"])]),n("a",Ve,[s(e(x),{icon:e(we),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"]),i[0]||(i[0]=n("span",null,"Check out our HomeDock OS Cloud Instances!",-1))])],512),[[ae,f.value]])]),_:1}))}}),Oe=q(Be,[["__scopeId","data-v-06360ac0"]]),Re={class:"flex mb-2"},He={key:0,class:"flex items-center justify-center"},Ne={key:1},Ue=j({__name:"Login",setup(S){var V;const o=g({username:"",password:""}),l=g(!1),w=()=>{l.value||(l.value=!0,setTimeout(()=>{l.value=!1},1e3))},f={username:[{required:!0,message:"Username is required",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"}]},y=g(!1),u=g(!1),a=g(!1),i=g(((V=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:V.getAttribute("content"))||null),t=g(void 0),h=g(null),r=g(!1),{themeClasses:m}=M(),E=()=>{y.value=!y.value},$=()=>{u.value=!0},Q=async()=>{if(!i.value){I.error("CSRF token missing.");return}if(!(a.value||r.value)){a.value=!0;try{const p=await D.get("/api/pksend",{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":i.value}}),c=p.data.public_key,v=p.data.token;if(!c||!v)throw new Error("Public Key or token not found in response.");const T=(await xe(async()=>{const{default:A}=await import("./hdos_Dcdi4eXd4uLPhnXndZIef.js").then(ee=>ee.i);return{default:A}},__vite__mapDeps([0,1]))).default,Z=new TextEncoder().encode(o.value.password),G=Array.from(Z).map(A=>String.fromCharCode(A)).join(""),J=T.pki.publicKeyFromPem(c).encrypt(G,"RSA-OAEP",{md:T.md.sha256.create(),mgf1:{md:T.md.sha256.create()}}),Y=T.util.encode64(J),B=await D.post("/api/pcrypt",{token:v,password:Y},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":i.value}});if(B.data.status!=="success"){I.error(B.data.message||"Error encrypting password.");return}const b=await D.post("/login",{token:v,username:o.value.username,homedock_csrf_token:i.value},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":i.value}});if(b.data.message?b.data.status==="success"?(I.success(b.data.message),r.value=!0,setTimeout(()=>{window.location.href=b.data.redirect_url},2500)):(b.data.remaining_attempts!==void 0&&(h.value=b.data.remaining_attempts),I.error(b.data.message),t.value="error"):I.error("Unexpected error, please contact support."),b.data.redirect_url){setTimeout(()=>{window.location.href=b.data.redirect_url},2500);return}}catch(p){if(p instanceof fe)if(p.response&&p.response.data){const{message:c,redirect_url:v}=p.response.data;if(c&&(I.error(c),t.value="error"),p.response.data.remaining_attempts!==void 0&&(h.value=p.response.data.remaining_attempts),v){setTimeout(()=>{window.location.href=v},2500);return}}else console.error("There was an error while signing in:",p),I.error("There was an error while signing in.")}finally{a.value=!1}}};W(h,()=>{const p=document.querySelector(".animated-attempts");p&&(p.classList.add("updated"),setTimeout(()=>p.classList.remove("updated"),300))});const X=p=>{console.log("Validation failed:",p)};return(p,c)=>(k(),C(oe,null,[s(ne),s(le),s(re),s(ie),s(ce),s(qe),s(ye),n("div",{class:d([[e(m).back],"flex items-center justify-center min-h-screen login-wrapper relative p-3 overflow-hidden"])},[n("div",{class:d([{bounce:l.value},"w-full max-w-xl"])},[n("div",{class:d([[e(m).form],"group px-6 py-12 lg:px-12 rounded-3xl shadow-lg w-full relative z-10 container-scroller mb-2"])},[n("div",Re,[s(L,{src:"/images/logo_trans.svg",alt:"Logo",class:d([[e(m).logo],"h-20 hd-top-form-logo animate-pulse"])},null,8,["class"])]),n("h2",{class:d([[e(m).mainText],"text-xl font-normal mb-2"])},"Welcome to HomeDock OS",2),n("p",{class:d([[e(m).subText],"font-light mb-6 leading-3"])},"Sign in to continue",2),s(e(F),{layout:"vertical",model:o.value,rules:f,onFinish:Q,onFinishFailed:X},{default:_(()=>[s(e(F).Item,{name:"username"},{default:_(()=>[c[3]||(c[3]=n("label",{class:"text-gray-300",for:"username"},"Username",-1)),s(e(H),{class:d([[e(m).scopeSelector,e(m).loginFormInput],"h-10 group inputUser"]),autocomplete:"username",value:o.value.username,"onUpdate:value":c[0]||(c[0]=v=>o.value.username=v),placeholder:"Username...",maxlength:30,status:t.value,required:"",onFocus:$},{prefix:_(()=>[s(e(x),{icon:e(ge),class:d(["mr-0.5 transition duration-300",[e(m).formIcon,{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),_:1},8,["class","value","status"])]),_:1}),c[6]||(c[6]=n("div",{class:"mt-2"},null,-1)),s(e(F).Item,{name:""},{default:_(()=>[c[4]||(c[4]=n("label",{class:"text-gray-300",for:"password"},"Password",-1)),s(e(H),{class:d([[e(m).scopeSelector,e(m).loginFormInput],"h-10 group"]),autocomplete:"current-password",value:o.value.password,"onUpdate:value":c[1]||(c[1]=v=>o.value.password=v),type:y.value?"text":"password",placeholder:"••••••••",status:t.value,maxlength:30,required:"",onFocus:$},{prefix:_(()=>[s(e(x),{icon:e(R),class:d(["mr-0.5 transition duration-300",[e(m).formIcon,{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),suffix:_(()=>[s(e(O),{class:d(["mb-1 transition duration-300",{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]),type:"link",onClick:E,icon:""},{default:_(()=>[y.value?(k(),P(e(x),{key:0,icon:e(Se),class:"mt-1"},null,8,["icon"])):(k(),P(e(x),{key:1,icon:e(ke),class:"mt-1"},null,8,["icon"]))]),_:1},8,["class"])]),_:1},8,["class","value","type","status"])]),_:1}),s(e(O),{id:"main_button_login",onClick:w,class:d([{clicked:r.value},"w-full flex items-center justify-center h-14 mt-8 relative overflow-hidden border-0 disabled:bg-blue-400 disabled:cursor-pointer disabled:text-white"]),loading:a.value,type:"primary",htmlType:"submit",disabled:a.value||r.value},{default:_(()=>[r.value?(k(),C("span",Ne,[s(e(x),{icon:e(ve),class:"text-white animate-spin",width:"26",height:"26"},null,8,["icon"])])):(k(),C("div",He,[s(e(x),{icon:e(R),class:"text-white",width:"16",height:"16"},null,8,["icon"]),c[5]||(c[5]=n("span",{class:"ml-1"},"Sign In",-1))]))]),_:1},8,["class","loading","disabled"]),s(z,{name:"slide-down-error"},{default:_(()=>[h.value!==null?(k(),C("p",{key:0,class:d([[e(m).subText,"animated-attempts"],"text-xs mt-2"])},"Remaining attempts: "+ue(h.value),3)):de("",!0)]),_:1})]),_:1},8,["model"])],2),s(Oe,{isVisible:u.value,"onUpdate:isVisible":c[2]||(c[2]=v=>u.value=v)},null,8,["isVisible"])],2)],2)],64))}}),Ke=q(Ue,[["__scopeId","data-v-d36c1b82"]]);var K;const U=(K=document.getElementById("data-theme"))==null?void 0:K.textContent;if(U){const S=atob(U);let o;try{o=JSON.parse(S);const l=me(Ke);l.provide("data-theme",{selectedTheme:o.selected_theme,selectedBack:o.selected_back});const w=pe();l.use(w),l.mount("#app-login-root")}catch(l){console.error("Error parsing data-theme objects:",l)}}else console.error("The element 'data-theme' wasn't found or it's empty.");
