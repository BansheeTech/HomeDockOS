import{M as xt,bQ as gt,aU as v,q as S,bE as Ae,aD as ht,aI as yt,u as F,aL as T,v as a,t as re,I as i,bJ as d,au as r,bk as n,bU as p,F as Ee,aX as He,bO as Re,bb as X,bL as Y,bM as Ue,bA as G,g as bt,aw as kt,H as $,bR as Ct}from"./hdos_BnIymrgN3FMaW96NhsgWi.js";import{d as Ft,a as y}from"./hdos_DahYSjy4MuyfOawe4NtU9.js";import{c as Tt,a as St,M as ue,f as de,N as ce,Y as Dt,X as Nt,B as pe,w as $t,v as ve,$ as K,ah as M,ag as U}from"./hdos_DMBX8EgZFkFEssZyeFxZ3.js";import{d as Mt}from"./hdos_DPi7gOmHlKdoQ5BrTSdrp.js";import{d as _e}from"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import{d as Bt,a as It}from"./hdos_BhSrQuT_-kshj2sfQCltl.js";import{k as At}from"./hdos_BwFNaVKxrzJr1i43ZL7xh.js";import{d as ee}from"./hdos_CiiZkK0g2tJQxvgJUCvSu.js";import{d as Et,D as fe}from"./hdos_CdutiQIYB3Q9g345GSuEd.js";import{_ as Ht}from"./hdos_BcWAxXmlibZ2SSqtP9a_8.js";import{M as me,a as k,b as _}from"./hdos_luNet7jTKC9kaoF0S0B5K.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_B3Gn8FiDAIlVGTwMyO36P.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_Bk1zzRUDOtQzy_FbGlDW7.js";import"./hdos_rfaQpGnOmO949nI3XBr-z.js";import"./hdos_Cuccj8xUVyEDTvA_fcq1n.js";import"./hdos_TIm5gfXqLWlO6DtkdAyHA.js";import"./hdos_CtY2UTrCU7CborQ9sr8jv.js";import"./hdos_gyw9xS5KcI5AuUkDD9uV1.js";import"./hdos_DaMzMFtabbBV30Ol-afWE.js";import"./hdos_CuvhcV6kNaPwNpF2pWWUw.js";import"./hdos_CDFYpsm_-2sqqpjcHcxLG.js";import"./hdos_CzoE9SOL1adftRMeThf5c.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";const Rt={width:24,height:24,body:'<path fill="currentColor" d="m10 19l.14-.14A2.97 2.97 0 0 1 8 16a3 3 0 0 1 3-3c1.36 0 2.5.9 2.86 2.14L20 9V7l-4-4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6v-2M4 5h10v4H4V5m16.04 7.13c-.14 0-.28.06-.39.17l-1 1l2.05 2.05l1-1c.22-.21.22-.56 0-.77l-1.28-1.28a.533.533 0 0 0-.38-.17m-1.97 1.75L12 19.94V22h2.06l6.06-6.07l-2.05-2.05Z"/>'},Ut={width:24,height:24,body:'<path fill="currentColor" d="M9 9h6v6H9m-2 2h10V7H7m8-2h2V3h-2m0 18h2v-2h-2m4-2h2v-2h-2m0-6h2V7h-2m0 14a2 2 0 0 0 2-2h-2m0-6h2v-2h-2m-8 10h2v-2h-2M9 3H7v2h2M3 17h2v-2H3m2 6v-2H3a2 2 0 0 0 2 2M19 3v2h2a2 2 0 0 0-2-2m-6 0h-2v2h2M3 9h2V7H3m4 14h2v-2H7m-4-6h2v-2H3m0-6h2V3a2 2 0 0 0-2 2Z"/>'},_t={width:24,height:24,body:'<path fill="currentColor" d="M21 5H3v2h18V5M3 19h7v-2H3v2m0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3l4 3v-2h2c2.95 0 4-1.27 4-4c0-2.72-1-4-4-4H3v2Z"/>'},Lt={width:24,height:24,body:'<path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"/>'},Ot={class:"utils-notepad flex flex-col h-full overflow-hidden"},Vt={class:"flex items-center gap-2"},zt={class:"flex items-center gap-2"},Wt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},Kt={class:"flex items-center gap-2"},jt={class:"flex items-center gap-2"},Pt={class:"flex items-center gap-2"},qt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-2"},Qt={class:"flex items-center gap-2"},Yt={class:"flex items-center gap-2"},Gt={class:"flex items-center min-w-0"},en=["onClick","onAuxclick","title"],tn=["onClick"],nn={class:"flex-1 overflow-hidden p-2"},on={class:"space-y-3 max-w-sm"},an={class:"flex items-center gap-2"},ln={class:"space-y-1.5"},sn={class:"flex items-start gap-2"},rn={class:"flex items-start gap-2"},un={class:"flex items-start gap-2"},dn={class:"space-y-3"},cn={class:"space-y-1 max-h-56 overflow-y-auto"},pn={key:0,class:"text-center py-4"},vn=["onClick","onDblclick"],fn={class:"flex-1 min-w-0"},mn={class:"space-y-2"},wn={class:"flex items-center gap-1.5"},Le=8,Oe=24,xn=10,gn=xt({__name:"UtilsNotepad",props:{_windowId:{},externalFile:{},data:{}},setup(Ve){const m=Ve,{themeClasses:l}=gt(),h=Tt(),j=St();function te(){return`tab-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function we(){return{id:te(),title:"Untitled",content:"",originalContent:"",isModified:!1,originalFilename:null,externalFile:null}}const c=v([we()]),x=v(c.value[0].id),f=S(()=>c.value.find(t=>t.id===x.value)||c.value[0]),C=S({get:()=>f.value?.content||"",set:t=>{const e=c.value.find(o=>o.id===x.value);e&&(e.content=t)}}),E=v(null),L=v(!1),b=v(""),O=v(""),D=v(10),P=v(!0),N=v(!1),B=v(!1),V=v(""),I=v(null),z=v([]),ne=v(!1),W=v(!1),Z=v(null),q=v(""),H=v(!1),R=v(null),A=v(!1),ze=S(()=>(f.value?.content||"").split(`
`).length),We=S(()=>{const t=(f.value?.content||"").trim();return t?t.split(/\s+/).length:0}),Ze=S(()=>(f.value?.content||"").length),Xe=S(()=>{const t=f.value;return t?.externalFile?t.externalFile.source==="appdrive"?ue:t.externalFile.source==="storage"?de:ce:ee}),Ke=S(()=>{const t=f.value;return t?.externalFile?t.externalFile.source==="appdrive"?"Editing on App Drive":t.externalFile.source==="storage"?"Editing on Storage":"Editing on Drop Zone":"Editing in Notes"}),je=S(()=>`Ln ${ze.value} | Words ${We.value} | ${Ze.value} chars`),Pe=S(()=>{const t=c.value.filter(e=>e.isModified);return t.length===1?`"${t[0].title}" has unsaved changes. Do you want to save before closing?`:`${t.length} files have unsaved changes. Do you want to save all before closing?`});function qe(t){return t.externalFile?t.externalFile.source==="appdrive"?ue:t.externalFile.source==="storage"?de:ce:ee}function Je(t){return t.externalFile?t.externalFile.source==="appdrive"?"text-purple-500":t.externalFile.source==="storage"?"text-green-500":"text-blue-500":"text-green-500"}function Qe(t){return t.externalFile?t.externalFile.source==="appdrive"?"App Drive":t.externalFile.source==="storage"?"Storage":"Drop Zone":"Notes"}function Ye(t){if(!t.externalFile){const s=t.originalFilename?`Notes/${t.originalFilename}`:"Not saved yet";return`${t.title}
Path: ${s}
Saved to: Notes`}const o={appdrive:"App Drive",storage:"Storage",dropzone:"Drop Zone"}[t.externalFile.source]||"Unknown";return`${t.title}
Path: ${t.externalFile.path}
Saved to: ${o}`}function xe(t){if(t.includes("ï¿½")||t.includes("\0"))return!0;const e=t.match(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g);return!!(e&&e.length>t.length*.01)}async function Ge(){H.value=!1,R.value&&(await R.value(),R.value=null)}function et(){H.value=!1,R.value=null}function ge(){if(!m._windowId)return;const t=f.value;if(!t)return;const e=c.value.some(s=>s.isModified),o=t.title+(e?" *":"");j.updateWindowTitle(m._windowId,`Notepad - ${o}`)}Ae([x,()=>f.value?.title,()=>f.value?.isModified],ge);function oe(){const t=f.value;t&&(t.isModified=t.content!==t.originalContent)}function ae(){const t=we();c.value.push(t),x.value=t.id}function J(t){const e=c.value.find(o=>o.id===t);if(e&&!(c.value.length<=1)){if(e.isModified){Z.value=t,q.value=e.title,W.value=!0;return}he(t)}}function he(t){const e=c.value.findIndex(o=>o.id===t);e!==-1&&(c.value.splice(e,1),x.value===t&&(x.value=c.value[Math.max(0,e-1)].id))}function tt(){Z.value&&he(Z.value),W.value=!1,Z.value=null,q.value=""}function nt(){W.value=!1,Z.value=null,q.value=""}function Q(t){const e=["<",">",":",'"',"|","?","*","&","/","\\"];let o=t.trim();for(const s of e)o=o.split(s).join("-");return o=o.replace(/^[\.\s]+|[\.\s]+$/g,""),o.length>250&&(o=o.substring(0,250)),o||(o="Untitled"),o}async function le(){try{await y.get("/api/storage/files",{params:{path:"Notes"},headers:{"X-HomeDock-CSRF-Token":h.value}})}catch(t){if(t.response?.status===404)await y.post("/api/storage/create-folder",{name:"Notes",path:""},{headers:{"X-HomeDock-CSRF-Token":h.value}});else throw t}}async function ie(t){try{return await y.get("/api/storage/download",{params:{file:t},headers:{"X-HomeDock-CSRF-Token":h.value},responseType:"blob"}),!0}catch{return!1}}async function ye(t){try{const e=t.originalFilename||Q(t.title)+".txt",o=new FormData,s=new Blob([t.content],{type:"text/plain"});o.append("file",s,e),o.append("path","Notes"),await y.post("/api/storage/upload",o,{headers:{"X-HomeDock-CSRF-Token":h.value}}),t.originalContent=t.content,t.isModified=!1,t.originalFilename=e,U("Note saved",`Saved to Notes/${e}`,l.value.scopeSelector)}catch(e){M(e.response?.data?.error||"Failed to save note")}}async function ot(t,e){try{if(await ie(`Notes/${e}`)){M(`A note named "${e.replace(".txt","")}" already exists`);return}const s=new FormData,u=new Blob([t.content],{type:"text/plain"});s.append("file",u,e),s.append("path","Notes"),await y.post("/api/storage/upload",s,{headers:{"X-HomeDock-CSRF-Token":h.value}}),t.originalFilename&&await y.post("/api/storage/delete",{file:`Notes/${t.originalFilename}`},{headers:{"X-HomeDock-CSRF-Token":h.value}}),t.originalContent=t.content,t.isModified=!1,t.originalFilename=e,t.title=e.replace(".txt",""),U("Note saved",`Saved to Notes/${e}`,l.value.scopeSelector)}catch(o){M(o.response?.data?.error||"Failed to save note")}}async function be(){const t=f.value;if(t){if(xe(t.content)){R.value=ke,H.value=!0;return}await ke()}}async function ke(){const t=f.value;if(!t)return;if(t.externalFile){await Te();return}if(!t.originalFilename){B.value=!0,V.value=t.title;return}const e=Q(t.title)+".txt";e!==t.originalFilename?await ot(t,e):await ye(t)}function at(){const t=f.value;t&&(V.value=t.title!=="Untitled"?t.title:"",B.value=!0)}async function Ce(){const t=f.value;if(t){if(xe(t.content)){B.value=!1,R.value=Fe,H.value=!0;return}await Fe()}}async function Fe(){const t=f.value;if(!t)return;const e=V.value.trim()||"Untitled",o=Q(e);try{await le();let s=o+".txt",u=1;for(;await ie(`Notes/${s}`);)if(s=`${o} (${u}).txt`,u++,u>100){M("Too many notes with this name");return}const w=new FormData,g=new Blob([t.content],{type:"text/plain"});w.append("file",g,s),w.append("path","Notes"),await y.post("/api/storage/upload",w,{headers:{"X-HomeDock-CSRF-Token":h.value}}),t.title=s.replace(".txt",""),t.originalContent=t.content,t.isModified=!1,t.originalFilename=s,t.externalFile=null,B.value=!1,U("Note saved",`Saved to Notes/${s}`,l.value.scopeSelector)}catch(s){M(s.response?.data?.error||"Failed to save note")}}async function Te(){const t=f.value;if(t?.externalFile)try{const e=t.externalFile;if(e.source==="storage"){const u=new FormData,w=new Blob([t.content],{type:"text/plain"});u.append("file",w,e.path.split("/").pop()||"file.txt");const g=e.path.split("/");g.pop(),g.length>0&&u.append("path",g.join("/")),await y.post("/api/storage/upload",u,{headers:{"X-HomeDock-CSRF-Token":h.value}})}else if(e.source==="dropzone"){const u=new FormData,w=new Blob([t.content],{type:"text/plain"});u.append("file",w,e.path.split("/").pop()||"file.txt");const g=e.path.split("/");g.pop(),g.length>0&&u.append("path",g.join("/")),await y.post("/api/dropzone/upload",u,{headers:{"X-HomeDock-CSRF-Token":h.value}})}else if(e.source==="appdrive"){const u=new FormData,w=new Blob([t.content],{type:"text/plain"});u.append("file",w,e.path.split("/").pop()||"file.txt"),u.append("container",e.container||""),u.append("mount",String(e.mountIndex??0));const g=e.path.split("/");g.pop(),g.length>0&&u.append("path",g.join("/")),await y.post("/api/appdrive/upload",u,{headers:{"X-HomeDock-CSRF-Token":h.value}})}t.originalContent=t.content,t.isModified=!1;const s={appdrive:"App Drive",storage:"Storage",dropzone:"Drop Zone"}[e.source]||"Unknown";U("File saved",`Saved to ${s}: ${e.path}`,l.value.scopeSelector)}catch(e){M(e.response?.data?.error||"Failed to save file")}}async function lt(){ne.value=!0;try{await le();const t=await y.get("/api/storage/files",{params:{path:"Notes"},headers:{"X-HomeDock-CSRF-Token":h.value}});t.data.files&&(z.value=t.data.files.filter(e=>!e.is_directory&&e.name.toLowerCase().endsWith(".txt")).map(e=>{const o=e.display_name||e.name.split("/").pop()||e.name;return{filename:o,title:o.replace(/\.txt$/i,""),modified:e.modified,size:e.size}}).sort((e,o)=>o.modified-e.modified))}catch(t){t.response?.status===404?z.value=[]:console.error("Failed to load notes list:",t)}finally{ne.value=!1}}async function Se(){const t=z.value.find(e=>e.filename===I.value);if(t)try{const e=c.value.find(w=>w.originalFilename===t.filename&&!w.externalFile);if(e){x.value=e.id,N.value=!1,I.value=null;return}const s=(await y.get("/api/storage/download",{params:{file:`Notes/${t.filename}`},headers:{"X-HomeDock-CSRF-Token":h.value},responseType:"text"})).data,u={id:te(),title:t.title,content:s,originalContent:s,isModified:!1,originalFilename:t.filename,externalFile:null};c.value.push(u),x.value=u.id,N.value=!1,I.value=null}catch(e){M(e.response?.data?.error||"Failed to open note")}}function De(){if(L.value=!L.value,L.value){const t=window.getSelection()?.toString();t&&(b.value=t)}}function se(){if(!b.value||!E.value)return;const t=E.value,e=C.value,o=t.selectionEnd;let s=e.indexOf(b.value,o);s===-1&&(s=e.indexOf(b.value)),s!==-1&&(t.focus(),t.setSelectionRange(s,s+b.value.length))}function it(){if(!b.value||!E.value)return;const t=E.value,e=t.selectionStart,o=t.selectionEnd;C.value.substring(e,o)===b.value&&(C.value=C.value.substring(0,e)+O.value+C.value.substring(o),t.setSelectionRange(e,e+O.value.length),oe()),se()}function st(){if(!b.value)return;const t=(C.value.match(new RegExp(rt(b.value),"g"))||[]).length;C.value=C.value.split(b.value).join(O.value),oe(),U("Replace all",`Replaced ${t} occurrences`,l.value.scopeSelector)}function rt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ut(){E.value?.select()}function Ne(){D.value<Oe&&(D.value=Math.min(D.value+2,Oe))}function $e(){D.value>Le&&(D.value=Math.max(D.value-2,Le))}function Me(){D.value=xn}function dt(t){return new Date(t*1e3).toLocaleString()}function ct(t){if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"s":t.preventDefault(),be();break;case"n":t.preventDefault(),ae();break;case"o":t.preventDefault(),N.value=!0;break;case"f":t.preventDefault(),De();break;case"w":t.preventDefault(),c.value.length>1&&J(x.value);break;case"=":case"+":t.preventDefault(),Ne();break;case"-":t.preventDefault(),$e();break;case"0":t.preventDefault(),Me();break}}Ae(N,t=>{t&&lt()});function pt(t){const e=t.path.split("/").pop()||"File",o=c.value.find(u=>u.externalFile?.path===t.path&&u.externalFile?.source===t.source);if(o){x.value=o.id;return}const s={id:te(),title:e,content:t.content,originalContent:t.content,isModified:!1,originalFilename:null,externalFile:t};c.value.push(s),x.value=s.id}function Be(t){const e=t.detail;e?.externalFile&&pt(e.externalFile)}function Ie(t){c.value.some(o=>o.isModified)&&(t.preventDefault(),A.value=!0)}async function vt(){A.value=!1;const t=c.value.filter(e=>e.isModified);for(const e of t){x.value=e.id;try{e.externalFile?await Te():e.originalFilename?await ye(e):await ft(e)}catch(o){console.error("Failed to save tab:",e.title,o),M("Failed to save: "+e.title);return}}m._windowId&&j.closeWindow(m._windowId)}async function ft(t){const e=t.title!=="Untitled"?t.title:`Note ${new Date().toLocaleString().replace(/[/:]/g,"-")}`,o=Q(e);try{await le();let s=o+".txt",u=1;for(;await ie(`Notes/${s}`);)if(s=`${o} (${u}).txt`,u++,u>100)throw new Error("Too many notes with this name");const w=new FormData,g=new Blob([t.content],{type:"text/plain"});w.append("file",g,s),w.append("path","Notes"),await y.post("/api/storage/upload",w,{headers:{"X-HomeDock-CSRF-Token":h.value}}),t.title=s.replace(".txt",""),t.originalContent=t.content,t.isModified=!1,t.originalFilename=s,U("Note saved",`Saved to Notes/${s}`,l.value.scopeSelector)}catch(s){throw new Error(s.response?.data?.error||s.message||"Failed to save note")}}function mt(){A.value=!1,m._windowId&&j.closeWindow(m._windowId)}function wt(){if(!m._windowId)return;c.value.some(e=>e.isModified)?A.value=!0:j.closeWindow(m._windowId)}return ht(()=>{const t=m.externalFile||m.data?.externalFile;if(t){const e=c.value[0];e.externalFile=t,e.content=t.content,e.originalContent=t.content,e.title=t.path.split("/").pop()||"File"}ge(),m._windowId&&(window.addEventListener(`homedock:open-file-${m._windowId}`,Be),window.addEventListener(`homedock:request-close-${m._windowId}`,Ie))}),yt(()=>{m._windowId&&(window.removeEventListener(`homedock:open-file-${m._windowId}`,Be),window.removeEventListener(`homedock:request-close-${m._windowId}`,Ie))}),(t,e)=>(T(),F("div",Ot,[a("div",{class:r(["flex items-center gap-1 px-2 py-1.5 border-b",n(l).utilityToolbarBorder])},[i(n(fe),{trigger:["click"],placement:"bottomLeft","overlay-class-name":n(l).scopeSelector},{overlay:d(()=>[i(n(me),null,{default:d(()=>[i(n(k),{key:"new",onClick:ae},{default:d(()=>[a("div",Vt,[i(n(p),{icon:n(Dt),class:"w-4 h-4"},null,8,["icon"]),e[16]||(e[16]=a("span",null,"New Tab",-1)),e[17]||(e[17]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+N",-1))])]),_:1}),i(n(k),{key:"open",onClick:e[0]||(e[0]=o=>N.value=!0)},{default:d(()=>[a("div",zt,[i(n(p),{icon:n(Nt),class:"w-4 h-4"},null,8,["icon"]),e[18]||(e[18]=a("span",null,"Open...",-1)),e[19]||(e[19]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+O",-1))])]),_:1}),i(n(_)),i(n(k),{key:"save",onClick:be,disabled:!f.value?.content?.trim()},{default:d(()=>[a("div",Wt,[i(n(p),{icon:n(Mt),class:"w-4 h-4"},null,8,["icon"]),e[20]||(e[20]=a("span",null,"Save",-1)),e[21]||(e[21]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+S",-1))])]),_:1},8,["disabled"]),i(n(k),{key:"saveas",onClick:at,disabled:!f.value?.content?.trim()},{default:d(()=>[a("div",Zt,[i(n(p),{icon:n(Rt),class:"w-4 h-4"},null,8,["icon"]),e[22]||(e[22]=a("span",null,"Save As...",-1))])]),_:1},8,["disabled"]),i(n(_)),i(n(k),{key:"closetab",onClick:e[1]||(e[1]=o=>J(x.value)),disabled:c.value.length<=1},{default:d(()=>[a("div",Xt,[i(n(p),{icon:n(pe),class:"w-4 h-4"},null,8,["icon"]),e[23]||(e[23]=a("span",null,"Close Tab",-1)),e[24]||(e[24]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+W",-1))])]),_:1},8,["disabled"]),i(n(_)),i(n(k),{key:"exit",onClick:wt},{default:d(()=>[a("div",Kt,[i(n(p),{icon:n(Et),class:"w-4 h-4"},null,8,["icon"]),e[25]||(e[25]=a("span",null,"Exit",-1))])]),_:1})]),_:1})]),default:d(()=>[a("button",{class:r([[n(l).windowText,n(l).windowButtonBgHover],"px-3 py-1 text-xs rounded transition-colors"])},"File",2)]),_:1},8,["overlay-class-name"]),i(n(fe),{trigger:["click"],placement:"bottomLeft","overlay-class-name":n(l).scopeSelector},{overlay:d(()=>[i(n(me),null,{default:d(()=>[i(n(k),{key:"find",onClick:De},{default:d(()=>[a("div",jt,[i(n(p),{icon:n(_e),class:"w-4 h-4"},null,8,["icon"]),e[26]||(e[26]=a("span",null,"Find & Replace",-1)),e[27]||(e[27]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+F",-1))])]),_:1}),i(n(_)),i(n(k),{key:"selectall",onClick:ut},{default:d(()=>[a("div",Pt,[i(n(p),{icon:n(Ut),class:"w-4 h-4"},null,8,["icon"]),e[28]||(e[28]=a("span",null,"Select All",-1)),e[29]||(e[29]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+A",-1))])]),_:1})]),_:1})]),default:d(()=>[a("button",{class:r([[n(l).windowText,n(l).windowButtonBgHover],"px-3 py-1 text-xs rounded transition-colors"])},"Edit",2)]),_:1},8,["overlay-class-name"]),i(n(fe),{trigger:["click"],placement:"bottomLeft","overlay-class-name":n(l).scopeSelector},{overlay:d(()=>[i(n(me),null,{default:d(()=>[i(n(k),{key:"zoomin",onClick:Ne},{default:d(()=>[a("div",qt,[i(n(p),{icon:n(Bt),class:"w-4 h-4"},null,8,["icon"]),e[30]||(e[30]=a("span",null,"Zoom In",-1)),e[31]||(e[31]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl++",-1))])]),_:1}),i(n(k),{key:"zoomout",onClick:$e},{default:d(()=>[a("div",Jt,[i(n(p),{icon:n(It),class:"w-4 h-4"},null,8,["icon"]),e[32]||(e[32]=a("span",null,"Zoom Out",-1)),e[33]||(e[33]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+-",-1))])]),_:1}),i(n(_)),i(n(k),{key:"resetzoom",onClick:Me},{default:d(()=>[a("div",Qt,[i(n(p),{icon:n(_e),class:"w-4 h-4"},null,8,["icon"]),e[34]||(e[34]=a("span",null,"Reset Zoom",-1)),e[35]||(e[35]=a("span",{class:"ml-auto text-[10px] opacity-50"},"Ctrl+0",-1))])]),_:1}),i(n(_)),i(n(k),{key:"wordwrap",onClick:e[2]||(e[2]=o=>P.value=!P.value)},{default:d(()=>[a("div",Yt,[i(n(p),{icon:P.value?n(At):n(_t),class:"w-4 h-4"},null,8,["icon"]),e[36]||(e[36]=a("span",null,"Word Wrap",-1))])]),_:1})]),_:1})]),default:d(()=>[a("button",{class:r([[n(l).windowText,n(l).windowButtonBgHover],"px-3 py-1 text-xs rounded transition-colors"])},"View",2)]),_:1},8,["overlay-class-name"])],2),c.value.length>1?(T(),F("div",{key:0,class:r(["flex items-center border-b overflow-x-auto",n(l).utilityToolbarBorder])},[a("div",Gt,[(T(!0),F(Ee,null,He(c.value,o=>(T(),F("div",{key:o.id,onClick:s=>x.value=o.id,onAuxclick:Re(s=>c.value.length>1&&J(o.id),["middle","prevent"]),class:r(["group flex items-center gap-1.5 px-3 py-1.5 text-xs cursor-pointer border-r transition-colors min-w-0 max-w-[200px]",n(l).utilityToolbarBorder,x.value===o.id?"bg-blue-500/20 border-blue-500/30":"hover:bg-white/5 border-transparent"]),title:Ye(o)},[i(n(p),{icon:qe(o),class:r(["w-3 h-3 flex-shrink-0",Je(o)]),title:Qe(o)},null,8,["icon","class","title"]),i(n(p),{icon:o.externalFile?n($t):n(ve),class:r(["w-3.5 h-3.5 flex-shrink-0 opacity-60",n(l).windowText])},null,8,["icon","class"]),a("span",{class:r([[n(l).windowText],"truncate"])},X(o.title)+X(o.isModified?" *":""),3),c.value.length>1?(T(),F("button",{key:0,onClick:Re(s=>J(o.id),["stop"]),class:r([[n(l).windowButtonBgHover],"ml-1 p-0.5 rounded opacity-60 hover:opacity-100 flex-shrink-0 transition-opacity"])},[i(n(p),{icon:n(pe),class:r(["w-3 h-3",n(l).windowText])},null,8,["icon","class"])],10,tn)):re("",!0)],42,en))),128))]),a("button",{onClick:ae,class:r([[n(l).windowText,n(l).windowButtonBgHover],"p-1.5 mx-1 rounded transition-colors flex-shrink-0"]),title:"New Tab (Ctrl+N)"},[i(n(p),{icon:n(Lt),class:r(["w-4 h-4 opacity-60",n(l).windowText])},null,8,["icon","class"])],2)],2)):re("",!0),i(bt,{name:"slide-down"},{default:d(()=>[L.value?(T(),F("div",{key:0,class:r(["flex items-center gap-2 px-3 py-2 border-b",n(l).utilityToolbarBorder])},[Y(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),type:"text",placeholder:"Find...",class:r([[n(l).windowBg,n(l).windowText,n(l).windowBorder],"flex-1 px-2 py-1 text-xs rounded border outline-none"]),onKeyup:Ue(se,["enter"])},null,34),[[G,b.value]]),Y(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>O.value=o),type:"text",placeholder:"Replace...",class:r([[n(l).windowBg,n(l).windowText,n(l).windowBorder],"flex-1 px-2 py-1 text-xs rounded border outline-none"])},null,2),[[G,O.value]]),a("button",{onClick:se,class:r([[n(l).windowText],"px-2 py-1 text-xs rounded bg-blue-500/20 hover:bg-blue-500/30"])},"Find",2),a("button",{onClick:it,class:r([[n(l).windowText],"px-2 py-1 text-xs rounded bg-blue-500/20 hover:bg-blue-500/30"])},"Replace",2),a("button",{onClick:st,class:r([[n(l).windowText],"px-2 py-1 text-xs rounded bg-blue-500/20 hover:bg-blue-500/30"])},"Replace All",2),a("button",{onClick:e[5]||(e[5]=o=>L.value=!1),class:r([[n(l).windowText,n(l).windowButtonBgHover],"p-1 rounded"])},[i(n(p),{icon:n(pe),class:"w-4 h-4"},null,8,["icon"])],2)],2)):re("",!0)]),_:1}),a("div",nn,[Y(a("textarea",{ref_key:"textareaRef",ref:E,"onUpdate:modelValue":e[6]||(e[6]=o=>C.value=o),class:r([[n(l).windowText,n(l).windowBorder,P.value?"whitespace-pre-wrap":"whitespace-pre overflow-x-auto"],"w-full h-full resize-none p-3 font-mono leading-relaxed rounded-lg border outline-none bg-transparent"]),style:kt({fontSize:D.value+"px"}),onInput:oe,onKeydown:ct,spellcheck:"false"},null,38),[[G,C.value]])]),i(Ht,{icon:Xe.value,message:Ke.value,info:je.value},{help:d(()=>[a("div",on,[a("div",an,[i(n(p),{icon:n(ve),class:r(["w-5 h-5",n(l).statusBarIcon])},null,8,["icon","class"]),a("h4",{class:r(["text-base font-semibold",n(l).statusBarText])},"Notepad",2)]),a("div",{class:r(["text-[10px] md:text-xs space-y-2.5 leading-relaxed",n(l).statusBarInfo])},[e[40]||(e[40]=a("p",null,"A simple text editor with support for multiple storage locations.",-1)),a("div",ln,[a("div",sn,[i(n(p),{icon:n(ee),class:"w-3.5 h-3.5 mt-0.5 text-green-500 flex-shrink-0"},null,8,["icon"]),e[37]||(e[37]=a("p",null,[a("strong",null,"Notes:"),$(" Notes created with File > New are saved to your Storage/Notes folder.")],-1))]),a("div",rn,[i(n(p),{icon:n(ce),class:"w-3.5 h-3.5 mt-0.5 text-blue-500 flex-shrink-0"},null,8,["icon"]),e[38]||(e[38]=a("p",null,[a("strong",null,"Drop Zone:"),$(" Files opened from Drop Zone are saved back to their original location (encrypted).")],-1))]),a("div",un,[i(n(p),{icon:n(ue),class:"w-3.5 h-3.5 mt-0.5 text-purple-500 flex-shrink-0"},null,8,["icon"]),e[39]||(e[39]=a("p",null,[a("strong",null,"App Drive:"),$(" Files opened from App Drive are saved back to the container's storage.")],-1))])]),e[41]||(e[41]=a("p",{class:"opacity-70"},"The colored icon on each tab indicates where that file will be saved.",-1))],2)])]),_:1},8,["icon","message","info"]),i(K,{visible:N.value,"onUpdate:visible":e[7]||(e[7]=o=>N.value=o),title:"Open Note","ok-text":"Open","cancel-text":"Cancel","ok-disabled":!I.value,onOk:Se,onCancel:e[8]||(e[8]=o=>N.value=!1)},{default:d(()=>[a("div",dn,[a("div",{class:r(["flex items-center gap-2 pb-2 border-b",n(l).utilityToolbarBorder])},[i(n(p),{icon:n(ee),class:r(["w-4 h-4",n(l).windowText,"opacity-60"])},null,8,["icon","class"]),a("span",{class:r(["text-xs",n(l).windowText,"opacity-60"])},[...e[42]||(e[42]=[$("Location: ",-1),a("strong",null,"Storage/Notes",-1)])],2)],2),a("div",cn,[ne.value?(T(),F("div",pn,[i(n(p),{icon:n(Ft),class:r(["w-6 h-6 animate-spin mx-auto",n(l).windowText])},null,8,["icon","class"])])):z.value.length===0?(T(),F("div",{key:1,class:r(["text-center py-4 text-sm opacity-50",n(l).windowText])},"No saved notes found",2)):(T(!0),F(Ee,{key:2},He(z.value,o=>(T(),F("div",{key:o.filename,onClick:s=>I.value=o.filename,onDblclick:s=>{I.value=o.filename,Se()},class:r(["flex items-center gap-3 p-2 rounded cursor-pointer transition-colors",I.value===o.filename?"bg-blue-500/20":"hover:bg-black/5 dark:hover:bg-white/5"])},[i(n(p),{icon:n(ve),class:r(["w-5 h-5 flex-shrink-0",n(l).windowText,"opacity-60"])},null,8,["icon","class"]),a("div",fn,[a("div",{class:r(["font-medium text-sm truncate",n(l).windowText])},X(o.title),3),a("div",{class:r(["text-xs opacity-50",n(l).windowText])},X(dt(o.modified)),3)])],42,vn))),128))])])]),_:1},8,["visible","ok-disabled"]),i(K,{visible:B.value,"onUpdate:visible":e[10]||(e[10]=o=>B.value=o),title:"Save Note As","ok-text":"Save","cancel-text":"Cancel",onOk:Ce,onCancel:e[11]||(e[11]=o=>B.value=!1)},{default:d(()=>[a("div",mn,[Y(a("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>V.value=o),type:"text",placeholder:"Note title...",class:r([[n(l).windowBg,n(l).windowText,n(l).windowBorder],"w-full px-3 py-2 text-sm rounded-lg border outline-none"]),onKeyup:Ue(Ce,["enter"])},null,34),[[G,V.value]]),a("div",wn,[i(n(p),{icon:n(de),class:r(["w-3 h-3",n(l).windowText,"opacity-40"])},null,8,["icon","class"]),a("span",{class:r(["text-[11px]",n(l).windowText,"opacity-40"])},"Saving in Storage/Notes",2)])])]),_:1},8,["visible"]),i(K,{visible:W.value,"onUpdate:visible":e[12]||(e[12]=o=>W.value=o),title:"Unsaved Changes","ok-text":"Close","cancel-text":"Cancel",onOk:tt,onCancel:nt},{default:d(()=>[a("p",{class:r(["text-sm",n(l).windowText])},[e[43]||(e[43]=$(' "',-1)),a("strong",null,X(q.value),1),e[44]||(e[44]=$('" has unsaved changes. Are you sure you want to close it? ',-1))],2)]),_:1},8,["visible"]),i(K,{visible:H.value,"onUpdate:visible":e[13]||(e[13]=o=>H.value=o),title:"Encoding Warning","ok-text":"Save Anyway","cancel-text":"Cancel",onOk:Ge,onCancel:et},{default:d(()=>[a("div",{class:r(["text-sm space-y-2",n(l).windowText])},[...e[45]||(e[45]=[a("p",null,[$("This file contains characters that may indicate a "),a("strong",null,"non-UTF-8 encoding"),$(" or binary content.")],-1),a("p",{class:"opacity-70"},"Saving this file will convert it to UTF-8, which could corrupt special characters or formatting.",-1),a("p",null,"Are you sure you want to continue?",-1)])],2)]),_:1},8,["visible"]),i(K,{visible:A.value,"onUpdate:visible":e[14]||(e[14]=o=>A.value=o),title:"Unsaved Changes",content:Pe.value,"ok-text":"Save All","cancel-text":"Cancel","dismiss-text":"Don't Save",type:"warning","mask-closable":!1,onOk:vt,onCancel:e[15]||(e[15]=o=>A.value=!1),onDismiss:mt},null,8,["visible","content"])]))}}),Xn=Ct(gn,[["__scopeId","data-v-89bf98b7"]]);export{Xn as default};
