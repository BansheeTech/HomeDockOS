import{I as h}from"./hdos_DrBNmRuLfukPvo8fUCfT8.js";import{e as u}from"./hdos_asf1A1hq5P3qtEqzLGgW_.js";import{a as m}from"./hdos_ZuyTpYrcYivltUvmUJTsw.js";import{j as g}from"./hdos_B4Z-9bD8qGNCU0AV0VHmA.js";var S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};function d(e){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.forEach(function(n){O(e,n,t[n])})}return e}function O(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var p=function(s,t){var r=d({},s,t.attrs);return u(h,d({},r,{icon:S}),null)};p.displayName="RightOutlined";p.inheritAttrs=!1;const R=g("selectedApps",{state:()=>({selectedApps:[],applications:[],desiredStates:{},errorStates:{}}),actions:{setApplications(e){const s=this.applications;this.applications=e.map(t=>{const r=s.find(c=>c.name===t.name);if(!r)return{...t,isProcessing:!1,checked:this.selectedApps.includes(t.name)};let n=r.isProcessing;const i=this.desiredStates[t.name];return i&&t.status===i&&(n=!1,delete this.desiredStates[t.name]),r.status!==t.status&&(n=!1),{...t,isProcessing:n,checked:this.selectedApps.includes(t.name)}})},setDesiredState(e,s){this.desiredStates[e]=s},clearDesiredState(e){delete this.desiredStates[e]},getDesiredState(e){return this.desiredStates[e]},setErrorState(e,s){this.errorStates[e]=s},clearErrorState(e){delete this.errorStates[e]},saveOrder(){const e="dashboardLocalOrder",s=this.applications.filter(t=>t.HDRole!=="dependency").map(t=>t.name);localStorage.setItem(e,JSON.stringify(s))},updateSelection(e){this.selectedApps=e,this.applications.forEach(s=>{s.checked=e.includes(s.name)})},clearSelection(){this.selectedApps=[],this.applications.forEach(e=>{e.checked=!1})},toggleSelection(e){const s=this.applications.find(t=>t.name===e);s&&(s.checked=!s.checked,s.checked?this.selectedApps.push(s.name):this.selectedApps=this.selectedApps.filter(t=>t!==e))},setProcessing(e,s){const t=this.applications.find(r=>r.name===e);t&&(t.isProcessing=s)}}});let o=null;async function A(e){const s=R();try{const t=await m.get("/api/containers",{headers:{"X-HomeDock-CSRF-Token":e}});if(t.status===200){const r=t.data,n=b(r);return s.setApplications(n),n}return[]}catch(t){throw console.error("Error fetching containers:",t),t}}function b(e){const t=localStorage.getItem("dashboardLocalOrder");if(!t)return e;const r=JSON.parse(t),n=e.filter(a=>a.HDRole!=="dependency"),i=e.filter(a=>a.HDRole==="dependency"),l=r.map(a=>n.find(f=>f.name===a)).filter(Boolean),c=n.filter(a=>!r.includes(a.name));return[...l,...c,...i]}function k(e,s=3e3){v(),o=setInterval(()=>A(e),s)}function v(){o&&(clearInterval(o),o=null)}export{p as R,v as a,A as f,k as s,R as u};
