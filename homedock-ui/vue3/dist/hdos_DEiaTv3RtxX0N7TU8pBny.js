import{b as ye,a as Q}from"./hdos_DahYSjy4MuyfOawe4NtU9.js";import{d as _e,u as Ie,a as ke,b as Se,c as Te,g as Be,U as Ce,e as De,f as Fe,h as Ue,i as Y,j as ee,k as He,l as $e,m as ze,n as Me,o as Ge,p as te,q as Ae}from"./hdos_DMBX8EgZFkFEssZyeFxZ3.js";import{M as Re,bQ as je,aU as b,q as r,bE as M,aD as Ve,aI as Ee,u as y,aL as w,v as t,I as c,au as o,bk as e,bU as d,t as se,bb as l,aw as S,H as D,F as oe,aX as ae,s as Ne,bJ as Oe}from"./hdos_BnIymrgN3FMaW96NhsgWi.js";import{_ as Pe}from"./hdos_BcWAxXmlibZ2SSqtP9a_8.js";import{d as G}from"./hdos_BwFNaVKxrzJr1i43ZL7xh.js";import{b as Le}from"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_B3Gn8FiDAIlVGTwMyO36P.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CtY2UTrCU7CborQ9sr8jv.js";import"./hdos_Cuccj8xUVyEDTvA_fcq1n.js";import"./hdos_TIm5gfXqLWlO6DtkdAyHA.js";import"./hdos_CDFYpsm_-2sqqpjcHcxLG.js";const We=_e("DropZoneStore",{state:()=>({files:[],totalSize:0,lastUpdate:0}),getters:{fileCount(){return this.files.length}},actions:{setFiles(f){this.files=f,this.totalSize=f.reduce((s,x)=>s+x.size,0),this.lastUpdate=Date.now()},addFile(f){const s=this.files.findIndex(x=>x.name===f.name);s>=0?this.files[s]=f:this.files.push(f),this.totalSize=this.files.reduce((x,T)=>x+T.size,0),this.lastUpdate=Date.now()},removeFile(f){this.files=this.files.filter(s=>s.name!==f),this.totalSize=this.files.reduce((s,x)=>s+x.size,0),this.lastUpdate=Date.now()},clear(){this.files=[],this.totalSize=0,this.lastUpdate=Date.now()}}}),Ze={class:"flex flex-col h-full overflow-hidden"},Xe={class:"mb-8"},qe={class:"flex items-center gap-3"},Je={class:"flex-1 min-w-0"},Ke={class:"text-right"},Qe={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},et={class:"flex items-center gap-3"},tt={class:"w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0"},st={class:"flex-1 min-w-0"},ot={class:"text-right"},at={class:"mb-8"},lt={class:"flex items-center gap-2 mb-1"},nt={class:"space-y-1"},rt={class:"flex items-center justify-between text-xs"},it={class:"space-y-1"},ct={class:"flex items-center justify-between text-xs"},dt={class:"flex items-center gap-2 mb-1"},ut={class:"grid grid-cols-2 gap-3"},pt={class:"flex items-center gap-1.5"},ft={class:"flex items-center gap-1.5"},xt={class:"flex items-center gap-2 mb-1"},mt={class:"grid grid-cols-2 gap-3"},vt={class:"flex items-center gap-1.5"},ht={class:"flex items-center gap-1.5"},gt={class:"flex items-center gap-1.5"},wt={class:"mb-6"},bt={class:"flex flex-col gap-1"},yt=["onClick"],_t={class:"flex-1 min-w-0"},It={class:"flex flex-col gap-1"},kt=["onClick"],St={class:"flex-1 min-w-0"},Tt={class:"space-y-2.5 max-w-sm"},Bt={class:"flex items-center gap-2"},Nt=Re({__name:"AppHome",setup(f){const{themeClasses:s}=je(),x=Ie(),T=ke(),le=We(),u=Se(),A=Te(),m=b({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),_=b({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),h=b({used:0,usedFormatted:"0 B",fileCount:0,folderCount:0}),g=b({used:0,usedFormatted:"0 B",fileCount:0,folderCount:0}),B=b(null),F=b(0),R=r(()=>F.value<600||!O.value?"grid-cols-1":"grid-cols-2"),U=r(()=>Math.round(parseFloat(u.cpuUsage)||0)),j=r(()=>u.cpuCores),V=r(()=>u.cpuGhz),ne=r(()=>(parseFloat(V.value)||0)>0?`${j.value} cores @ ${V.value} GHz`:`${j.value} cores`),H=r(()=>Math.round(parseFloat(u.ramUsage)||0)),re=r(()=>u.totalRam);r(()=>Math.round(parseFloat(u.cpuTemp)||0));const $=r(()=>Math.round(parseFloat(u.hardDiskUsage)||0)),E=r(()=>u.hardDiskTotal),ie=r(()=>u.externalDefaultDisk),C=r(()=>Math.round(parseFloat(u.externalDiskUsage)||0)),N=r(()=>u.externalDiskTotal),O=r(()=>ie.value!=="disabled"&&C.value>0);r(()=>m.value.total===0?0:Math.round(h.value.used/m.value.total*100*100)/100);const ce=r(()=>m.value.total===0?0:Math.round(g.value.used/m.value.total*100*100)/100),P=r(()=>u.downloadData),L=r(()=>u.uploadData),de=r(()=>{const a=P.value;return typeof a=="string"?a.split(" ")[0]:"0"}),ue=r(()=>{const a=P.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),pe=r(()=>{const a=L.value;return typeof a=="string"?a.split(" ")[0]:"0"}),fe=r(()=>{const a=L.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),W=r(()=>u.totalContainers),Z=r(()=>u.activeContainers),xe=r(()=>u.uptimeData),me=r(()=>u.startTime),ve=r(()=>Be()),he=r(()=>Ce);function I(a){if(a===0)return"0 B";const n=1024,i=["B","KB","MB","GB","TB"],v=Math.floor(Math.log(a)/Math.log(n));return Math.round(a/Math.pow(n,v)*100)/100+" "+i[v]}function X(){const n=(parseFloat(E.value)||0)*1073741824,i=n*$.value/100;m.value={used:i,total:n,usedFormatted:I(i),totalFormatted:I(n),percentage:$.value}}function q(){const a=parseFloat(N.value)||0,n=a*1073741824,i=n*C.value/100;_.value={used:i,total:n,usedFormatted:I(i),totalFormatted:a>900?`${(a/1024).toFixed(2)} TB`:`${a} GB`,percentage:C.value}}async function ge(){try{const a=await Q.get("/api/storage/files",{headers:{"X-HomeDock-CSRF-Token":A.value}});if(a.data.files&&Array.isArray(a.data.files)){const n=a.data.files.reduce((p,z)=>p+(z.size||0),0),i=a.data.files.filter(p=>!p.is_directory),v=a.data.files.filter(p=>p.is_directory);h.value={used:n,usedFormatted:I(n),fileCount:i.length,folderCount:v.length}}}catch(a){console.error("Failed to fetch storage info:",a)}}async function J(){try{const a=await Q.get("/api/dropzone/files",{headers:{"X-HomeDock-CSRF-Token":A.value}});if(a.data.files&&Array.isArray(a.data.files)){const n=a.data.files.reduce((p,z)=>p+(z.size||0),0),i=a.data.files.filter(p=>!p.is_directory),v=a.data.files.filter(p=>p.is_directory);g.value={used:n,usedFormatted:I(n),fileCount:i.length,folderCount:v.length}}}catch(a){console.error("Failed to fetch encrypted storage info:",a)}}function K(a){x.openSystemApp(a.id)}function we(){T.openWindow("fileexplorer",{data:{initialLocation:"storage"}})}function be(){T.openWindow("fileexplorer",{data:{initialLocation:"dropzone"}})}M([$,E],()=>{X()}),M([C,N],()=>{q()}),M(()=>le.lastUpdate,()=>{J()});let k=null;return Ve(()=>{X(),q(),ge(),J(),B.value&&(k=new ResizeObserver(a=>{for(const n of a)F.value=n.contentRect.width}),k.observe(B.value),F.value=B.value.clientWidth)}),Ee(()=>{k&&(k.disconnect(),k=null)}),(a,n)=>(w(),y("div",Ze,[t("div",{ref_key:"containerRef",ref:B,class:"flex-1 overflow-y-auto px-4 py-4"},[t("div",Xe,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[c(e(d),{icon:e(De),class:"w-4 h-4"},null,8,["icon"]),n[0]||(n[0]=t("span",null,"My Devices",-1))],2),t("div",{class:o(["grid gap-4 mb-4",R.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",qe,[t("div",{class:o(["w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0",e(s).iconHolder])},[c(e(d),{icon:e(G),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",Je,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"Cloud Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"System disk",2)]),t("div",Ke,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},l(m.value.percentage)+"%",3)])]),t("div",{class:o(["relative w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"absolute inset-0 h-full bg-blue-500 transition-all duration-150",style:S({width:m.value.percentage+"%"})},null,4),t("div",{class:"absolute inset-0 h-full bg-green-500 transition-all duration-150",style:S({width:ce.value+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,l(m.value.usedFormatted)+" used",1),t("span",null,l(m.value.totalFormatted)+" total",1)],2),t("div",{onClick:we,class:o(["flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all hover:bg-opacity-50",[e(s).windowBorder]]),style:{"margin-top":"-0.25rem"}},[t("div",Qe,[c(e(d),{icon:e(Fe),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-xs font-medium",e(s).statInnerText])},"Storage: "+l(h.value.usedFormatted),3)]),t("span",{class:o(["text-xs",e(s).statSubtleText])},l(h.value.fileCount)+" "+l(h.value.fileCount===1?"file":"files")+" • "+l(h.value.folderCount)+" "+l(h.value.folderCount===1?"folder":"folders"),3)],2),t("div",{onClick:be,class:o(["flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all hover:bg-opacity-50",[e(s).windowBorder]]),style:{"margin-top":"-0.5rem"}},[t("div",Ye,[c(e(d),{icon:e(ye),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-xs font-medium",e(s).statInnerText])},"Encrypted: "+l(g.value.usedFormatted),3)]),t("span",{class:o(["text-xs",e(s).statSubtleText])},l(g.value.fileCount)+" "+l(g.value.fileCount===1?"file":"files")+" • "+l(g.value.folderCount)+" "+l(g.value.folderCount===1?"folder":"folders"),3)],2)],2),O.value?(w(),y("div",{key:0,class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",et,[t("div",tt,[c(e(d),{icon:e(Ue),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",st,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"External Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"External disk",2)]),t("div",ot,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},l(_.value.percentage)+"%",3)])]),t("div",{class:o(["w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-green-500 transition-all duration-150",style:S({width:_.value.percentage+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,l(_.value.usedFormatted)+" used",1),t("span",null,l(_.value.totalFormatted)+" total",1)],2)],2)):se("",!0)],2)]),t("div",at,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[c(e(d),{icon:e(Y),class:"w-4 h-4"},null,8,["icon"]),n[1]||(n[1]=t("span",null,"System Overview",-1))],2),t("div",{class:o(["grid gap-4",R.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",lt,[c(e(d),{icon:e(Le),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Performance",2)]),t("div",nt,[t("div",rt,[t("span",{class:o(e(s).statSubtleText)},"CPU",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},l(U.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-blue-500 transition-all duration-150",style:S({width:U.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},l(ne.value),3)]),t("div",it,[t("div",ct,[t("span",{class:o(e(s).statSubtleText)},"Memory",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},l(H.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-purple-500 transition-all duration-150",style:S({width:H.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},l(re.value)+" GB total",3)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",dt,[c(e(d),{icon:e(ee),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Network",2)]),t("div",ut,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",pt,[c(e(d),{icon:e(ee),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Download",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[D(l(de.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},l(ue.value),3)],2)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",ft,[c(e(d),{icon:e(He),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Upload",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[D(l(pe.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},l(fe.value),3)],2)],2)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border transition-all duration-150",[e(s).windowBorder,e(s).statHolder]])},[t("div",xt,[c(e(d),{icon:e(Y),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"System Health",2)]),t("div",mt,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",vt,[c(e(d),{icon:e($e),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"System",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},l(xe.value),3)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",ht,[c(e(d),{icon:e(ze),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"HomeDock OS",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},l(me.value),3)],2)]),t("div",{class:o(["flex items-center justify-between p-2 rounded-lg border",e(s).windowBorder])},[t("div",gt,[c(e(d),{icon:e(Me),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Installed Applications",2)]),t("span",{class:o(["text-xs font-bold",e(s).statInnerText])},l(Z.value)+" / "+l(W.value),3)],2)],2)],2)]),t("div",wt,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-2",e(s).explorerGroupHeader])},[c(e(d),{icon:e(Ge),class:"w-4 h-4"},null,8,["icon"]),n[2]||(n[2]=t("span",null,"System Applications",-1))],2),t("div",bt,[(w(!0),y(oe,null,ae(ve.value,i=>(w(),y("div",{key:i.id,onClick:v=>i.id!=="apphome"&&K(i),class:o(["group flex items-center gap-3 px-2.5 py-2 rounded-lg transition-all duration-150",[e(s).explorerResultItem,i.id!=="apphome"?[e(s).explorerResultItemHover,"cursor-pointer"]:"opacity-50"]])},[t("div",{class:o(["flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-lg",e(s).iconHolder])},[c(e(d),{icon:i.icon,class:o(["w-5 h-5",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",_t,[t("div",{class:o(["text-xs font-medium truncate",e(s).explorerItemName])},l(i.name),3)]),i.id!=="apphome"?(w(),Ne(e(d),{key:0,icon:e(te),class:o(["w-4 h-4 opacity-40 group-hover:opacity-70 transition-opacity",e(s).explorerItemIcon])},null,8,["icon","class"])):se("",!0)],10,yt))),128))])]),t("div",null,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-2",e(s).explorerGroupHeader])},[c(e(d),{icon:e(Ae),class:"w-4 h-4"},null,8,["icon"]),n[3]||(n[3]=t("span",null,"Utilities",-1))],2),t("div",It,[(w(!0),y(oe,null,ae(he.value,i=>(w(),y("div",{key:i.id,onClick:v=>K(i),class:o(["group flex items-center gap-3 px-2.5 py-2 rounded-lg cursor-pointer transition-all duration-150",[e(s).explorerResultItem,e(s).explorerResultItemHover]])},[t("div",{class:o(["flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-lg",e(s).iconHolder])},[c(e(d),{icon:i.icon,class:o(["w-5 h-5",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",St,[t("div",{class:o(["text-xs font-medium truncate",e(s).explorerItemName])},l(i.name),3)]),c(e(d),{icon:e(te),class:o(["w-4 h-4 opacity-40 group-hover:opacity-70 transition-opacity",e(s).explorerItemIcon])},null,8,["icon","class"])],10,kt))),128))])])],512),c(Pe,{icon:e(G),message:"My Home",info:`CPU ${U.value}% • RAM ${H.value}% • ${Z.value}/${W.value} apps`,showHelp:!0},{help:Oe(()=>[t("div",Tt,[t("div",Bt,[c(e(d),{icon:e(G),class:o(["w-5 h-5",e(s).statusBarIcon])},null,8,["icon","class"]),t("h4",{class:o(["text-base font-semibold",e(s).statusBarText])},"My Home",2)]),t("div",{class:o(["text-[10px] md:text-xs space-y-2 leading-relaxed",e(s).statusBarInfo])},[...n[4]||(n[4]=[t("p",null,"My Home is your central hub for accessing system information and applications. Monitor storage, performance, network activity, and system health at a glance.",-1),t("p",null,[t("strong",null,"Storage:"),D(" Cloud Storage shows total disk usage (blue bar) with encrypted data overlay (green bar). Click encrypted info to access Drop Zone.")],-1),t("p",null,[t("strong",null,"System Overview:"),D(" Real-time performance metrics, network statistics, and system health indicators help you keep track of your HomeDock OS.")],-1)])],2)])]),_:1},8,["icon","info"])]))}});export{Nt as default};
