import{M as I,bQ as A,q as u,aU as m,bE as N,aD as T,aI as L,u as D,aL as B,v as e,I as r,bL as R,bV as S,au as n,bk as a,bb as b,bA as U,bJ as f,bU as _,bR as V}from"./hdos_BnIymrgN3FMaW96NhsgWi.js";import{d as $,a as z}from"./hdos_DahYSjy4MuyfOawe4NtU9.js";import{u as E,c as M,ar as w}from"./hdos_DMBX8EgZFkFEssZyeFxZ3.js";import{_ as j}from"./hdos_BcWAxXmlibZ2SSqtP9a_8.js";import F from"./hdos_BbiHbNrHgOgOn62cDyKWg.js";import"./hdos_BwFNaVKxrzJr1i43ZL7xh.js";import"./hdos_B3Gn8FiDAIlVGTwMyO36P.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_CtY2UTrCU7CborQ9sr8jv.js";import"./hdos_Cuccj8xUVyEDTvA_fcq1n.js";import"./hdos_TIm5gfXqLWlO6DtkdAyHA.js";import"./hdos_CDFYpsm_-2sqqpjcHcxLG.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";import"./hdos_rfaQpGnOmO949nI3XBr-z.js";import"./hdos_CUVtAAKH5Rvh1aKqeC6HP.js";const H={class:"app-logs flex flex-col h-full overflow-hidden"},q={class:"flex-1 overflow-hidden p-4 flex flex-col"},J={class:"app-details flex items-center space-x-4 mb-4"},P={class:"flex flex-col justify-center"},Q={class:"mt-3 flex items-center gap-2"},X={class:"switch-icon"},G={class:"space-y-2.5 max-w-sm"},K={class:"flex items-center gap-2"},O="docker-icons/notfound.jpg",W=I({__name:"AppLogs",props:{appName:{},data:{}},setup(k){const h=k,{themeClasses:t}=A(),v=E(),p=u(()=>h.appName||h.data?.appName||"Unknown"),x=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.display_name||p.value),i=m(""),c=m(!1),l=m(null),y=M(),C=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.image_path||O),g=async()=>{try{const o=await z.get("/api/view-container-logs",{headers:{"X-HomeDock-CSRF-Token":y.value},params:{containerName:p.value}});o.data?.logs&&o.data.logs.trim()!==""?i.value=o.data.logs:i.value="No logs found for this application."}catch{i.value="Failed to fetch logs for this application."}};return N(c,o=>{o?l.value=setInterval(()=>{g()},3e3):l.value&&(clearInterval(l.value),l.value=null)}),T(()=>{g()}),L(()=>{l.value&&clearInterval(l.value)}),(o,s)=>(B(),D("div",H,[e("div",q,[e("div",J,[r(S,{draggable:"false",src:C.value,alt:"App Icon",class:"app-icon w-12 h-12 min-w-12 min-h-12 rounded-xl drop-shadow-md ring-[1px] ring-gray-500/10"},null,8,["src"]),e("div",P,[e("p",{class:n([[a(t).hubCardTextAppName],"app-name font-bold text-sm"])},b(x.value)+" logs",3),e("p",{class:n([[a(t).hubCardTextRepo],"app-docker-image text-xs"])},"Real-time container logs",2)])]),e("hr",{class:n([[a(t).hubSeparator],"border-0 h-px mb-4"])},null,2),R(e("textarea",{class:n([[a(t).hubTextArea],"flex-1 rounded-lg w-full font-mono text-xs resize-none p-3"]),"onUpdate:modelValue":s[0]||(s[0]=d=>i.value=d),readonly:"",placeholder:"Loading logs..."},null,2),[[U,i.value]]),e("div",Q,[r(a(F),{checked:c.value,"onUpdate:checked":s[1]||(s[1]=d=>c.value=d),size:"small"},{checkedChildren:f(()=>[e("span",X,[r(a(_),{icon:a($),class:"animate-spin"},null,8,["icon"])])]),unCheckedChildren:f(()=>[...s[2]||(s[2]=[e("span",{class:"switch-text"},"Auto",-1)])]),_:1},8,["checked"]),e("span",{class:n([[a(t).hubCardTextRepo],"text-xs"])},b(c.value?"Auto-refreshing every 3s":"Auto-refresh disabled"),3)])]),r(j,{icon:a(w),message:"Logs",info:`Viewing ${x.value}`,showHelp:!0},{help:f(()=>[e("div",G,[e("div",K,[r(a(_),{icon:a(w),class:n(["w-5 h-5",a(t).statusBarIcon])},null,8,["icon","class"]),e("h4",{class:n(["text-base font-semibold",a(t).statusBarText])},"Logs",2)]),e("div",{class:n(["text-[10px] md:text-xs space-y-2 leading-relaxed",a(t).statusBarInfo])},[...s[3]||(s[3]=[e("p",null,"View real-time logs from your applications to monitor activity and troubleshoot issues. Enable auto-refresh to automatically update the logs every 3 seconds, ensuring you always see the latest output without manual intervention. Perfect for debugging and monitoring container behavior in real-time.",-1)])],2)])]),_:1},8,["icon","info"])]))}}),ve=V(W,[["__scopeId","data-v-9e707735"]]);export{ve as default};
