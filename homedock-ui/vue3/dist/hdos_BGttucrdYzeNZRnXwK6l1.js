import{d as j,u as F,r as m,o as P,L as D,c as b,a as i,b as l,e as n,T as M,i as A,h as I,m as k,f as e,I as y,P as X,n as u,g as T,z as U,p as N,_ as W,t as L,y as Y,F as Z,A as J,k as G,l as K,N as Q,q as ee,s as te}from"./hdos_BCGA2aKaNlxFO0qejt16w.js";import{d as R,a as se}from"./hdos_C8xfccjiB6DoCk5KlfHGx.js";import{S as ae}from"./hdos_BmHBrcoirFy1U923GIRSO.js";import{d as ne}from"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import{d as oe}from"./hdos_Cz8Dwn1iOWea_GVqOHEOb.js";import{d as le}from"./hdos_BW-i5UGMkVNRYrcW_CmuW.js";import{d as re}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{A as ie}from"./hdos_CPIfccgjhhHmujbU_n6GX.js";const V={width:24,height:24,body:'<path fill="currentColor" d="M2 5.27L3.28 4L20 20.72L18.73 22l-4.83-4.83l-2.61 2.61a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l2.62-2.6l-1.62-1.61c-.01.24-.11.49-.29.68c-.39.39-1.03.39-1.42 0A4.973 4.973 0 0 1 7.72 11L2 5.27m10.71-1.05a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.33 3.33l-1.41-1.42l3.33-3.33m.7 4.95c.39-.39 1.03-.39 1.42 0a4.999 4.999 0 0 1 1.23 5.06l-1.78-1.77c-.05-.68-.34-1.35-.87-1.87a.973.973 0 0 1 0-1.42Z"/>'},ce={class:"fixed inset-0 flex items-center justify-center z-50"},ue={class:"relative flex items-center justify-center w-56 h-56"},de={class:"flex items-center justify-center backdrop-blur-xl rounded-full w-40 h-40 p-10 relative z-[40] bg-slate-500/5"},me=100,pe=j({__name:"OrbitLoader",props:{isChecking:Boolean,isSuccess:Boolean,isError:Boolean,isHttps:Boolean},setup(t){const{themeClasses:a}=F(),d=m(null);let c;const p=m(0),x=m(0);let v=0,w=0,g;const C=()=>{v=Math.random()*40-20,w=Math.random()*40-20},h=()=>{p.value+=(v-p.value)*.1,x.value+=(w-x.value)*.1,requestAnimationFrame(h)},f=[],S=(s,r,_)=>{for(let o=0;o<me;o++)f.push({angle:Math.random()*2*Math.PI,radius:80+Math.random()*20,speed:.005+Math.random()*.03,size:.5+Math.random()*2})},$=(s,r,_)=>{s.clearRect(0,0,s.canvas.width,s.canvas.height),f.forEach(o=>{const E=r+Math.cos(o.angle)*o.radius,O=_+Math.sin(o.angle)*o.radius;s.beginPath(),s.arc(E,O,o.size,0,2*Math.PI),s.fillStyle="rgba(148, 163, 184, 0.7)",s.fill(),o.angle+=o.speed}),c=requestAnimationFrame(()=>$(s,r,_))};return P(()=>{const s=d.value,r=s.getContext("2d");s.width=256,s.height=256;const _=s.width/2,o=s.height/2;S(),$(r,_,o)}),D(()=>{cancelAnimationFrame(c)}),P(()=>{g=setInterval(C,500),h()}),D(()=>{clearInterval(g)}),(s,r)=>(i(),b("div",ce,[l("div",ue,[l("canvas",{ref_key:"canvas",ref:d,class:"absolute inset-0 w-full h-full pointer-events-none z-50"},null,512),l("div",de,[n(M,{name:"fade-scale",mode:"out-in"},{default:A(()=>[t.isChecking?(i(),I(e(y),{icon:e(ne),class:u([[e(a).appLoadingIcon],"text-6xl"]),style:X({transform:`translate(${p.value}px, ${x.value}px)`}),key:"loading"},null,8,["icon","class","style"])):t.isSuccess?(i(),I(e(y),{icon:e(oe),class:u([[e(a).appLoadingIcon],"text-6xl"]),key:"success"},null,8,["icon","class"])):t.isError?(i(),I(ie,{icons:[e(le),e(V)],interval:1500,class:u([e(a).appLoadingIcon]),"icon-size":60,key:"error"},null,8,["icons","class"])):k("",!0)]),_:1}),n(M,{name:"https",mode:"out-in"},{default:A(()=>[t.isHttps?(i(),b("div",{class:u([[e(a).sslAdvisorBack],"px-4 py-1 absolute mt-52 rounded-full flex items-center"]),key:"https"},[n(e(y),{icon:e(re),class:u([[e(a).sslAdvsisorIcon],"text-sm mr-1"])},null,8,["icon","class"]),l("span",{class:u([[e(a).sslAdvsisorIcon],"text-sm ml>1"])},"HTTPS",2),n(e(y),{icon:e(R),class:u([[e(a).sslAdvsisorIcon],"text-sm animate-spin ml-1"])},null,8,["icon","class"])],2)):k("",!0)]),_:1})])])]))}}),he=T(pe,[["__scopeId","data-v-8c9d9177"]]),fe={width:24,height:24,body:'<path fill="currentColor" d="M13 19h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-7v2M4 3h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m5 4h1V5H9v2m0 8h1v-2H9v2M5 5v2h2V5H5m0 8v2h2v-2H5Z"/>'},ve={class:"fixed bottom-14 left-0 right-0 flex justify-center text-xs z-50"},ge={key:0,class:"p-2 bg-white rounded-xl shadow-lg flex items-center justify-center animate-bounce"},_e={class:"flex items-center space-x-2"},xe={class:"font-semibold"},ye={class:"flex items-center space-x-2"},be={key:0,class:"flex items-center space-x-1"},ke={class:"font-semibold"},we=j({__name:"StatusFooter",props:{isSuccess:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isHttps:{type:Boolean,default:!1},statusMessage:{type:String,default:"Initializing..."},port:{type:String,default:""}},setup(t){const{themeClasses:a}=F(),d=t,c=U(()=>d.isSuccess?"bg-green-600":d.isError?"bg-red-600":"bg-blue-600 animate-pulse");return(p,x)=>(i(),b(N,null,[n(M,{name:"logo-fade-slide",appear:""},{default:A(()=>[l("div",ve,[n(M,{name:"fade-bounce",appear:""},{default:A(()=>[t.isError?k("",!0):(i(),b("div",ge,[n(W,{draggable:"false",class:"w-9 h-9",src:"/images/logo_trans.svg"})]))]),_:1})])]),_:1}),l("div",{class:u([[e(a).statusBarAppScope],"fixed bottom-0 left-0 right-0 backdrop-blur-md h-8 flex items-center justify-between px-4 text-xs border-t z-50"])},[l("div",_e,[l("div",{class:u(["min-h-1.5 min-w-1.5 rounded-full",c.value])},null,2),l("span",xe,L(t.statusMessage),1)]),l("div",ye,[t.port?(i(),b("div",be,[n(e(y),{icon:e(fe),class:"text-xs min-h-3 min-w-3"},null,8,["icon"]),l("span",ke,"Port: "+L(t.port),1)])):k("",!0)])],2)],64))}}),Se=T(we,[["__scopeId","data-v-c5a4cd07"]]),$e={class:"flex items-center justify-center text-white"},B=5,Ie=j({__name:"App",setup(t){var s;const{themeClasses:a}=F(),d=m(((s=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:s.getAttribute("content"))||""),c=Y("data-port");if(!c)throw new Error("Settings data is missing!");const{selectedPort:p,selectedPath:x}=c,v=m(!0),w=m(!1),g=m(!1),C=m(!1),h=m(null),f=m("Initializing...");let S=0;const $=async()=>{if(!p){v.value=!1,g.value=!0,h.value="Not valid port specified",f.value="Invalid app port";return}f.value="Checking app availability...";try{const r=await se.post("/api/check-port",{port:p},{headers:{"X-HomeDock-CSRF-Token":d.value}});if(r.data.available){const _=r.data.url.toLowerCase();C.value=_.startsWith("https://"),v.value=!1,w.value=!0,h.value=null,f.value="Connection established",setTimeout(()=>{const o=r.data.url+(x?`/${x}`:""),E=window.open(o,"_self");E&&(E.opener=null)},1500);return}else throw new Error("Service not available.")}catch{S++,h.value=`Retrying ${S}/${B}`,f.value=`Retying ${S}/${B}`,S<B?setTimeout($,3e3):(v.value=!1,g.value=!0,h.value=`App not available on ${p}`,f.value="Application unavailable")}};return P(()=>{$()}),(r,_)=>(i(),b(N,null,[n(Z),n(J),n(G),n(K),n(Q),n(ae,{numLines:12,"line-width":3,amplitude:600,"points-per-line":2}),l("div",{class:u([[e(a).back],"flex items-center justify-center relative p-3 overflow-hidden"])},[l("div",$e,[n(he,{isChecking:v.value,isSuccess:w.value,isError:g.value,isHttps:C.value},null,8,["isChecking","isSuccess","isError","isHttps"]),n(M,{name:"fade-slide",mode:"out-in"},{default:A(()=>[h.value?(i(),b("p",{key:0,class:u([[e(a).appErrorMessage],"flex items-center text-xs mt-4 text-center px-3 py-1 rounded-full z-10"])},[v.value?(i(),I(e(y),{key:0,icon:e(R),class:"text-xs mr-1 animate-spin"},null,8,["icon"])):k("",!0),g.value?(i(),I(e(y),{key:1,icon:e(V),class:"text-xs mr-1"},null,8,["icon"])):k("",!0),l("span",null,L(h.value),1)],2)):k("",!0)]),_:1})])],2),n(Se,{isSuccess:w.value,isError:g.value,statusMessage:f.value,port:String(e(p))},null,8,["isSuccess","isError","statusMessage","port"])],64))}}),Me=T(Ie,[["__scopeId","data-v-39d90c0d"]]);function q(t){var d;const a=(d=document.getElementById(t))==null?void 0:d.textContent;if(a)try{const c=atob(a);return JSON.parse(c)}catch(c){console.error(`Error parsing data from element #${t}:`,c)}else console.error(`Element with ID '${t}' not found or is empty.`);return null}const H=q("data-theme"),z=q("data-port");if(H&&z)try{const t=ee(Me);t.provide("data-theme",{selectedTheme:H.selected_theme,selectedBack:H.selected_back}),t.provide("data-port",{selectedPort:z.selected_port,selectedPath:z.selected_path});const a=te();t.use(a),t.mount("#app-app-root")}catch(t){console.error("Error initializing the Vue app:",t)}else console.error("Required data (data-theme or data-initial) is missing or invalid.");
