import{j as I,B as A,d as u,r as m,w as N,v as T,x as B,y as D,A as L,z as e,F as r,I as S,X as R,H as n,u as a,G as _,W as V,D as f,M as w,_ as j}from"./hdos_6c83BLatckOj0tZu21IHA.js";import{d as z,a as U}from"./hdos_DaRSEFpqf81ZuDgc4Rzsj.js";import{k as $,g as F,j as k}from"./hdos_D6BEoqZ1mDNmRWeMzY_yh.js";import{_ as H}from"./hdos_DRbIdIhy-OvLgw7me6Ygf.js";import{S as M}from"./hdos_O5rb-3Nc9qg7FTkccZVty.js";import"./hdos_Bsxh6ryxTjz-q3-Ls2Gll.js";import"./hdos_C-JSx2TVkNNsG7uRI1gaW.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_DiG9ZRJZdYVCPqbvm0N5C.js";import"./hdos_DgoKWIBRIkq6Y25wtD38y.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";import"./hdos_XwLzsoSoW9xoqR08WIZOb.js";import"./hdos_D72Qrta0XyebiTG0CVecd.js";const E={class:"app-logs flex flex-col h-full overflow-hidden"},X={class:"flex-1 overflow-hidden p-5 flex flex-col"},G={class:"app-details flex items-center space-x-4 mb-4"},P={class:"flex flex-col justify-center"},W={class:"mt-3 flex items-center gap-2"},q={class:"switch-icon"},J={class:"space-y-2.5 max-w-sm"},K={class:"flex items-center gap-2"},O="docker-icons/notfound.jpg",Q=I({__name:"AppLogs",props:{appName:{},data:{}},setup(b){const h=b,{themeClasses:t}=A(),v=$(),p=u(()=>h.appName||h.data?.appName||"Unknown"),x=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.display_name||p.value),i=m(""),c=m(!1),l=m(null),y=F(),C=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.image_path||O),g=async()=>{try{const o=await U.get("/api/view-container-logs",{headers:{"X-HomeDock-CSRF-Token":y.value},params:{containerName:p.value}});o.data?.logs&&o.data.logs.trim()!==""?i.value=o.data.logs:i.value="No logs found for this application."}catch{i.value="Failed to fetch logs for this application."}};return N(c,o=>{o?l.value=setInterval(()=>{g()},3e3):l.value&&(clearInterval(l.value),l.value=null)}),T(()=>{g()}),B(()=>{l.value&&clearInterval(l.value)}),(o,s)=>(L(),D("div",E,[e("div",X,[e("div",G,[r(R,{draggable:"false",src:C.value,alt:"App Icon",class:"app-icon w-12 h-12 min-w-12 min-h-12 rounded-xl drop-shadow-md ring-[1px] ring-gray-500/10"},null,8,["src"]),e("div",P,[e("p",{class:n([[a(t).hubCardTextAppName],"app-name font-bold text-sm"])},_(x.value)+" logs",3),e("p",{class:n([[a(t).hubCardTextRepo],"app-docker-image text-xs"])},"Real-time container logs",2)])]),e("hr",{class:n([[a(t).hubSeparator],"border-0 h-px mb-4"])},null,2),S(e("textarea",{class:n([[a(t).hubTextArea],"flex-1 rounded-lg w-full font-mono text-xs resize-none p-3"]),"onUpdate:modelValue":s[0]||(s[0]=d=>i.value=d),readonly:"",placeholder:"Loading logs..."},null,2),[[V,i.value]]),e("div",W,[r(a(M),{checked:c.value,"onUpdate:checked":s[1]||(s[1]=d=>c.value=d),size:"small"},{checkedChildren:f(()=>[e("span",q,[r(a(w),{icon:a(z),class:"animate-spin"},null,8,["icon"])])]),unCheckedChildren:f(()=>[...s[2]||(s[2]=[e("span",{class:"switch-text"},"Auto",-1)])]),_:1},8,["checked"]),e("span",{class:n([[a(t).hubCardTextRepo],"text-xs"])},_(c.value?"Auto-refreshing every 3s":"Auto-refresh disabled"),3)])]),r(H,{icon:a(k),message:"Logs",info:`Viewing ${x.value}`,showHelp:!0},{help:f(()=>[e("div",J,[e("div",K,[r(a(w),{icon:a(k),class:n(["w-5 h-5",a(t).statusBarIcon])},null,8,["icon","class"]),e("h4",{class:n(["text-base font-semibold",a(t).statusBarText])},"Logs",2)]),e("div",{class:n(["text-[10px] md:text-xs space-y-2 leading-relaxed",a(t).statusBarInfo])},[...s[3]||(s[3]=[e("p",null,"View real-time logs from your applications to monitor activity and troubleshoot issues. Enable auto-refresh to automatically update the logs every 3 seconds, ensuring you always see the latest output without manual intervention. Perfect for debugging and monitoring container behavior in real-time.",-1)])],2)])]),_:1},8,["icon","info"])]))}}),he=j(Q,[["__scopeId","data-v-4f5b676a"]]);export{he as default};
