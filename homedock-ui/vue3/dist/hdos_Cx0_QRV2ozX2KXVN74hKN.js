import{j as I,q as A,d as u,r as m,w as N,B as T,C as B,v as L,z as S,y as e,G as r,I as D,X as R,x as n,u as a,H as _,W as V,E as f,M as w,_ as z}from"./hdos_BpKZQtTEMhHASODHdgxqV.js";import{d as U,a as $}from"./hdos_BbS_vWe5DNlDDYAPlKxdN.js";import{i as j,g as E,a5 as k}from"./hdos_BD58ffnhRAHAqEUb9oEcP.js";import{_ as H}from"./hdos_Bd2w4hevB8zXu0HTTX0bz.js";import{S as M}from"./hdos_DoDSEsMGKUmzdQJI1w1zc.js";import"./hdos_BCYltYuYfJ0qALYCyebpR.js";import"./hdos_DtACOgHv1KwvRw3SB9v5H.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_B8pxkH9czGc60UNaIyaV6.js";import"./hdos_785gu03H94I2ew1jsneR9.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";import"./hdos_BHxBpIni23rYUTMznIDgx.js";import"./hdos_UYVfmeWtGELP5mLoxaJ78.js";const F={class:"app-logs flex flex-col h-full overflow-hidden"},X={class:"flex-1 overflow-hidden p-4 flex flex-col"},q={class:"app-details flex items-center space-x-4 mb-4"},G={class:"flex flex-col justify-center"},P={class:"mt-3 flex items-center gap-2"},W={class:"switch-icon"},J={class:"space-y-2.5 max-w-sm"},K={class:"flex items-center gap-2"},O="docker-icons/notfound.jpg",Q=I({__name:"AppLogs",props:{appName:{},data:{}},setup(b){const h=b,{themeClasses:t}=A(),v=j(),p=u(()=>h.appName||h.data?.appName||"Unknown"),x=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.display_name||p.value),i=m(""),c=m(!1),l=m(null),y=E(),C=u(()=>v.mainDockerApps.find(s=>s.name===p.value)?.image_path||O),g=async()=>{try{const o=await $.get("/api/view-container-logs",{headers:{"X-HomeDock-CSRF-Token":y.value},params:{containerName:p.value}});o.data?.logs&&o.data.logs.trim()!==""?i.value=o.data.logs:i.value="No logs found for this application."}catch{i.value="Failed to fetch logs for this application."}};return N(c,o=>{o?l.value=setInterval(()=>{g()},3e3):l.value&&(clearInterval(l.value),l.value=null)}),T(()=>{g()}),B(()=>{l.value&&clearInterval(l.value)}),(o,s)=>(S(),L("div",F,[e("div",X,[e("div",q,[r(R,{draggable:"false",src:C.value,alt:"App Icon",class:"app-icon w-12 h-12 min-w-12 min-h-12 rounded-xl drop-shadow-md ring-[1px] ring-gray-500/10"},null,8,["src"]),e("div",G,[e("p",{class:n([[a(t).hubCardTextAppName],"app-name font-bold text-sm"])},_(x.value)+" logs",3),e("p",{class:n([[a(t).hubCardTextRepo],"app-docker-image text-xs"])},"Real-time container logs",2)])]),e("hr",{class:n([[a(t).hubSeparator],"border-0 h-px mb-4"])},null,2),D(e("textarea",{class:n([[a(t).hubTextArea],"flex-1 rounded-lg w-full font-mono text-xs resize-none p-3"]),"onUpdate:modelValue":s[0]||(s[0]=d=>i.value=d),readonly:"",placeholder:"Loading logs..."},null,2),[[V,i.value]]),e("div",P,[r(a(M),{checked:c.value,"onUpdate:checked":s[1]||(s[1]=d=>c.value=d),size:"small"},{checkedChildren:f(()=>[e("span",W,[r(a(w),{icon:a(U),class:"animate-spin"},null,8,["icon"])])]),unCheckedChildren:f(()=>[...s[2]||(s[2]=[e("span",{class:"switch-text"},"Auto",-1)])]),_:1},8,["checked"]),e("span",{class:n([[a(t).hubCardTextRepo],"text-xs"])},_(c.value?"Auto-refreshing every 3s":"Auto-refresh disabled"),3)])]),r(H,{icon:a(k),message:"Logs",info:`Viewing ${x.value}`,showHelp:!0},{help:f(()=>[e("div",J,[e("div",K,[r(a(w),{icon:a(k),class:n(["w-5 h-5",a(t).statusBarIcon])},null,8,["icon","class"]),e("h4",{class:n(["text-base font-semibold",a(t).statusBarText])},"Logs",2)]),e("div",{class:n(["text-[10px] md:text-xs space-y-2 leading-relaxed",a(t).statusBarInfo])},[...s[3]||(s[3]=[e("p",null,"View real-time logs from your applications to monitor activity and troubleshoot issues. Enable auto-refresh to automatically update the logs every 3 seconds, ensuring you always see the latest output without manual intervention. Perfect for debugging and monitoring container behavior in real-time.",-1)])],2)])]),_:1},8,["icon","info"])]))}}),he=z(Q,[["__scopeId","data-v-9e707735"]]);export{he as default};
