import{M as de,bQ as ue,aU as g,q as l,bE as $,aD as pe,aI as fe,u as k,aL as I,v as t,I as i,au as o,bk as e,bU as u,t as xe,bb as n,aw as w,H as S,F as me,aX as ve,bO as he,bJ as ge}from"./hdos_BmqLjGp9pD_x_NB4upKEB.js";import{a as we}from"./hdos_BbS_vWe5DNlDDYAPlKxdN.js";import{i as be,M as ye,g as _e,ao as ke,L as Ie,ap as Se,aq as L,I as J,J as Be,a0 as Te,q as De,b as Ce,r as Fe}from"./hdos_TAoCV3MV09JGZrSceMlkI.js";import{u as $e}from"./hdos_BruOM-EsGencX_0CIOn22.js";import{_ as Me}from"./hdos_CAFSXUB9ejWuPT9PfRgwK.js";import{d as M}from"./hdos_D44-qjTiwUddp5Oy6nAd3.js";import{d as He}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{d as Ge}from"./hdos_B3p2GIGZACSZVaJ-BO-PB.js";import{b as Ue}from"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_BsaJBtI1N-WeUcSk3jJyl.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_DIn7j5yNZ-jo19dGvRebC.js";import"./hdos_Cuccj8xUVyEDTvA_fcq1n.js";import"./hdos_BIGJWr_bpeXTKglK2UXub.js";import"./hdos_DG8c-fE8MmEkU_Tt58C8V.js";const Ae={class:"flex flex-col h-full overflow-hidden"},ze={class:"mb-8"},Re={class:"flex items-center gap-3"},Ve={class:"flex-1 min-w-0"},je={class:"text-right"},Oe={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-3"},Ne={class:"w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0"},Pe={class:"flex-1 min-w-0"},Ze={class:"text-right"},qe={class:"mb-8"},Le={class:"flex items-center gap-2 mb-1"},Je={class:"space-y-1"},We={class:"flex items-center justify-between text-xs"},Xe={class:"space-y-1"},Ke={class:"flex items-center justify-between text-xs"},Qe={class:"flex items-center gap-2 mb-1"},Ye={class:"grid grid-cols-2 gap-3"},et={class:"flex items-center gap-1.5"},tt={class:"flex items-center gap-1.5"},st={class:"flex items-center gap-2 mb-1"},ot={class:"grid grid-cols-2 gap-3"},at={class:"flex items-center gap-1.5"},lt={class:"flex items-center gap-1.5"},nt={class:"flex items-center gap-1.5"},rt={class:"flex flex-col gap-2"},it=["onClick","onDblclick"],ct={class:"flex-shrink-0 w-12 h-12 md:w-10 md:h-10 flex items-center justify-center rounded-lg overflow-hidden"},dt={class:"flex-1 min-w-0"},ut={class:"flex-shrink-0"},pt=["onClick"],ft={class:"space-y-2.5 max-w-sm"},xt={class:"flex items-center gap-2"},Ht=de({__name:"AppHome",setup(mt){const{themeClasses:s}=ue(),H=be(),W=$e(),c=ye(),X=_e(),p=g({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),m=g({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),f=g({used:0,usedFormatted:"0 B",fileCount:0,folderCount:0}),b=g(null),B=g(0),G=l(()=>B.value<600||!V.value?"grid-cols-1":"grid-cols-2"),T=l(()=>Math.round(parseFloat(c.cpuUsage)||0)),U=l(()=>c.cpuCores),A=l(()=>c.cpuGhz),K=l(()=>(parseFloat(A.value)||0)>0?`${U.value} cores @ ${A.value} GHz`:`${U.value} cores`),D=l(()=>Math.round(parseFloat(c.ramUsage)||0)),Q=l(()=>c.totalRam);l(()=>Math.round(parseFloat(c.cpuTemp)||0));const C=l(()=>Math.round(parseFloat(c.hardDiskUsage)||0)),z=l(()=>c.hardDiskTotal),Y=l(()=>c.externalDefaultDisk),y=l(()=>Math.round(parseFloat(c.externalDiskUsage)||0)),R=l(()=>c.externalDiskTotal),V=l(()=>Y.value!=="disabled"&&y.value>0),ee=l(()=>p.value.total===0?0:Math.round(f.value.used/p.value.total*100*100)/100),j=l(()=>c.downloadData),O=l(()=>c.uploadData),te=l(()=>{const a=j.value;return typeof a=="string"?a.split(" ")[0]:"0"}),se=l(()=>{const a=j.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),oe=l(()=>{const a=O.value;return typeof a=="string"?a.split(" ")[0]:"0"}),ae=l(()=>{const a=O.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),E=l(()=>c.totalContainers),N=l(()=>c.activeContainers),le=l(()=>c.uptimeData),ne=l(()=>c.startTime),re=l(()=>ke());function _(a){if(a===0)return"0 B";const r=1024,d=["B","KB","MB","GB","TB"],x=Math.floor(Math.log(a)/Math.log(r));return Math.round(a/Math.pow(r,x)*100)/100+" "+d[x]}function P(){const r=(parseFloat(z.value)||0)*1073741824,d=r*C.value/100;p.value={used:d,total:r,usedFormatted:_(d),totalFormatted:_(r),percentage:C.value}}function Z(){const a=parseFloat(R.value)||0,r=a*1073741824,d=r*y.value/100;m.value={used:d,total:r,usedFormatted:_(d),totalFormatted:a>900?`${(a/1024).toFixed(2)} TB`:`${a} GB`,percentage:y.value}}async function q(){try{const a=await we.get("/api/get_files",{headers:{"X-HomeDock-CSRF-Token":X.value}});if(a.data.files&&Array.isArray(a.data.files)){const r=a.data.files.reduce((h,ce)=>h+(ce.size||0),0),d=a.data.files.filter(h=>!h.is_directory),x=a.data.files.filter(h=>h.is_directory);f.value={used:r,usedFormatted:_(r),fileCount:d.length,folderCount:x.length}}}catch(a){console.error("Failed to fetch encrypted storage info:",a)}}function F(a){H.openSystemApp(a.id)}function ie(){H.openSystemApp("dropzone")}$([C,z],()=>{P()}),$([y,R],()=>{Z()}),$(()=>W.lastUpdate,()=>{q()});let v=null;return pe(()=>{P(),Z(),q(),b.value&&(v=new ResizeObserver(a=>{for(const r of a)B.value=r.contentRect.width}),v.observe(b.value),B.value=b.value.clientWidth)}),fe(()=>{v&&(v.disconnect(),v=null)}),(a,r)=>(I(),k("div",Ae,[t("div",{ref_key:"containerRef",ref:b,class:"flex-1 overflow-y-auto px-4 py-4"},[t("div",ze,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(Ie),class:"w-4 h-4"},null,8,["icon"]),r[0]||(r[0]=t("span",null,"My Devices",-1))],2),t("div",{class:o(["grid gap-4 mb-4",G.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Re,[t("div",{class:o(["w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0",e(s).iconHolder])},[i(e(u),{icon:e(M),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",Ve,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"Cloud Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"System disk",2)]),t("div",je,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},n(p.value.percentage)+"%",3)])]),t("div",{class:o(["relative w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"absolute inset-0 h-full bg-blue-500 transition-all duration-150",style:w({width:p.value.percentage+"%"})},null,4),t("div",{class:"absolute inset-0 h-full bg-green-500 transition-all duration-150",style:w({width:ee.value+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,n(p.value.usedFormatted)+" used",1),t("span",null,n(p.value.totalFormatted)+" total",1)],2),t("div",{onClick:ie,class:o(["flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all hover:bg-opacity-50",[e(s).windowBorder]]),style:{"margin-top":"-0.25rem"}},[t("div",Oe,[i(e(u),{icon:e(He),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-xs font-medium",e(s).statInnerText])},"Encrypted: "+n(f.value.usedFormatted),3)]),t("span",{class:o(["text-xs",e(s).statSubtleText])},n(f.value.fileCount)+" "+n(f.value.fileCount===1?"file":"files")+" • "+n(f.value.folderCount)+" "+n(f.value.folderCount===1?"folder":"folders"),3)],2)],2),V.value?(I(),k("div",{key:0,class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Ee,[t("div",Ne,[i(e(u),{icon:e(Se),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",Pe,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"External Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"External disk",2)]),t("div",Ze,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},n(m.value.percentage)+"%",3)])]),t("div",{class:o(["w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-green-500 transition-all duration-150",style:w({width:m.value.percentage+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,n(m.value.usedFormatted)+" used",1),t("span",null,n(m.value.totalFormatted)+" total",1)],2)],2)):xe("",!0)],2)]),t("div",qe,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(L),class:"w-4 h-4"},null,8,["icon"]),r[1]||(r[1]=t("span",null,"System Overview",-1))],2),t("div",{class:o(["grid gap-4",G.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Le,[i(e(u),{icon:e(Ue),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Performance",2)]),t("div",Je,[t("div",We,[t("span",{class:o(e(s).statSubtleText)},"CPU",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},n(T.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-blue-500 transition-all duration-150",style:w({width:T.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},n(K.value),3)]),t("div",Xe,[t("div",Ke,[t("span",{class:o(e(s).statSubtleText)},"Memory",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},n(D.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-purple-500 transition-all duration-150",style:w({width:D.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},n(Q.value)+" GB total",3)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Qe,[i(e(u),{icon:e(J),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Network",2)]),t("div",Ye,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",et,[i(e(u),{icon:e(J),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Download",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[S(n(te.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},n(se.value),3)],2)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",tt,[i(e(u),{icon:e(Be),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Upload",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[S(n(oe.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},n(ae.value),3)],2)],2)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border transition-all duration-150",[e(s).windowBorder,e(s).statHolder]])},[t("div",st,[i(e(u),{icon:e(L),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"System Health",2)]),t("div",ot,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",at,[i(e(u),{icon:e(Te),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"System",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},n(le.value),3)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",lt,[i(e(u),{icon:e(Ge),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"HomeDock OS",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},n(ne.value),3)],2)]),t("div",{class:o(["flex items-center justify-between p-2 rounded-lg border",e(s).windowBorder])},[t("div",nt,[i(e(u),{icon:e(De),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Installed Applications",2)]),t("span",{class:o(["text-xs font-bold",e(s).statInnerText])},n(N.value)+" / "+n(E.value),3)],2)],2)],2)]),t("div",null,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(Ce),class:"w-4 h-4"},null,8,["icon"]),r[2]||(r[2]=t("span",null,"System Applications",-1))],2),t("div",rt,[(I(!0),k(me,null,ve(re.value,d=>(I(),k("div",{key:d.id,onClick:x=>F(d),onDblclick:x=>F(d),class:o(["group flex items-center gap-4 px-3 py-3 rounded-lg cursor-pointer transition-all duration-150",[e(s).explorerResultItem,e(s).explorerResultItemHover]])},[t("div",ct,[i(e(u),{icon:d.icon,class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",dt,[t("div",{class:o(["text-sm font-medium overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemName])},n(d.name),3),t("div",{class:o(["text-xs mt-0.5 overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemDescription])},n(d.description),3)]),t("div",ut,[t("button",{onClick:he(x=>F(d),["stop"]),class:o(["p-2 rounded-md border-none cursor-pointer transition-all duration-150",[e(s).explorerActionButton,e(s).explorerActionButtonHover]]),title:"Open"},[i(e(u),{icon:e(Fe),class:"w-4 h-4"},null,8,["icon"])],10,pt)])],42,it))),128))])])],512),i(Me,{icon:e(M),message:"My Home",info:`CPU ${T.value}% • RAM ${D.value}% • ${N.value}/${E.value} apps`,showHelp:!0},{help:ge(()=>[t("div",ft,[t("div",xt,[i(e(u),{icon:e(M),class:o(["w-5 h-5",e(s).statusBarIcon])},null,8,["icon","class"]),t("h4",{class:o(["text-base font-semibold",e(s).statusBarText])},"My Home",2)]),t("div",{class:o(["text-[10px] md:text-xs space-y-2 leading-relaxed",e(s).statusBarInfo])},[...r[3]||(r[3]=[t("p",null,"My Home is your central hub for accessing system information and applications. Monitor storage, performance, network activity, and system health at a glance.",-1),t("p",null,[t("strong",null,"Storage:"),S(" Cloud Storage shows total disk usage (blue bar) with encrypted data overlay (green bar). Click encrypted info to access Drop Zone.")],-1),t("p",null,[t("strong",null,"System Overview:"),S(" Real-time performance metrics, network statistics, and system health indicators help you keep track of your HomeDock OS.")],-1)])],2)])]),_:1},8,["icon","info"])]))}});export{Ht as default};
