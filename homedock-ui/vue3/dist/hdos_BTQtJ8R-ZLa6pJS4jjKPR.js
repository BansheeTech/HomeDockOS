import{j as de,q as ue,r as g,d as a,w as $,B as pe,C as xe,v as k,z as I,y as t,G as i,x as o,u as e,M as u,F as fe,H as n,L as w,Y as S,R as me,U as ve,N as he,E as ge}from"./hdos_Dbq3fhnkqH76jQuyDCTTt.js";import{a as we}from"./hdos_BbS_vWe5DNlDDYAPlKxdN.js";import{i as be,p as ye,g as _e,ai as ke,o as Ie,aj as Se,ak as W,l as q,m as Be,U as Te,ah as De,b as Ce,_ as Fe}from"./hdos_C5AEMY2HFY_-h_mOBTkJ4.js";import{u as $e}from"./hdos_DP88aUbmLlW8Y-JRrH_FE.js";import{_ as Me}from"./hdos_DR-AppMpnYI3uQEIV7tI7.js";import{d as M}from"./hdos_BIpjuF1XxdpJ6XOgmz5z6.js";import{d as He}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{b as Ge}from"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_D9OrELHR35j-7vcwagI1C.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_BMinznI1SgDjG1GLhiYLN.js";import"./hdos_Ce05jrhR34kDkwVUkTBSn.js";const Ue={width:24,height:24,body:'<path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8h5Z"/>'},Ae={class:"flex flex-col h-full overflow-hidden"},ze={class:"mb-8"},Re={class:"flex items-center gap-3"},je={class:"flex-1 min-w-0"},Ve={class:"text-right"},Ee={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-3"},Oe={class:"w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0"},Ze={class:"flex-1 min-w-0"},Le={class:"text-right"},Pe={class:"mb-8"},We={class:"flex items-center gap-2 mb-1"},qe={class:"space-y-1"},Ke={class:"flex items-center justify-between text-xs"},Xe={class:"space-y-1"},Ye={class:"flex items-center justify-between text-xs"},Je={class:"flex items-center gap-2 mb-1"},Qe={class:"grid grid-cols-2 gap-3"},et={class:"flex items-center gap-1.5"},tt={class:"flex items-center gap-1.5"},st={class:"flex items-center gap-2 mb-1"},ot={class:"grid grid-cols-2 gap-3"},lt={class:"flex items-center gap-1.5"},at={class:"flex items-center gap-1.5"},nt={class:"flex items-center gap-1.5"},rt={class:"flex flex-col gap-2"},it=["onClick","onDblclick"],ct={class:"flex-shrink-0 w-12 h-12 md:w-10 md:h-10 flex items-center justify-center rounded-lg overflow-hidden"},dt={class:"flex-1 min-w-0"},ut={class:"flex-shrink-0"},pt=["onClick"],xt={class:"space-y-2.5 max-w-sm"},ft={class:"flex items-center gap-2"},$t=de({__name:"AppHome",setup(mt){const{themeClasses:s}=ue(),H=be(),K=$e(),c=ye(),X=_e(),p=g({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),m=g({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),x=g({used:0,usedFormatted:"0 B",fileCount:0,folderCount:0}),b=g(null),B=g(0),G=a(()=>B.value<600||!j.value?"grid-cols-1":"grid-cols-2"),T=a(()=>Math.round(parseFloat(c.cpuUsage)||0)),U=a(()=>c.cpuCores),A=a(()=>c.cpuGhz),Y=a(()=>(parseFloat(A.value)||0)>0?`${U.value} cores @ ${A.value} GHz`:`${U.value} cores`),D=a(()=>Math.round(parseFloat(c.ramUsage)||0)),J=a(()=>c.totalRam);a(()=>Math.round(parseFloat(c.cpuTemp)||0));const C=a(()=>Math.round(parseFloat(c.hardDiskUsage)||0)),z=a(()=>c.hardDiskTotal),Q=a(()=>c.externalDefaultDisk),y=a(()=>Math.round(parseFloat(c.externalDiskUsage)||0)),R=a(()=>c.externalDiskTotal),j=a(()=>Q.value!=="disabled"&&y.value>0),ee=a(()=>p.value.total===0?0:Math.round(x.value.used/p.value.total*100*100)/100),V=a(()=>c.downloadData),E=a(()=>c.uploadData),te=a(()=>{const l=V.value;return typeof l=="string"?l.split(" ")[0]:"0"}),se=a(()=>{const l=V.value;return typeof l=="string"&&l.split(" ")[1]||"GB"}),oe=a(()=>{const l=E.value;return typeof l=="string"?l.split(" ")[0]:"0"}),le=a(()=>{const l=E.value;return typeof l=="string"&&l.split(" ")[1]||"GB"}),N=a(()=>c.totalContainers),O=a(()=>c.activeContainers),ae=a(()=>c.uptimeData),ne=a(()=>c.startTime),re=a(()=>ke());function _(l){if(l===0)return"0 B";const r=1024,d=["B","KB","MB","GB","TB"],f=Math.floor(Math.log(l)/Math.log(r));return Math.round(l/Math.pow(r,f)*100)/100+" "+d[f]}function Z(){const r=(parseFloat(z.value)||0)*1073741824,d=r*C.value/100;p.value={used:d,total:r,usedFormatted:_(d),totalFormatted:_(r),percentage:C.value}}function L(){const l=parseFloat(R.value)||0,r=l*1073741824,d=r*y.value/100;m.value={used:d,total:r,usedFormatted:_(d),totalFormatted:l>900?`${(l/1024).toFixed(2)} TB`:`${l} GB`,percentage:y.value}}async function P(){try{const l=await we.get("/api/get_files",{headers:{"X-HomeDock-CSRF-Token":X.value}});if(l.data.files&&Array.isArray(l.data.files)){const r=l.data.files.reduce((h,ce)=>h+(ce.size||0),0),d=l.data.files.filter(h=>!h.is_directory),f=l.data.files.filter(h=>h.is_directory);x.value={used:r,usedFormatted:_(r),fileCount:d.length,folderCount:f.length}}}catch(l){console.error("Failed to fetch encrypted storage info:",l)}}function F(l){H.openSystemApp(l.id)}function ie(){H.openSystemApp("dropzone")}$([C,z],()=>{Z()}),$([y,R],()=>{L()}),$(()=>K.lastUpdate,()=>{P()});let v=null;return pe(()=>{Z(),L(),P(),b.value&&(v=new ResizeObserver(l=>{for(const r of l)B.value=r.contentRect.width}),v.observe(b.value),B.value=b.value.clientWidth)}),xe(()=>{v&&(v.disconnect(),v=null)}),(l,r)=>(I(),k("div",Ae,[t("div",{ref_key:"containerRef",ref:b,class:"flex-1 overflow-y-auto px-4 py-4"},[t("div",ze,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(Ie),class:"w-4 h-4"},null,8,["icon"]),r[0]||(r[0]=t("span",null,"My Devices",-1))],2),t("div",{class:o(["grid gap-4 mb-4",G.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Re,[t("div",{class:o(["w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0",e(s).iconHolder])},[i(e(u),{icon:e(M),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",je,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"Cloud Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"System disk",2)]),t("div",Ve,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},n(p.value.percentage)+"%",3)])]),t("div",{class:o(["relative w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"absolute inset-0 h-full bg-blue-500 transition-all duration-150",style:w({width:p.value.percentage+"%"})},null,4),t("div",{class:"absolute inset-0 h-full bg-green-500 transition-all duration-150",style:w({width:ee.value+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,n(p.value.usedFormatted)+" used",1),t("span",null,n(p.value.totalFormatted)+" total",1)],2),t("div",{onClick:ie,class:o(["flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all hover:bg-opacity-50",[e(s).windowBorder]]),style:{"margin-top":"-0.25rem"}},[t("div",Ee,[i(e(u),{icon:e(He),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-xs font-medium",e(s).statInnerText])},"Encrypted: "+n(x.value.usedFormatted),3)]),t("span",{class:o(["text-xs",e(s).statSubtleText])},n(x.value.fileCount)+" "+n(x.value.fileCount===1?"file":"files")+" • "+n(x.value.folderCount)+" "+n(x.value.folderCount===1?"folder":"folders"),3)],2)],2),j.value?(I(),k("div",{key:0,class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Ne,[t("div",Oe,[i(e(u),{icon:e(Se),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",Ze,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"External Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"External disk",2)]),t("div",Le,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},n(m.value.percentage)+"%",3)])]),t("div",{class:o(["w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-green-500 transition-all duration-150",style:w({width:m.value.percentage+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,n(m.value.usedFormatted)+" used",1),t("span",null,n(m.value.totalFormatted)+" total",1)],2)],2)):fe("",!0)],2)]),t("div",Pe,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(W),class:"w-4 h-4"},null,8,["icon"]),r[1]||(r[1]=t("span",null,"System Overview",-1))],2),t("div",{class:o(["grid gap-4",G.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",We,[i(e(u),{icon:e(Ge),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Performance",2)]),t("div",qe,[t("div",Ke,[t("span",{class:o(e(s).statSubtleText)},"CPU",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},n(T.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-blue-500 transition-all duration-150",style:w({width:T.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},n(Y.value),3)]),t("div",Xe,[t("div",Ye,[t("span",{class:o(e(s).statSubtleText)},"Memory",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},n(D.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-purple-500 transition-all duration-150",style:w({width:D.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},n(J.value)+" GB total",3)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Je,[i(e(u),{icon:e(q),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Network",2)]),t("div",Qe,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",et,[i(e(u),{icon:e(q),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Download",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[S(n(te.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},n(se.value),3)],2)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",tt,[i(e(u),{icon:e(Be),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Upload",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[S(n(oe.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},n(le.value),3)],2)],2)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border transition-all duration-150",[e(s).windowBorder,e(s).statHolder]])},[t("div",st,[i(e(u),{icon:e(W),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"System Health",2)]),t("div",ot,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",lt,[i(e(u),{icon:e(Te),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"System",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},n(ae.value),3)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",at,[i(e(u),{icon:e(Ue),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"HomeDock OS",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},n(ne.value),3)],2)]),t("div",{class:o(["flex items-center justify-between p-2 rounded-lg border",e(s).windowBorder])},[t("div",nt,[i(e(u),{icon:e(De),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Installed Applications",2)]),t("span",{class:o(["text-xs font-bold",e(s).statInnerText])},n(O.value)+" / "+n(N.value),3)],2)],2)],2)]),t("div",null,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(Ce),class:"w-4 h-4"},null,8,["icon"]),r[2]||(r[2]=t("span",null,"System Applications",-1))],2),t("div",rt,[(I(!0),k(me,null,ve(re.value,d=>(I(),k("div",{key:d.id,onClick:f=>F(d),onDblclick:f=>F(d),class:o(["group flex items-center gap-4 px-3 py-3 rounded-lg cursor-pointer transition-all duration-150",[e(s).explorerResultItem,e(s).explorerResultItemHover]])},[t("div",ct,[i(e(u),{icon:d.icon,class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",dt,[t("div",{class:o(["text-sm font-medium overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemName])},n(d.name),3),t("div",{class:o(["text-xs mt-0.5 overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemDescription])},n(d.description),3)]),t("div",ut,[t("button",{onClick:he(f=>F(d),["stop"]),class:o(["p-2 rounded-md border-none cursor-pointer transition-all duration-150",[e(s).explorerActionButton,e(s).explorerActionButtonHover]]),title:"Open"},[i(e(u),{icon:e(Fe),class:"w-4 h-4"},null,8,["icon"])],10,pt)])],42,it))),128))])])],512),i(Me,{icon:e(M),message:"My Home",info:`CPU ${T.value}% • RAM ${D.value}% • ${O.value}/${N.value} apps`,showHelp:!0},{help:ge(()=>[t("div",xt,[t("div",ft,[i(e(u),{icon:e(M),class:o(["w-5 h-5",e(s).statusBarIcon])},null,8,["icon","class"]),t("h4",{class:o(["text-base font-semibold",e(s).statusBarText])},"My Home",2)]),t("div",{class:o(["text-[10px] md:text-xs space-y-2 leading-relaxed",e(s).statusBarInfo])},[...r[3]||(r[3]=[t("p",null,"My Home is your central hub for accessing system information and applications. Monitor storage, performance, network activity, and system health at a glance.",-1),t("p",null,[t("strong",null,"Storage:"),S(" Cloud Storage shows total disk usage (blue bar) with encrypted data overlay (green bar). Click encrypted info to access Drop Zone.")],-1),t("p",null,[t("strong",null,"System Overview:"),S(" Real-time performance metrics, network statistics, and system health indicators help you keep track of your HomeDock OS.")],-1)])],2)])]),_:1},8,["icon","info"])]))}});export{$t as default};
