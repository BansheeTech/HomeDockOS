import{j as ie,B as ce,r as v,d as l,w as F,v as de,x as ue,y as _,A as k,z as t,F as i,H as o,u as e,M as u,E as pe,G as r,L as h,Z as I,R as xe,U as fe,N as me,D as ve}from"./hdos_CwgWk8eLTjpwBAvlmNRuC.js";import{a as he}from"./hdos_C-gUdRjisEVUw9SLex2md.js";import{k as ge,ak as we,g as be,al as ye,r as _e,am as ke,an as P,R as W,s as Ie,T as Se,aj as Be,b as Te,_ as De}from"./hdos_D9kVJQ7cHtySixDiiDAnh.js";import{u as Ce}from"./hdos_Deljn-ShPykQ0J6X-VL7k.js";import{_ as Fe}from"./hdos_DB9nk7o4Li83Mnm0jQoEI.js";import{d as $}from"./hdos_DFB9E9TvlsPR65iN3QDdj.js";import{d as $e}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{b as Me}from"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_C8i7KrBOeUla4Xcj1qGUL.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CKiXEHO1wWmBHvui6HE9C.js";import"./hdos_eBG4X8UAzk7PFFQ8iD72q.js";const He={width:24,height:24,body:'<path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8h5Z"/>'},Ge={class:"flex flex-col h-full overflow-hidden"},Ue={class:"mb-8"},Ae={class:"flex items-center gap-3"},ze={class:"flex-1 min-w-0"},Re={class:"text-right"},je={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-3"},Ee={class:"w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0"},Ne={class:"flex-1 min-w-0"},Oe={class:"text-right"},Ze={class:"mb-8"},Le={class:"flex items-center gap-2 mb-1"},Pe={class:"space-y-1"},We={class:"flex items-center justify-between text-xs"},Ke={class:"space-y-1"},Xe={class:"flex items-center justify-between text-xs"},qe={class:"flex items-center gap-2 mb-1"},Je={class:"grid grid-cols-2 gap-3"},Qe={class:"flex items-center gap-1.5"},Ye={class:"flex items-center gap-1.5"},et={class:"flex items-center gap-2 mb-1"},tt={class:"grid grid-cols-2 gap-3"},st={class:"flex items-center gap-1.5"},ot={class:"flex items-center gap-1.5"},at={class:"flex items-center gap-1.5"},lt={class:"flex flex-col gap-2"},nt=["onClick","onDblclick"],rt={class:"flex-shrink-0 w-12 h-12 md:w-10 md:h-10 flex items-center justify-center rounded-lg overflow-hidden"},it={class:"flex-1 min-w-0"},ct={class:"flex-shrink-0"},dt=["onClick"],ut={class:"space-y-2.5 max-w-sm"},pt={class:"flex items-center gap-2"},Ct=ie({__name:"AppHome",setup(xt){const{themeClasses:s}=ce(),M=ge(),K=Ce(),c=we(),X=be(),p=v({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),f=v({used:0,total:0,usedFormatted:"0 GB",totalFormatted:"0 GB",percentage:0}),g=v({used:0,usedFormatted:"0 B",fileCount:0}),w=v(null),S=v(0),H=l(()=>S.value<600||!R.value?"grid-cols-1":"grid-cols-2"),B=l(()=>Math.round(parseFloat(c.cpuUsage)||0)),G=l(()=>c.cpuCores),U=l(()=>c.cpuGhz),q=l(()=>(parseFloat(U.value)||0)>0?`${G.value} cores @ ${U.value} GHz`:`${G.value} cores`),T=l(()=>Math.round(parseFloat(c.ramUsage)||0)),J=l(()=>c.totalRam);l(()=>Math.round(parseFloat(c.cpuTemp)||0));const D=l(()=>Math.round(parseFloat(c.hardDiskUsage)||0)),A=l(()=>c.hardDiskTotal),Q=l(()=>c.externalDefaultDisk),b=l(()=>Math.round(parseFloat(c.externalDiskUsage)||0)),z=l(()=>c.externalDiskTotal),R=l(()=>Q.value!=="disabled"&&b.value>0),Y=l(()=>p.value.total===0?0:Math.round(g.value.used/p.value.total*100*100)/100),j=l(()=>c.downloadData),V=l(()=>c.uploadData),ee=l(()=>{const a=j.value;return typeof a=="string"?a.split(" ")[0]:"0"}),te=l(()=>{const a=j.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),se=l(()=>{const a=V.value;return typeof a=="string"?a.split(" ")[0]:"0"}),oe=l(()=>{const a=V.value;return typeof a=="string"&&a.split(" ")[1]||"GB"}),E=l(()=>c.totalContainers),N=l(()=>c.activeContainers),ae=l(()=>c.uptimeData),le=l(()=>c.startTime),ne=l(()=>ye());function y(a){if(a===0)return"0 B";const n=1024,d=["B","KB","MB","GB","TB"],x=Math.floor(Math.log(a)/Math.log(n));return Math.round(a/Math.pow(n,x)*100)/100+" "+d[x]}function O(){const n=(parseFloat(A.value)||0)*1073741824,d=n*D.value/100;p.value={used:d,total:n,usedFormatted:y(d),totalFormatted:y(n),percentage:D.value}}function Z(){const a=parseFloat(z.value)||0,n=a*1073741824,d=n*b.value/100;f.value={used:d,total:n,usedFormatted:y(d),totalFormatted:a>900?`${(a/1024).toFixed(2)} TB`:`${a} GB`,percentage:b.value}}async function L(){try{const a=await he.get("/api/get_files",{headers:{"X-HomeDock-CSRF-Token":X.value}});if(a.data.files&&Array.isArray(a.data.files)){const n=a.data.files.reduce((d,x)=>d+(x.size||0),0);g.value={used:n,usedFormatted:y(n),fileCount:a.data.files.length}}}catch(a){console.error("Failed to fetch encrypted storage info:",a)}}function C(a){M.openSystemApp(a.id)}function re(){M.openSystemApp("dropzone")}F([D,A],()=>{O()}),F([b,z],()=>{Z()}),F(()=>K.lastUpdate,()=>{L()});let m=null;return de(()=>{O(),Z(),L(),w.value&&(m=new ResizeObserver(a=>{for(const n of a)S.value=n.contentRect.width}),m.observe(w.value),S.value=w.value.clientWidth)}),ue(()=>{m&&(m.disconnect(),m=null)}),(a,n)=>(k(),_("div",Ge,[t("div",{ref_key:"containerRef",ref:w,class:"flex-1 overflow-y-auto px-6 py-6"},[t("div",Ue,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(_e),class:"w-4 h-4"},null,8,["icon"]),n[0]||(n[0]=t("span",null,"My Devices",-1))],2),t("div",{class:o(["grid gap-4 mb-4",H.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Ae,[t("div",{class:o(["w-12 h-12 flex items-center justify-center rounded-lg flex-shrink-0",e(s).iconHolder])},[i(e(u),{icon:e($),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])],2),t("div",ze,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"Cloud Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"System disk",2)]),t("div",Re,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},r(p.value.percentage)+"%",3)])]),t("div",{class:o(["relative w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"absolute inset-0 h-full bg-blue-500 transition-all duration-150",style:h({width:p.value.percentage+"%"})},null,4),t("div",{class:"absolute inset-0 h-full bg-green-500 transition-all duration-150",style:h({width:Y.value+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,r(p.value.usedFormatted)+" used",1),t("span",null,r(p.value.totalFormatted)+" total",1)],2),t("div",{onClick:re,class:o(["flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all hover:bg-opacity-50",[e(s).windowBorder]]),style:{"margin-top":"-0.25rem"}},[t("div",je,[i(e(u),{icon:e($e),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-xs font-medium",e(s).statInnerText])},"Encrypted: "+r(g.value.usedFormatted),3)]),t("span",{class:o(["text-xs",e(s).statSubtleText])},r(g.value.fileCount)+" files",3)],2)],2),R.value?(k(),_("div",{key:0,class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Ve,[t("div",Ee,[i(e(u),{icon:e(ke),class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",Ne,[t("h3",{class:o(["text-sm font-semibold",e(s).statInnerText])},"External Storage",2),t("p",{class:o(["text-xs",e(s).statSubtleText])},"External disk",2)]),t("div",Oe,[t("div",{class:o(["text-lg font-bold",e(s).statInnerText])},r(f.value.percentage)+"%",3)])]),t("div",{class:o(["w-full h-2 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-green-500 transition-all duration-150",style:h({width:f.value.percentage+"%"})},null,4)],2),t("div",{class:o(["flex justify-between text-xs",e(s).statSubtleText])},[t("span",null,r(f.value.usedFormatted)+" used",1),t("span",null,r(f.value.totalFormatted)+" total",1)],2)],2)):pe("",!0)],2)]),t("div",Ze,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(P),class:"w-4 h-4"},null,8,["icon"]),n[1]||(n[1]=t("span",null,"System Overview",-1))],2),t("div",{class:o(["grid gap-4",H.value])},[t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",Le,[i(e(u),{icon:e(Me),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Performance",2)]),t("div",Pe,[t("div",We,[t("span",{class:o(e(s).statSubtleText)},"CPU",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},r(B.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-blue-500 transition-all duration-150",style:h({width:B.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},r(q.value),3)]),t("div",Ke,[t("div",Xe,[t("span",{class:o(e(s).statSubtleText)},"Memory",2),t("span",{class:o(["font-semibold",e(s).statInnerText])},r(T.value)+"%",3)]),t("div",{class:o(["w-full h-1.5 rounded-full overflow-hidden",e(s).processingBarScope])},[t("div",{class:"h-full bg-purple-500 transition-all duration-150",style:h({width:T.value+"%"})},null,4)],2),t("div",{class:o(["text-[10px]",e(s).statSubtleText])},r(J.value)+" GB total",3)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border",[e(s).windowBorder,e(s).statHolder]])},[t("div",qe,[i(e(u),{icon:e(W),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"Network",2)]),t("div",Je,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",Qe,[i(e(u),{icon:e(W),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Download",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[I(r(ee.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},r(te.value),3)],2)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",Ye,[i(e(u),{icon:e(Ie),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Upload",2)]),t("div",{class:o(["text-sm font-bold",e(s).statInnerText])},[I(r(se.value)+" ",1),t("span",{class:o(["text-[10px] font-normal",e(s).statSubtleText])},r(oe.value),3)],2)],2)])],2),t("div",{class:o(["flex flex-col gap-3 p-4 rounded-xl border transition-all duration-150",[e(s).windowBorder,e(s).statHolder]])},[t("div",et,[i(e(u),{icon:e(P),class:o(["w-4 h-4",e(s).explorerItemIcon])},null,8,["icon","class"]),t("h3",{class:o(["text-xs font-semibold uppercase tracking-wide",e(s).statInnerText])},"System Health",2)]),t("div",tt,[t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",st,[i(e(u),{icon:e(Se),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"System",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},r(ae.value),3)],2),t("div",{class:o(["flex flex-col gap-1 p-2 rounded-lg border",e(s).windowBorder])},[t("div",ot,[i(e(u),{icon:e(He),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"HomeDock OS",2)]),t("div",{class:o(["text-xs font-bold",e(s).statInnerText])},r(le.value),3)],2)]),t("div",{class:o(["flex items-center justify-between p-2 rounded-lg border",e(s).windowBorder])},[t("div",at,[i(e(u),{icon:e(Be),class:o(["w-3 h-3",e(s).explorerItemIcon])},null,8,["icon","class"]),t("span",{class:o(["text-[10px] font-medium",e(s).statSubtleText])},"Installed Applications",2)]),t("span",{class:o(["text-xs font-bold",e(s).statInnerText])},r(N.value)+" / "+r(E.value),3)],2)],2)],2)]),t("div",null,[t("h3",{class:o(["flex items-center gap-2 text-xs font-semibold uppercase tracking-wider mb-3",e(s).explorerGroupHeader])},[i(e(u),{icon:e(Te),class:"w-4 h-4"},null,8,["icon"]),n[2]||(n[2]=t("span",null,"System Applications",-1))],2),t("div",lt,[(k(!0),_(xe,null,fe(ne.value,d=>(k(),_("div",{key:d.id,onClick:x=>C(d),onDblclick:x=>C(d),class:o(["group flex items-center gap-4 px-3 py-3 rounded-lg cursor-pointer transition-all duration-150",[e(s).explorerResultItem,e(s).explorerResultItemHover]])},[t("div",rt,[i(e(u),{icon:d.icon,class:o(["w-8 h-8",e(s).explorerItemIcon])},null,8,["icon","class"])]),t("div",it,[t("div",{class:o(["text-sm font-medium overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemName])},r(d.name),3),t("div",{class:o(["text-xs mt-0.5 overflow-hidden text-ellipsis whitespace-nowrap",e(s).explorerItemDescription])},r(d.description),3)]),t("div",ct,[t("button",{onClick:me(x=>C(d),["stop"]),class:o(["p-2 rounded-md border-none cursor-pointer transition-all duration-150",[e(s).explorerActionButton,e(s).explorerActionButtonHover]]),title:"Open"},[i(e(u),{icon:e(De),class:"w-4 h-4"},null,8,["icon"])],10,dt)])],42,nt))),128))])])],512),i(Fe,{icon:e($),message:"My Home",info:`CPU ${B.value}% • RAM ${T.value}% • ${N.value}/${E.value} apps`,showHelp:!0},{help:ve(()=>[t("div",ut,[t("div",pt,[i(e(u),{icon:e($),class:o(["w-5 h-5",e(s).statusBarIcon])},null,8,["icon","class"]),t("h4",{class:o(["text-base font-semibold",e(s).statusBarText])},"My Home",2)]),t("div",{class:o(["text-[10px] md:text-xs space-y-2 leading-relaxed",e(s).statusBarInfo])},[...n[3]||(n[3]=[t("p",null,"My Home is your central hub for accessing system information and applications. Monitor storage, performance, network activity, and system health at a glance.",-1),t("p",null,[t("strong",null,"Storage:"),I(" Cloud Storage shows total disk usage (blue bar) with encrypted data overlay (green bar). Click encrypted info to access Drop Zone.")],-1),t("p",null,[t("strong",null,"System Overview:"),I(" Real-time performance metrics, network statistics, and system health indicators help you keep track of your HomeDock OS.")],-1)])],2)])]),_:1},8,["icon","info"])]))}});export{Ct as default};
