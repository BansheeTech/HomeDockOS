import{M as D,bQ as U,aU as p,q as w,aD as P,u as T,aL as V,v as r,au as o,bk as u,bb as y,bR as L}from"./hdos_BnIymrgN3FMaW96NhsgWi.js";const q=D({__name:"UtilsCalculator",setup(z){const{themeClasses:n}=U(),x=p(null),t=p("0"),c=p(null),s=p(null),f=p(""),i=p(!1),g=p(null),O=w(()=>{const e=t.value;if(e==="Error"||e==="Infinity"||e==="-Infinity")return e==="Infinity"||e==="-Infinity"?"Error":e;const l=e.split("."),a=l[0],F=l[1],S=a.replace(/\B(?=(\d{3})+(?!\d))/g,",");return F!==void 0?`${S}.${F}`:S}),I=w(()=>{const e=t.value.replace(/[-.]/g,"").length;return e<=6?"text-5xl":e<=9?"text-4xl":e<=12?"text-3xl":"text-2xl"});function v(e){if(i.value)t.value=e,i.value=!1;else{if(t.value.replace(/[-.]/g,"").length>=15)return;t.value=t.value==="0"?e:t.value+e}}function B(){if(i.value){t.value="0.",i.value=!1;return}t.value.includes(".")||(t.value+=".")}function b(e){if(t.value==="Error")return;if(c.value===null)c.value=t.value;else if(s.value&&!i.value){const a=N();if(!m(a)){t.value="Error",c.value=null,s.value=null,f.value="",i.value=!0;return}t.value=String(a),c.value=String(a)}const l=e==="*"?"×":e==="/"?"÷":e==="-"?"−":"+";f.value=`${d(c.value)} ${l}`,s.value=e,i.value=!0}function d(e){const l=parseFloat(e);return Number.isInteger(l)&&Math.abs(l)<1e15?l.toLocaleString("en-US"):parseFloat(l.toPrecision(10)).toLocaleString("en-US",{maximumFractionDigits:10})}function k(e,l=12){return isFinite(e)?Number(e.toPrecision(l)):e}function m(e){return!(isNaN(e)||!isFinite(e)||Math.abs(e)>Number.MAX_SAFE_INTEGER)}function N(){const e=parseFloat(c.value||"0"),l=parseFloat(t.value);if(isNaN(e)||isNaN(l))return NaN;let a;switch(s.value){case"+":a=e+l;break;case"-":a=e-l;break;case"*":a=e*l;break;case"/":if(l===0)return NaN;a=e/l;break;default:return l}return k(a)}function C(){if(s.value===null||c.value===null)return;const e=N(),l=s.value==="*"?"×":s.value==="/"?"÷":s.value==="-"?"−":"+";if(f.value=`${d(c.value)} ${l} ${d(t.value)} =`,!m(e)){t.value="Error",c.value=null,s.value=null,i.value=!0;return}let a;Number.isInteger(e)&&Math.abs(e)<1e15?a=e.toString():(a=k(e,10).toString(),a.replace(/[-.]/g,"").length>15&&(a=e.toExponential(6))),t.value=a,g.value=a,c.value=null,s.value=null,i.value=!0}function $(){t.value==="0"&&!f.value?(c.value=null,s.value=null,f.value="",g.value=null):(t.value="0",s.value||(f.value="")),i.value=!1}function A(){t.value==="0"||t.value==="Error"||(t.value.startsWith("-")?t.value=t.value.slice(1):t.value="-"+t.value)}function E(){const e=parseFloat(t.value);if(isNaN(e))return;let l;if(c.value!==null&&s.value){const a=parseFloat(c.value);l=k(a*e/100)}else l=k(e/100);if(!m(l)){t.value="Error";return}t.value=String(l)}function M(){i.value||t.value==="Error"||(t.value.length===1||t.value.length===2&&t.value.startsWith("-")?t.value="0":t.value=t.value.slice(0,-1))}function R(e){(/^[0-9.+\-*/=%]$/.test(e.key)||e.key==="Enter"||e.key==="Backspace"||e.key==="Escape")&&e.preventDefault(),/^[0-9]$/.test(e.key)?v(e.key):e.key==="."||e.key===","?B():e.key==="+"?b("+"):e.key==="-"?b("-"):e.key==="*"||e.key==="x"||e.key==="X"?b("*"):e.key==="/"?b("/"):e.key==="="||e.key==="Enter"?C():e.key==="Escape"||e.key==="c"||e.key==="C"?$():e.key==="Backspace"?M():e.key==="%"&&E()}return P(()=>{x.value?.focus()}),(e,l)=>(V(),T("div",{class:"calculator flex flex-col h-full overflow-hidden select-none",onKeydown:R,tabindex:"0",ref_key:"calculatorRef",ref:x},[r("div",{class:o(["display flex-shrink-0 p-4 flex flex-col justify-end min-h-[120px]",u(n).windowBg])},[r("div",{class:o(["expression text-right text-sm mb-1 min-h-[20px] truncate",u(n).windowTextMuted])},y(f.value||" "),3),r("div",{class:o(["value text-right font-light truncate",[u(n).windowText,I.value]])},y(O.value),3)],2),r("div",{class:o(["buttons flex-1 grid grid-cols-4 gap-[1px] p-[1px]",u(n).calculatorGrid])},[r("button",{onClick:$,class:o([[u(n).calculatorBtnFunction],"calc-btn"])},y(t.value==="0"&&!f.value?"AC":"C"),3),r("button",{onClick:A,class:o([[u(n).calculatorBtnFunction],"calc-btn"])},"±",2),r("button",{onClick:E,class:o([[u(n).calculatorBtnFunction],"calc-btn"])},"%",2),r("button",{onClick:l[0]||(l[0]=a=>b("/")),class:o([[u(n).calculatorBtnOperator,s.value==="/"?u(n).calculatorBtnOperatorActive:""],"calc-btn"])},"÷",2),r("button",{onClick:l[1]||(l[1]=a=>v("7")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"7",2),r("button",{onClick:l[2]||(l[2]=a=>v("8")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"8",2),r("button",{onClick:l[3]||(l[3]=a=>v("9")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"9",2),r("button",{onClick:l[4]||(l[4]=a=>b("*")),class:o([[u(n).calculatorBtnOperator,s.value==="*"?u(n).calculatorBtnOperatorActive:""],"calc-btn"])},"×",2),r("button",{onClick:l[5]||(l[5]=a=>v("4")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"4",2),r("button",{onClick:l[6]||(l[6]=a=>v("5")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"5",2),r("button",{onClick:l[7]||(l[7]=a=>v("6")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"6",2),r("button",{onClick:l[8]||(l[8]=a=>b("-")),class:o([[u(n).calculatorBtnOperator,s.value==="-"?u(n).calculatorBtnOperatorActive:""],"calc-btn"])},"−",2),r("button",{onClick:l[9]||(l[9]=a=>v("1")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"1",2),r("button",{onClick:l[10]||(l[10]=a=>v("2")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"2",2),r("button",{onClick:l[11]||(l[11]=a=>v("3")),class:o([[u(n).calculatorBtnNumber],"calc-btn"])},"3",2),r("button",{onClick:l[12]||(l[12]=a=>b("+")),class:o([[u(n).calculatorBtnOperator,s.value==="+"?u(n).calculatorBtnOperatorActive:""],"calc-btn"])},"+",2),r("button",{onClick:l[13]||(l[13]=a=>v("0")),class:o([[u(n).calculatorBtnNumber],"calc-btn col-span-2"])},"0",2),r("button",{onClick:B,class:o([[u(n).calculatorBtnNumber],"calc-btn"])},".",2),r("button",{onClick:C,class:o([[u(n).calculatorBtnEquals],"calc-btn"])},"=",2)],2)],544))}}),K=L(q,[["__scopeId","data-v-b55d0c60"]]);export{K as default};
