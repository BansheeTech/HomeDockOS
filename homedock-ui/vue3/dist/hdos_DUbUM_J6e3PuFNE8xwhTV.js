import{d as ue,r as g,u as he,z,o as me,c as b,a as w,e as l,b as n,F as fe,A as ve,k as ge,l as we,N as xe,n as c,f as t,i as L,m as B,t as I,I as C,p as G,O as ye,h as W,g as _e,q as be,s as Le}from"./hdos_CCIN02zrLD7dEeVrt9fdj.js";import{N as Ce,_ as ke,f as U,C as Ve,g as He,h as $e}from"./hdos_CFE8_fSF8aJBp8ik6pNRM.js";import{d as Me,a as V}from"./hdos_DZUKIvxDT3Fqh7rzmD7rn.js";import{d as Ze}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{A as Se}from"./hdos_C0M5Z2GezLZ6UzToLjDMp.js";import{a as De}from"./hdos_CV0lbVCVtbHAf3UPRrsik.js";import{E as Fe,B as J}from"./hdos_CqgJ5vxBHkjhEwxVSt7q4.js";import{a as d}from"./hdos_CXs9mq6x9DB_pcM6ifWFF.js";import{A as ze}from"./hdos_Db1_LmAvEH7wjH1Fow0t_.js";import{a as Be}from"./hdos_nJfousEM2LGf7az4ZdALl.js";import{P as Ie}from"./hdos_CD2Xlhc_nmu2c1_uCQEhv.js";import"./hdos_BTYM6t8Ob6o6TRCKRT3JA.js";import"./hdos_D6-XlEtGdUWrcdOe4mzvB.js";import"./hdos_B3X5YnqWj2K2uNyb_Jxmk.js";import"./hdos_Cp0mKjhsYNe2VksL3XRcU.js";import"./hdos_BBSnGVb9nuVYElrymyX8N.js";import"./hdos_CYsgkLjWj7utr_UZsWTeq.js";import"./hdos_Dz6EDAzSsksmwEwAJuRbS.js";import"./hdos_CdeQ3DbaNYSiRFQLR96Ir.js";const K={width:24,height:24,body:'<path fill="currentColor" d="M10 4H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2Z"/>'},T={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m9 16v-2H6v2h9m3-4v-2H6v2h12Z"/>'},k={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m0 18h12v-8l-4 4l-2-2l-6 6M8 9a2 2 0 0 0-2 2a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2Z"/>'},Q={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m11 17v-6l-3 2.2V13H7v6h7v-2.2l3 2.2Z"/>'},P={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 11h-2v5a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2c.4 0 .7.1 1 .3V11h3v2m0-4V3.5L18.5 9H13Z"/>'},Y={width:24,height:24,body:'<path fill="currentColor" d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-2 6h-2v2h2v2h-2v2h-2v-2h2v-2h-2v-2h2v-2h-2V8h2v2h2v2Z"/>'},j={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.8 18H14l-2-3.4l-2 3.4H8.2l2.9-4.5L8.2 11H10l2 3.4l2-3.4h1.8l-2.9 4.5l2.9 4.5M13 9V3.5L18.5 9H13Z"/>'},S={width:24,height:24,body:'<path fill="currentColor" d="M12.6 12.3h-2v3.2h2.1c.6 0 .9-.2 1.2-.5c.3-.3.4-.6.4-1.1c0-.5-.1-.8-.4-1.1c-.3-.3-.7-.5-1.3-.5M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.2 14c-.6.5-1.1.7-2.4.7h-2.2V20H9v-9h3.8c1.3 0 1.9.3 2.4.8c.6.6.8 1.2.8 2.1c0 .9-.2 1.6-.8 2.1M13 9V3.5L18.5 9H13Z"/>'},N={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.2 18h-1.4L12 13.2L10.2 20H8.8l-2.2-9h1.5l1.4 6.8l1.8-6.8h1.3l1.8 6.8l1.4-6.8h1.5l-2.1 9M13 9V3.5L18.5 9H13Z"/>'},r={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74l1.42-1.41l-2.33-2.33l2.33-2.33l-1.42-1.41l-3.74 3.74m11.16 0l-3.74-3.74l-1.42 1.41l2.33 2.33l-2.33 2.33l1.42 1.41l3.74-3.74Z"/>'},Ue={width:24,height:24,body:'<path fill="currentColor" d="M13 9V3.5L18.5 9M6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6Z"/>'},Te={width:24,height:24,body:'<path fill="currentColor" d="M10 4h4v9l3.5-3.5l2.42 2.42L12 19.84l-7.92-7.92L6.5 9.5L10 13V4Z"/>'},Pe={width:24,height:24,body:'<path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>'},je={width:24,height:24,body:'<path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5l-9-4m0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6 0 1.2.6 1.2 1.3v3.5c0 .6-.6 1.2-1.3 1.2H9.2c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2V9.5C9.2 8.1 10.6 7 12 7m0 1.2c-.8 0-1.5.5-1.5 1.3V11h3V9.5c0-.8-.7-1.3-1.5-1.3Z"/>'},Ae={width:24,height:24,body:'<path fill="currentColor" d="M16 8c1.1 0 2 .9 2 2v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V10c0-1.1.9-2 2-2h9V6c0-1.7-1.3-3-3-3S7 4.3 7 6H5c0-2.8 2.2-5 5-5s5 2.2 5 5v2h1m-6 9c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2m12-4h-2V7h2v6m0 4h-2v-2h2v2Z"/>'},Ee={class:"flex flex-col min-h-screen"},Re={class:"top-0 left-0 z-10"},qe={class:"flex flex-1 overflow-hidden"},Oe={class:"hidden lg:block relative"},Xe={class:"flex-1 overflow-auto max-w-full holder"},Ge={class:"flex items-center align-center justify-center flex-col"},We={class:"ant-upload-drag-icon"},Je={key:0,class:"text-xs mt-2"},Ke={class:"mt-4"},Qe={key:0,class:"flex justify-center items-center"},Ye={key:1,class:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] lg:grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-4"},Ne={class:"absolute -bottom-1 left-0 right-0 px-1"},et={class:"mt-2 flex space-x-2"},tt=ue({__name:"Dropzone",setup(i){var X;const x=e=>{var a;if(e.endsWith("/"))return K;const o=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return y[o||"unknown"]||Ue},y={folder:K,txt:T,md:T,pdf:T,png:k,jpg:k,jpeg:k,gif:k,psd:k,webp:k,mp4:Q,mkv:Q,mp3:P,wav:P,flac:P,zip:Y,rar:Y,doc:N,docx:N,pptx:S,ppt:S,ppsx:S,pps:S,xlsx:j,xls:j,csv:j,exe:r,app:r,sh:r,js:r,ts:r,py:r,c:r,cpp:r,h:r,hpp:r,cs:r,java:r,php:r,html:r,css:r,json:r,xml:r,sql:r,rs:r},v=g(((X=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:X.getAttribute("content"))||""),{themeClasses:s}=he(),oe=g("/drop-zone"),_=g([]),h=g(""),H=g([]),$=g({}),M=g({}),m=g({}),ae=async({file:e,onSuccess:o,onError:a,onProgress:p})=>{try{await le(e,p),H.value=H.value.filter(u=>u.uid!==e.uid),o(null,e)}catch(u){a(u)}},le=async(e,o)=>{var p,u,Z;const a=new FormData;a.append("file",e);try{const f=await V.post("/api/upload_file",a,{headers:{"X-HomeDock-CSRF-Token":v.value},onUploadProgress:F=>{if(o&&F.total){const pe=Math.round(F.loaded/F.total*100);o({percent:pe})}}});f.data.success||(d.error(f.data.error.value||"Upload failed"),console.error("Error during file upload:",f.data.error))}catch(f){V.isAxiosError(f)?((p=f.response)==null?void 0:p.status)===413?d.error("The selected file is larger than 1GB."):d.error(((Z=(u=f.response)==null?void 0:u.data)==null?void 0:Z.error_message)||`Unexpected error occurred: ${f.message}`):d.error("An unknown error occurred. Please try again."),console.error("Upload error:",f)}},se=async e=>{if(m.value[e]!==void 0&&m.value[e]<100&&m.value[e]>0){d.info(`Download for ${e} is already in progress.`);return}try{$.value[e]=!0,M.value[e]=!0,m.value[e]=0;const o=await V.get(`/api/download_file?file=${encodeURIComponent(e)}`,{headers:{"X-HomeDock-CSRF-Token":v.value},responseType:"blob",onDownloadProgress:u=>{if(u.total){const Z=Math.round(u.loaded*100/u.total);m.value[e]=Z}}}),a=window.URL.createObjectURL(new Blob([o.data])),p=document.createElement("a");p.href=a,p.setAttribute("download",e),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(a),setTimeout(()=>{$.value[e]=!1,M.value[e]=!1},1e3)}catch(o){console.error("Error downloading file:",o),d.error("Failed to download file. Please try again."),delete m.value[e],M.value[e]=!1,$.value[e]=!1}},re=async e=>{try{const o=await V.post("/api/delete_file",{file:e},{headers:{"X-HomeDock-CSRF-Token":v.value}});o.data.success?(d.success(o.data.message),D()):d.error(o.data.error||"Failed to delete file")}catch(o){console.error("Error deleting file:",o),d.error("Failed to delete file. Please try again.")}},D=async()=>{try{const e=await V.get("/api/get_files",{headers:{"X-HomeDock-CSRF-Token":v.value}});_.value=e.data.files||[]}catch(e){console.error("Error fetching files:",e),d.error("Failed to fetch files. Please try again.")}},ne=z(()=>h.value?_.value.filter(e=>e.name.toLowerCase().includes(h.value.toLowerCase())).map(e=>({value:e.name,label:e.name})):_.value.map(e=>({value:e.name,label:e.name}))),R=z(()=>h.value?_.value.filter(e=>e.name.toLowerCase().includes(h.value.toLowerCase())):_.value),ce=e=>{const o=typeof e=="object"?e.value:e;h.value=o.toString(),d.info(`Selected: ${o}`)},ie=e=>{e.file.status==="done"?d.success(`${e.file.name} uploaded successfully`):e.file.status==="error"&&d.error(`${e.file.name} upload failed.`)},q=z(()=>O(_.value.reduce((e,o)=>e+o.size,0)));function O(e){const o=typeof e=="number"?e:parseFloat(e);return o>=1e9?(o/1e9).toFixed(2)+" GBs":o>=1e6?(o/1e6).toFixed(2)+" MBs":o>=1e3?(o/1e3).toFixed(2)+" KBs":o+" B"}const de=()=>{D()};return me(()=>{D()}),(e,o)=>(w(),b(G,null,[l(fe),l(ve),l(ge),l(we),l(xe),n("div",Ee,[n("header",Re,[l(Ce)]),o[3]||(o[3]=n("div",{class:"h-24"},null,-1)),n("div",qe,[n("aside",Oe,[l(ke,{activePath:oe.value},null,8,["activePath"])]),n("div",{class:c([[t(s).back],"flex flex-col flex-1 pl-4 pt-3 pr-4 max-w-full overflow-x-hidden"])},[n("main",Xe,[l(Ve,{title:"Drop Zone",body:"Locally encrypted file vault",mdi_icon:t(U),id:"dropZoneUp",collapsible:!1},{default:L(()=>[l(t(De),{class:c([t(s).dropZoneDragHolder,t(s).scopeSelector]),fileList:H.value,"onUpdate:fileList":o[0]||(o[0]=a=>H.value=a),name:"file",multiple:!0,customRequest:ae,onChange:ie,onSuccess:de,showUploadList:!0},{default:L(()=>[n("div",Ge,[n("p",We,[l(Se,{icons:[t(U),t(je)],iconSize:64,interval:2e3,class:c([[t(s).dropZoneDragIcon],"text-4xl"])},null,8,["icons","class"])]),n("p",{class:c([[t(s).dropZoneDragUpText],"ant-upload-text px-4 text-balance"])},"Click or drag files to this area to upload and encrypt its content",2),n("p",{class:c([[t(s).dropZoneDragDownText],"ant-upload-hint px-4 text-balance"])},"Maximum file size allowed per file is 1GB",2),q.value!="0 B"?(w(),b("p",Je,[n("strong",{class:c([[t(s).dropZoneTotalSizeScope],"rounded-full px-4 py-0.5 ml-2"])},I(q.value)+" total",3)])):B("",!0)])]),_:1},8,["class","fileList"]),n("div",Ke,[l(t(ze),{value:h.value,"onUpdate:value":o[2]||(o[2]=a=>h.value=a),options:ne.value,"popup-class-name":`${t(s).scopeSelector} z-0`,class:"w-full mb-4",onSelect:ce},{default:L(()=>[l(t(Be),{value:h.value,"onUpdate:value":o[1]||(o[1]=a=>h.value=a),placeholder:"Search files...",class:c([[t(s).scopeSelector],"w-full text-sm"]),"enter-button":"Search"},{prefix:L(()=>[l(t(C),{icon:t(U),class:c([[t(s).dropZoneInputIcon],"mx-1"])},null,8,["icon","class"])]),_:1},8,["value","class"])]),_:1},8,["value","options","popup-class-name"]),n("div",null,[R.value.length===0?(w(),b("div",Qe,[l(t(Fe),{class:c([t(s).dropZoneEmptyText]),description:"No encrypted files found"},null,8,["class"])])):(w(),b("div",Ye,[(w(!0),b(G,null,ye(R.value,a=>(w(),b("div",{key:a.name,class:c([[t(s).dropZoneFileDisplayer],"relative flex flex-col items-center justify-center text-center border border-dashed rounded-lg p-4 shadow-sm hover:shadow-md group transition duration-300"])},[l(t(C),{icon:$.value[a.name]?t(Ae):t(Ze),class:c([[t(s).dropZoneLockIcon],"absolute right-2 top-2 transition duration-300 h-4 w-4 min-h-4 min-w-4"])},null,8,["icon","class"]),M.value[a.name]?(w(),W(t(C),{key:0,icon:t(Me),class:c([[t(s).dropZoneLockIcon],"absolute right-7 top-2 transition duration-300 animate-spin h-4 w-4 min-h-4 min-w-4"])},null,8,["icon","class"])):B("",!0),l(t(C),{icon:x(a.name),class:c([[t(s).dropZoneFileIcon],"h-12 w-12 min-h-12 min-w-12 transition duration-300 group-hover:scale-110"])},null,8,["icon","class"]),n("span",{class:c([[t(s).dropZoneFileText],"mt-2 text-xs break-words w-full overflow-hidden text-ellipsis"])},I(a.name),3),n("span",{class:c([[t(s).dropZoneFileSize],"px-2 rounded-full text-[10px] mt-1"])},I(O(a.size)),3),n("div",Ne,[m.value[a.name]!==void 0&&m.value[a.name]<100?(w(),W(t(Ie),{key:0,percent:m.value[a.name],class:c([[t(s).scopeSelector,"a-download-bottom-progress"],"h-1 rounded-full"]),"show-info":!1,size:2,status:"active"},null,8,["percent","class"])):B("",!0)]),n("div",et,[l(t(J),{type:"primary",onClick:p=>se(a.name),size:"small"},{default:L(()=>[l(t(C),{icon:t(Te)},null,8,["icon"])]),_:2},1032,["onClick"]),l(t(J),{type:"dashed",onClick:p=>re(a.name),size:"small",class:c([t(s).dropZoneDeleteIcon])},{default:L(()=>[l(t(C),{icon:t(Pe),class:"transition duration-300 group-hover:rotate-90"},null,8,["icon"])]),_:2},1032,["onClick","class"])])],2))),128))]))])])]),_:1},8,["mdi_icon"])]),l(He)],2)])])],64))}}),ot=_e(tt,[["__scopeId","data-v-5d91bfce"]]);function E(i){var y;const x=(y=document.getElementById(i))==null?void 0:y.textContent;if(x)try{const v=atob(x);return JSON.parse(v)}catch(v){console.error(`Error parsing data from element #${i}:`,v)}else console.error(`Element with ID '${i}' not found or is empty.`);return null}const A=E("data-theme"),ee=E("data-common"),te=E("data-settings");if(A&&ee&&te)try{const i=be(ot),x=$e();i.use(x),i.provide("data-theme",{selectedTheme:A.selected_theme,selectedBack:A.selected_back}),i.provide("data-common",{version:ee.version}),i.provide("data-settings",{userName:te.user_name});const y=Le();i.use(y),i.mount("#app-dropzone-root")}catch(i){console.error("Error initializing the Vue app:",i)}else console.error("Required data (data-theme or data-initial) is missing or invalid.");
