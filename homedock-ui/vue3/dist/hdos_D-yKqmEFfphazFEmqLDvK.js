import{j as q,r as d,q as X,B as ee,v as S,z as y,y as t,G as a,K as te,u as e,x as o,X as L,_ as M,w as Y,D as H,E as _,I as se,M as p,J as ae,T as Z,a3 as oe,a4 as ne,a5 as le,a6 as ie,F as re,H as ce,a2 as de,Y as ue,R as me,a8 as pe,a9 as fe}from"./hdos_B6Ty_gzilWX0fa7pUqpTY.js";import{d as R,a as B,A as K}from"./hdos_BbS_vWe5DNlDDYAPlKxdN.js";import{d as he,g as ve,e as ge}from"./hdos_BS0kew4dGSVYKVqeTa58H.js";import{d as we}from"./hdos_BnHh7eiIC22BYAb-ukhLa.js";import{d as z}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{d as _e}from"./hdos_R8ecdjzHoP22_qvuHhYVs.js";import{d as xe,j as ye,k as be,f as ke,h as Se,l as w}from"./hdos_CjC8AxJg29gr6ypjPAs77.js";import{S as Ie}from"./hdos_DNUaOhrg_WDcWjlrO8hNW.js";import{d as Te}from"./hdos_D7NRCijMj_Q9fS__axrEk.js";import{e as Ce}from"./hdos_n5uIfhmjoiH_zBkpnAQ2S.js";import{F as V}from"./hdos_DsgpX58NVw3p2BxakFr_4.js";import"./hdos_B0Q4T5TY8Cr80QgYhiCiU.js";import{I as E}from"./hdos_DCaY_hXp4R9v0op45qSJJ.js";import{B as $}from"./hdos_wTEBtsNB3cFjsmevMwjCC.js";import{S as Ae}from"./hdos_DhYeaP2z9fkotJCyRLX_q.js";import"./hdos_B5CuMUD57zRqP1nd8SZyM.js";import"./hdos_DxcBLz7QplWPZtvajGaFO.js";import"./hdos_Dxh6wZtl6tiJo7PLbHEkF.js";import"./hdos_BTXd_wq6lUFQEVE__0hzc.js";import"./hdos_BPjbe22nceknwbvb74MrE.js";import"./hdos_V775Yh7PJ9HEMTKQ03CUR.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";const Fe={width:24,height:24,body:'<path fill="currentColor" d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z"/>'},De={width:24,height:24,body:'<path fill="currentColor" d="M12 17.5c-3.8 0-7.2-2.1-8.8-5.5H1c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5h-2.2c-1.6 3.4-5 5.5-8.8 5.5Z"/>'},$e={width:24,height:24,body:'<path fill="currentColor" d="M12 8a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1m9 3c0 5.55-3.84 10.74-9 12c-5.16-1.26-9-6.45-9-12V5l9-4l9 4v6m-9-5a3 3 0 0 0-3 3c0 1.31.83 2.42 2 2.83V18h2v-2h2v-2h-2v-2.17c1.17-.41 2-1.52 2-2.83a3 3 0 0 0-3-3Z"/>'},je={id:"cloudScreen",class:"cloud-screen"},Be={class:"banshee-cloud"},Ve={target:"_blank",href:"https://banshee.pro"},Ee={class:"objectHead"},Le={class:"object"},He=300,qe=750,Me=2500,Ne=q({__name:"SplashScreen",setup(T){const l=d(null),r=d(null),b=d(null),{themeClasses:v}=X(),k=new Audio("/audio/splash.mp3"),I=(i,x,u)=>{setTimeout(()=>{i.classList.add(x)},u)},m=()=>{k.play().catch(()=>{});let i=He;l.value.querySelectorAll(".object").forEach(u=>{I(u,"filling",i),i+=qe}),setTimeout(()=>{l.value.classList.add("splashFadeOut"),l.value.addEventListener("transitionend",function u(n){n.propertyName==="opacity"&&(l.value.remove(),l.value.removeEventListener("transitionend",u))})},i+Me)},f=()=>{b.value.classList.add("shootUp"),r.value.style.opacity="0",m(),r.value.addEventListener("transitionend",()=>{r.value.style.display="none"},{once:!0}),localStorage.setItem("splashShown","true")};return ee(()=>{r.value=document.getElementById("cloudScreen"),b.value=document.getElementById("cloudImage"),localStorage.getItem("splashShown")?(l.value.style.display="none",r.value.style.display="none"):(l.value.style.display="block",r.value.style.display="flex")}),(i,x)=>(y(),S("div",null,[t("div",je,[t("div",{id:"cloudImage",class:"flex flex-col items-center justify-center",onClick:f},[a(te,{class:o([e(v).splashColor]),icons:[e(xe),e(Te)],interval:1e3,iconSize:96},null,8,["class","icons"]),t("div",{class:o([[e(v).splashColor],"cloudtext text-center"])},"Click to Start",2)]),t("span",Be,[t("a",Ve,[t("span",null,[a(L,{class:o([[e(v).compLogo],"optin-banshee will-change-transform"]),src:"/images/optin_banshee.png"},null,8,["class"])])])])]),t("div",{class:o([[e(v).cloudBack],"splash"]),ref_key:"splashElement",ref:l},[t("h1",Ee,[t("div",Le,[a(L,{class:o([[e(v).compLogo],"object-logo mr-1"]),src:"/images/logo_trans.svg"},null,8,["class"])]),t("div",{class:o([[e(v).afterSplash],"object object-text ml-1 h-8"])},"HomeDock OS",2)])],2)]))}}),Oe=M(Ne,[["__scopeId","data-v-bf037147"]]),Ue={class:"relative text-xs w-full h-8 z-30 text-white text-center flex items-center justify-center rounded-2xl bg-gradient-to-r from-[#6e0000] via-[#4b0092] to-[#1575bf] animate-rainbow py-2.5"},Pe={target:"_blank",href:"https://www.homedock.cloud",class:"flex items-center justify-center"},Re=q({__name:"CloudInstances",props:{isVisible:{type:Boolean}},emits:["update:isVisible"],setup(T,{emit:l}){const r=T,b=l,v=d(!1),k=()=>{const m=new Date().toISOString().split("T")[0];localStorage.setItem("cloudInstancePopShown",m),v.value=!1,b("update:isVisible",!1)},I=()=>{const m=localStorage.getItem("cloudInstancePopShown"),f=new Date;let i=!1;if(!m)i=!0;else{const x=new Date(m);(f.getTime()-x.getTime())/(1e3*3600*24)>7&&(i=!0)}i?(v.value=!0,b("update:isVisible",!0)):(v.value=!1,b("update:isVisible",!1))};return Y(()=>r.isVisible,m=>{m&&I()}),(m,f)=>(y(),H(Z,{name:"slide-down-fade"},{default:_(()=>[se(t("div",Ue,[t("span",{id:"CloudInstancesClose",class:"absolute right-4 text-white cursor-pointer",onClick:k},[a(e(p),{icon:e(ye),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"])]),t("a",Pe,[a(e(p),{icon:e(Ce),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"]),f[0]||(f[0]=t("span",null,"Check out our HomeDock OS Cloud Instances!",-1))])],512),[[ae,v.value]])]),_:1}))}}),Ke=M(Re,[["__scopeId","data-v-cced2b28"]]),ze={class:"flex justify-between items-start mb-6"},We={class:"flip-card-inner"},Xe={class:"flip-card-face flip-card-front"},Ye={key:0,class:"flex items-center justify-center"},Ze={key:1},Ge={class:"flip-card-face flip-card-back"},Je={class:"flex items-center gap-2 mb-2"},Qe={class:"flex gap-2 mt-4"},et={key:0,class:"flex items-center justify-center"},tt={key:1},st={href:"https://github.com/BansheeTech/HomeDockOS",target:"_blank",class:"flex items-center"},at={href:"https://www.homedock.cloud",target:"_blank",class:"flex items-center"},ot={href:"https://docs.homedock.cloud",target:"_blank",class:"flex items-center"},nt={href:"https://discord.gg/Zj3JCYsRWw",target:"_blank",class:"flex items-center"},lt=q({__name:"Login",setup(T){const l=d({username:"",password:""}),r=d(!1),b=()=>{r.value||(r.value=!0,setTimeout(()=>{r.value=!1},1e3))},v={username:[{required:!0,message:"Username is required",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"}]},k=d(!1),I=d(!1),m=d(!1),f=d(document.querySelector('meta[name="homedock_csrf_token"]')?.getAttribute("content")||null),i=d(void 0),x=d(null),u=d(!1),{themeClasses:n}=X(),F=d(!1),j=d(""),C=d(""),A=d(!1),D=d(!1),G=()=>{k.value=!k.value},N=()=>{I.value=!0},J=async()=>{if(!f.value){w.error("CSRF token missing.");return}if(!(m.value||u.value)){m.value=!0;try{const{publicKey:c,token:s}=await ve(f.value,!0);if(!c||!s)throw new Error("Public Key or token not found in response.");const h=ge(l.value.password,c),P=await B.post("/api/pcrypt",{token:s,password:h},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":f.value}});if(P.data.status!=="success"){w.error(P.data.message||"Error encrypting password.");return}const g=await B.post("/login",{token:s,username:l.value.username,homedock_csrf_token:f.value},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":f.value}});if(g.data.message?g.data.status==="success"?(w.success(g.data.message),u.value=!0,setTimeout(()=>{window.location.href=g.data.redirect_url},2500)):g.data.status==="2fa_required"?(F.value=!0,j.value=g.data.pending_token,w.info(g.data.message)):(g.data.remaining_attempts!==void 0&&(x.value=g.data.remaining_attempts),w.error(g.data.message),i.value="error"):w.error("Unexpected error, please contact support."),g.data.redirect_url){setTimeout(()=>{window.location.href=g.data.redirect_url},2500);return}}catch(c){if(c instanceof K)if(c.response&&c.response.data){const{message:s,redirect_url:h}=c.response.data;if(s&&(w.error(s),i.value="error"),c.response.data.remaining_attempts!==void 0&&(x.value=c.response.data.remaining_attempts),h){setTimeout(()=>{window.location.href=h},2500);return}}else w.error("There was an error while signing in.")}finally{m.value=!1}}};Y(x,()=>{const c=document.querySelector(".animated-attempts");c&&(c.classList.add("updated"),setTimeout(()=>c.classList.remove("updated"),300))});const Q=c=>{},O=async()=>{const c=C.value.length;if(c!==6&&c!==12){w.warning("Please enter a 6-digit code or backup code");return}A.value=!0;try{const s=await B.post("/api/pk2fa",{code:C.value,pending_token:j.value,homedock_csrf_token:f.value,trust_device:D.value},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":f.value}});s.data.status==="success"&&(w.success(s.data.message),u.value=!0,s.data.used_backup&&w.warning("You used a backup code. Consider generating new backup codes in Settings.",5),setTimeout(()=>{window.location.href=s.data.redirect_url},2500))}catch(s){s instanceof K&&s.response?.data&&(w.error(s.response.data.error||"Invalid verification code"),(s.response.status===429||s.response.status===403)&&U())}finally{A.value=!1}},U=()=>{F.value=!1,j.value="",C.value="",D.value=!1};return(c,s)=>(y(),S(me,null,[a(oe),a(ne),a(le),a(ie),a(Oe),a(Ie),t("div",{class:o([[e(n).back],"flex items-center justify-center min-h-screen login-wrapper relative p-3 overflow-hidden"])},[t("div",{class:o([{bounce:r.value},"w-full max-w-xl"])},[t("div",{class:o([[e(n).scopeSelector,e(n).form],"group px-6 py-12 lg:px-12 rounded-3xl shadow-lg w-full relative z-10 anim-pusher mb-2"])},[t("div",ze,[a(L,{src:"/images/logo_trans.svg",alt:"Logo",class:o([[e(n).logo],"h-20 hd-top-form-logo animate-pulse"])},null,8,["class"])]),t("div",{class:o(["flip-card-container",{flipped:F.value}])},[t("div",We,[t("div",Xe,[t("h2",{class:o([[e(n).mainText],"text-xl font-normal mb-2"])},"Welcome to HomeDock OS",2),t("p",{class:o([[e(n).subText],"font-light mb-6 leading-3"])},"Sign in to continue",2),a(e(V),{layout:"vertical",model:l.value,rules:v,onFinish:J,onFinishFailed:Q},{default:_(()=>[a(e(V).Item,{name:"username"},{default:_(()=>[s[5]||(s[5]=t("label",{class:"text-gray-300",for:"username"},"Username",-1)),a(e(E),{class:o([[e(n).scopeSelector,e(n).loginFormInput],"h-10 group inputUser"]),autocomplete:"username",value:l.value.username,"onUpdate:value":s[0]||(s[0]=h=>l.value.username=h),placeholder:"Username...",maxlength:30,status:i.value,required:"",onFocus:N},{prefix:_(()=>[a(e(p),{icon:e(we),class:o(["mr-0.5 transition duration-300",[e(n).formIcon,{"text-gray-300 group-hover:text-blue-500":i.value!=="error","text-red-500":i.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),_:1},8,["class","value","status"])]),_:1}),s[8]||(s[8]=t("div",{class:"mt-2"},null,-1)),a(e(V).Item,{name:""},{default:_(()=>[s[6]||(s[6]=t("label",{class:"text-gray-300",for:"password"},"Password",-1)),a(e(E),{class:o([[e(n).scopeSelector,e(n).loginFormInput],"h-10 group"]),autocomplete:"current-password",value:l.value.password,"onUpdate:value":s[1]||(s[1]=h=>l.value.password=h),type:k.value?"text":"password",placeholder:"••••••••",status:i.value,maxlength:30,required:"",onFocus:N},{prefix:_(()=>[a(e(p),{icon:e(z),class:o(["mr-0.5 transition duration-300",[e(n).formIcon,{"text-gray-300 group-hover:text-blue-500":i.value!=="error","text-red-500":i.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),suffix:_(()=>[a(e($),{class:o(["mb-1 transition duration-300",{"text-gray-300 group-hover:text-blue-500":i.value!=="error","text-red-500":i.value==="error"}]),type:"link",onClick:G,icon:""},{default:_(()=>[k.value?(y(),H(e(p),{key:0,icon:e(Fe),class:"mt-1"},null,8,["icon"])):(y(),H(e(p),{key:1,icon:e(De),class:"mt-1"},null,8,["icon"]))]),_:1},8,["class"])]),_:1},8,["class","value","type","status"])]),_:1}),a(e($),{id:"main_button_login",onClick:b,class:o([[e(n).loginPrimaryButton,{clicked:u.value}],"w-full flex items-center justify-center h-14 mt-8 relative overflow-hidden border-0"]),loading:m.value,htmlType:"submit",disabled:m.value||u.value},{default:_(()=>[u.value?(y(),S("span",Ze,[a(e(p),{icon:e(R),class:"text-white animate-spin",width:"26",height:"26"},null,8,["icon"])])):(y(),S("div",Ye,[a(e(p),{icon:e(z),class:"text-white",width:"16",height:"16"},null,8,["icon"]),s[7]||(s[7]=t("span",{class:"ml-1"},"Sign In",-1))]))]),_:1},8,["class","loading","disabled"]),a(Z,{name:"slide-down-error"},{default:_(()=>[x.value!==null?(y(),S("p",{key:0,class:o([[e(n).subText,"animated-attempts"],"text-xs mt-2"])},"Remaining attempts: "+ce(x.value),3)):re("",!0)]),_:1})]),_:1},8,["model"])]),t("div",Ge,[t("h2",{class:o([[e(n).mainText],"text-xl font-normal mb-2"])},"Welcome to HomeDock OS",2),t("p",{class:o([[e(n).subText],"font-light mb-4 leading-3"])},"Two-factor verification",2),t("div",Je,[a(e(p),{icon:e($e),class:o([e(n).mainText]),width:"24",height:"24"},null,8,["icon","class"]),t("h3",{class:o([[e(n).mainText],"text-lg font-medium"])},"Two-Factor Authentication",2)]),t("p",{class:o([[e(n).subText],"text-sm mb-4"])},"Enter the 6-digit code from your authenticator app or a backup code.",2),a(e(E),{class:o([[e(n).scopeSelector,e(n).loginFormInput],"h-14 text-center text-xl tracking-wide mb-4"]),value:C.value,"onUpdate:value":s[2]||(s[2]=h=>C.value=h),placeholder:"Ex: 123456",maxlength:12,autocomplete:"one-time-code",onKeyup:de(O,["enter"])},null,8,["class","value"]),t("div",{class:o([[e(n).subText],"flex items-center gap-2 select-none mb-2"])},[a(e(Ae),{checked:D.value,"onUpdate:checked":s[3]||(s[3]=h=>D.value=h),size:"small"},null,8,["checked"]),s[9]||(s[9]=t("span",{class:"text-sm"},"Don't ask on this device for 30 days",-1))],2),t("div",Qe,[a(e($),{class:o([[e(n).loginSecondaryButton],"flex items-center h-14"]),onClick:U,disabled:A.value||u.value},{default:_(()=>[a(e(p),{icon:e(he),width:"16",height:"16",class:"mr-1"},null,8,["icon"]),s[10]||(s[10]=ue(" Back ",-1))]),_:1},8,["class","disabled"]),a(e($),{id:"main_button_login_2fa",class:o(["flex-1 h-14 border-0",[e(n).loginPrimaryButton,{clicked:u.value}]]),onClick:O,disabled:A.value||u.value},{default:_(()=>[!u.value&&!A.value?(y(),S("div",et,[a(e(p),{icon:e(be),class:"text-white",width:"16",height:"16"},null,8,["icon"]),s[11]||(s[11]=t("span",{class:"ml-1"},"Verify",-1))])):(y(),S("span",tt,[a(e(p),{icon:e(R),class:"text-white animate-spin",width:"26",height:"26"},null,8,["icon"])]))]),_:1},8,["class","disabled"])]),t("p",{class:o([[e(n).subText],"text-xs mt-2 text-center opacity-70"])},"Lost your device? Use a backup code instead.",2)])])],2),t("div",{class:o([[e(n).loginSocialsCont,{"opacity-0 pointer-events-none":F.value}],"flex items-center space-x-2 transition-all duration-300 ease-in-out transform translate-y-5 w-fit px-1.5 group-hover:px-10 py-1 rounded-full mx-auto"])},[t("a",st,[a(e(p),{class:o([[e(n).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(ke)},null,8,["class","icon"])]),t("a",at,[a(e(p),{class:o([[e(n).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(_e)},null,8,["class","icon"])]),t("a",ot,[a(e(p),{class:o([[e(n).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(Se)},null,8,["class","icon"])]),t("a",nt,[(y(),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:o([[e(n).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),viewBox:"0 0 24 24"},[...s[12]||(s[12]=[t("rect",{width:"24",height:"24",fill:"none"},null,-1),t("path",{fill:"currentColor",d:"M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.1.1 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.1 16.1 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02M8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12m6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12"},null,-1)])],2))])],2)],2),a(Ke,{isVisible:I.value,"onUpdate:isVisible":s[4]||(s[4]=h=>I.value=h)},null,8,["isVisible"])],2)],2)],64))}}),it=M(lt,[["__scopeId","data-v-faed4edf"]]),W=document.getElementById("data-theme")?.textContent;if(W){const T=atob(W);let l;try{l=JSON.parse(T);const r=pe(it);r.provide("data-theme",{selectedTheme:l.selected_theme,selectedBack:l.selected_back});const b=fe();r.use(b),r.mount("#app-login-root")}catch(r){console.error("Error parsing data-theme objects:",r)}}else console.error("The element 'data-theme' wasn't found or it's empty.");
