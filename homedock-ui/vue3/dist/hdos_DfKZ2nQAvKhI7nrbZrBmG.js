import{d as T,u as V,r as p,o as z,K as D,c as f,a as o,b as l,e as s,T as M,i as I,h as A,m as v,f as e,I as w,O as U,n as m,g as F,w as N,z as Y,p as j,_ as R,t as P,y as Z,F as J,A as K,k as G,l as Q,N as ee,q as te,s as se}from"./hdos_asf1A1hq5P3qtEqzLGgW_.js";import{d as O,a as ae}from"./hdos_DaRSEFpqf81ZuDgc4Rzsj.js";import{S as le}from"./hdos_BVaxiia8jnb0DylMRsj2_.js";import{d as ne}from"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import{d as oe}from"./hdos_Cz8Dwn1iOWea_GVqOHEOb.js";import{d as re}from"./hdos_BW-i5UGMkVNRYrcW_CmuW.js";import{d as ie}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{A as ce}from"./hdos_LdDBTFvCiUaOu5Vgr90G4.js";const q={width:24,height:24,body:'<path fill="currentColor" d="M2 5.27L3.28 4L20 20.72L18.73 22l-4.83-4.83l-2.61 2.61a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l2.62-2.6l-1.62-1.61c-.01.24-.11.49-.29.68c-.39.39-1.03.39-1.42 0A4.973 4.973 0 0 1 7.72 11L2 5.27m10.71-1.05a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.33 3.33l-1.41-1.42l3.33-3.33m.7 4.95c.39-.39 1.03-.39 1.42 0a4.999 4.999 0 0 1 1.23 5.06l-1.78-1.77c-.05-.68-.34-1.35-.87-1.87a.973.973 0 0 1 0-1.42Z"/>'},ue={width:24,height:24,body:'<path fill="currentColor" d="M10.76 8.69a.76.76 0 0 0-.76.76V20.9c0 .42.34.76.76.76c.19 0 .35-.06.48-.16l1.91-1.55l1.66 3.62c.13.27.4.43.69.43c.11 0 .22 0 .33-.08l2.76-1.28c.38-.18.56-.64.36-1.01L17.28 18l2.41-.45a.88.88 0 0 0 .43-.26c.27-.32.23-.79-.12-1.08l-8.74-7.35l-.01.01a.756.756 0 0 0-.49-.18M15 10V8h5v2h-5m-1.17-5.24l2.83-2.83l1.41 1.41l-2.83 2.83l-1.41-1.41M10 0h2v5h-2V0M3.93 14.66l2.83-2.83l1.41 1.41l-2.83 2.83l-1.41-1.41m0-11.32l1.41-1.41l2.83 2.83l-1.41 1.41l-2.83-2.83M7 10H2V8h5v2"/>'},de={class:"fixed inset-0 flex items-center justify-center z-50"},pe={class:"relative flex items-center justify-center w-56 h-56"},me={class:"flex items-center justify-center backdrop-blur-xl rounded-full w-40 h-40 p-10 relative z-[40] bg-slate-500/5"},fe=100,ve=T({__name:"OrbitLoader",props:{isChecking:Boolean,isSuccess:Boolean,isError:Boolean,isHttps:Boolean},setup(t){const{themeClasses:n}=V(),c=p(null);let x;const r=p(0),y=p(0);let h=0,i=0,S;const _=()=>{h=Math.random()*40-20,i=Math.random()*40-20},C=()=>{r.value+=(h-r.value)*.1,y.value+=(i-y.value)*.1,requestAnimationFrame(C)},b=[],k=(a,d,g)=>{for(let u=0;u<fe;u++)b.push({angle:Math.random()*2*Math.PI,radius:80+Math.random()*20,speed:.005+Math.random()*.03,size:.5+Math.random()*2})},$=(a,d,g)=>{a.clearRect(0,0,a.canvas.width,a.canvas.height),b.forEach(u=>{const E=d+Math.cos(u.angle)*u.radius,X=g+Math.sin(u.angle)*u.radius;a.beginPath(),a.arc(E,X,u.size,0,2*Math.PI),a.fillStyle="rgba(148, 163, 184, 0.7)",a.fill(),u.angle+=u.speed}),x=requestAnimationFrame(()=>$(a,d,g))};return z(()=>{const a=c.value,d=a.getContext("2d");a.width=256,a.height=256;const g=a.width/2,u=a.height/2;k(),$(d,g,u)}),D(()=>{cancelAnimationFrame(x)}),z(()=>{S=setInterval(_,500),C()}),D(()=>{clearInterval(S)}),(a,d)=>(o(),f("div",de,[l("div",pe,[l("canvas",{ref_key:"canvas",ref:c,class:"absolute inset-0 w-full h-full pointer-events-none z-50"},null,512),l("div",me,[s(M,{name:"fade-scale",mode:"out-in"},{default:I(()=>[t.isChecking?(o(),A(e(w),{icon:e(ne),class:m([[e(n).appLoadingIcon],"text-6xl"]),style:U({transform:`translate(${r.value}px, ${y.value}px)`}),key:"loading"},null,8,["icon","class","style"])):t.isSuccess?(o(),A(e(w),{icon:e(oe),class:m([[e(n).appLoadingIcon],"text-6xl"]),key:"success"},null,8,["icon","class"])):t.isError?(o(),A(ce,{icons:[e(re),e(q)],interval:1500,class:m([e(n).appLoadingIcon]),"icon-size":60,key:"error"},null,8,["icons","class"])):v("",!0)]),_:1}),s(M,{name:"https",mode:"out-in"},{default:I(()=>[t.isHttps?(o(),f("div",{class:m([[e(n).sslAdvisorBack],"px-4 py-1 absolute mt-52 rounded-full flex items-center"]),key:"https"},[s(e(w),{icon:e(ie),class:m([[e(n).sslAdvsisorIcon],"text-sm mr-1"])},null,8,["icon","class"]),l("span",{class:m([[e(n).sslAdvsisorIcon],"text-sm ml>1"])},"HTTPS",2),s(e(w),{icon:e(O),class:m([[e(n).sslAdvsisorIcon],"text-sm animate-spin ml-1"])},null,8,["icon","class"])],2)):v("",!0)]),_:1})])])]))}}),he=F(ve,[["__scopeId","data-v-8c9d9177"]]),ge={width:24,height:24,body:'<path fill="currentColor" d="M13 19h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-7v2M4 3h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m5 4h1V5H9v2m0 8h1v-2H9v2M5 5v2h2V5H5m0 8v2h2v-2H5Z"/>'},xe={class:"fixed bottom-14 left-0 right-0 flex justify-center text-xs z-50"},ye={key:0,class:"flex items-center space-x-2 animate-bounce"},_e={class:"relative"},be={key:0,class:"absolute inset-1 animate-ping"},ke={class:"relative p-2 bg-white rounded-xl shadow-lg flex items-center justify-center"},we={key:0,class:"relative"},Se={key:0,class:"absolute inset-1 animate-ping"},$e={class:"flex items-center space-x-2"},Me={class:"font-semibold"},Ie={class:"flex items-center space-x-2"},Ce={key:0,class:"flex items-center space-x-1"},Ae={class:"font-semibold"},Ee=T({__name:"StatusFooter",props:{isSuccess:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isHttps:{type:Boolean,default:!1},statusMessage:{type:String,default:"Initializing..."},port:{type:String,default:""},appSlug:{type:String,default:""}},setup(t){const{themeClasses:n}=V(),c=p(!1),x=p(!1),r=t;N(()=>r.appSlug,()=>{c.value=!1}),z(()=>{if(setTimeout(()=>{x.value=!r.isError},50),r.appSlug){const h=new Image;h.onload=()=>{c.value=!0},h.onerror=()=>{c.value=!1},h.src=`/images/docker-icons/${r.appSlug}.jpg`}}),N(()=>r.isError,h=>{x.value=!h});const y=Y(()=>r.isSuccess?"bg-green-600":r.isError?"bg-red-600":"bg-blue-600 animate-pulse");return(h,i)=>(o(),f(j,null,[s(M,{name:"logo-fade-slide",appear:""},{default:I(()=>[l("div",xe,[s(M,{name:"fade-bounce"},{default:I(()=>[x.value?(o(),f("div",ye,[l("div",_e,[t.isSuccess?(o(),f("div",be,[...i[1]||(i[1]=[l("div",{class:"w-full h-full bg-green-400 rounded-2xl opacity-75"},null,-1)])])):v("",!0),l("div",ke,[s(R,{draggable:"false",class:"w-9 h-9",src:"/images/logo_trans.svg"})])]),s(M,{name:"icon-slide-up",appear:""},{default:I(()=>[t.appSlug&&c.value?(o(),f("div",we,[t.isSuccess?(o(),f("div",Se,[...i[2]||(i[2]=[l("div",{class:"w-full h-full bg-green-400 rounded-2xl opacity-75"},null,-1)])])):v("",!0),s(R,{draggable:"false",class:"relative w-[3.25rem] h-[3.25rem] rounded-xl object-cover shadow-lg",src:`docker-icons/${t.appSlug}.jpg`,alt:`${t.appSlug} icon`,onError:i[0]||(i[0]=S=>c.value=!1)},null,8,["src","alt"])])):v("",!0)]),_:1})])):v("",!0)]),_:1})])]),_:1}),l("div",{class:m([[e(n).statusBarAppScope],"fixed bottom-0 left-0 right-0 backdrop-blur-md h-8 flex items-center justify-between px-4 text-xs border-t z-50"])},[l("div",$e,[l("div",{class:m(["min-h-1.5 min-w-1.5 rounded-full",y.value])},null,2),l("span",Me,P(t.statusMessage),1)]),l("div",Ie,[t.port?(o(),f("div",Ce,[s(e(w),{icon:e(ge),class:"text-xs min-h-3 min-w-3"},null,8,["icon"]),l("span",Ae,"Port: "+P(t.port),1)])):v("",!0)])],2)],64))}}),He=F(Ee,[["__scopeId","data-v-c521eb64"]]),ze={class:"flex items-center justify-center text-white"},B=10,Be=T({__name:"App",setup(t){const{themeClasses:n}=V(),c=p(document.querySelector('meta[name="homedock_csrf_token"]')?.getAttribute("content")||""),x=Z("data-port");if(!x)throw new Error("Settings data is missing!");const{selectedPort:r,selectedPath:y,appSlug:h}=x,i=p(!0),S=p(!1),_=p(!1),C=p(!1),b=p(null),k=p("Initializing...");let $=0;const a=async()=>{if(!r){i.value=!1,_.value=!0,b.value="Not valid port specified",k.value="Invalid app port";return}k.value="Checking app availability...";try{const d=await ae.post("/api/check-port",{port:r,subpath:y},{headers:{"X-HomeDock-CSRF-Token":c.value}});if(d.data.available){const g=d.data.url.toLowerCase();C.value=g.startsWith("https://"),i.value=!1,S.value=!0,b.value=null,k.value="Connection established",setTimeout(()=>{const u=d.data.url+(y?`/${y}`:""),E=window.open(u,"_self");E&&(E.opener=null)},1500);return}else throw new Error("Service not available.")}catch{$++,b.value=`Retrying ${$}/${B}`,k.value=`Retrying ${$}/${B}`,$<B?setTimeout(a,2500):(i.value=!1,_.value=!0,b.value=`App not available on ${r}`,k.value="Application unavailable")}};return z(()=>{a()}),(d,g)=>(o(),f(j,null,[s(J),s(K),s(G),s(Q),s(ee),s(le,{numLines:12,"line-width":3,amplitude:600,"points-per-line":2}),l("div",{class:m([[e(n).back],"flex flex-col items-center justify-center relative p-3 overflow-hidden"])},[l("div",ze,[s(he,{isChecking:i.value,isSuccess:S.value,isError:_.value,isHttps:C.value},null,8,["isChecking","isSuccess","isError","isHttps"])]),s(M,{name:"fade-slide",mode:"out-in"},{default:I(()=>[b.value?(o(),f("p",{key:0,class:m([[e(n).appErrorMessage],"flex items-center text-xs mt-4 text-center px-3 py-1 rounded-full z-10"])},[i.value?(o(),A(e(w),{key:0,icon:e(O),class:"text-xs mr-1 animate-spin"},null,8,["icon"])):v("",!0),_.value?(o(),A(e(w),{key:1,icon:e(q),class:"text-xs mr-1"},null,8,["icon"])):v("",!0),l("span",null,P(b.value),1)],2)):v("",!0)]),_:1}),s(M,{name:"fade-slide",mode:"out-in"},{default:I(()=>[_.value?(o(),f(j,{key:0},[_.value?(o(),f("a",{key:0,target:"_blank",href:"https://docs.homedock.cloud/troubleshooting/app-not-available/",class:m([[e(n).appDocsMessage],"flex items-center text-xs mt-2 text-center px-3 py-1 rounded-full z-50 transition duration-300"]),style:{position:"relative","pointer-events":"auto"}},[s(e(w),{icon:e(ue),class:"text-xs mr-1"},null,8,["icon"]),g[0]||(g[0]=l("span",null,"Why is this app not loading?",-1))],2)):v("",!0)],64)):v("",!0)]),_:1})],2),s(He,{isSuccess:S.value,isError:_.value,statusMessage:k.value,port:String(e(r)),appSlug:e(h)},null,8,["isSuccess","isError","statusMessage","port","appSlug"])],64))}}),Le=F(Be,[["__scopeId","data-v-f5b7ac3f"]]);function W(t){const n=document.getElementById(t)?.textContent;if(n)try{const c=atob(n);return JSON.parse(c)}catch(c){console.error(`Error parsing data from element #${t}:`,c)}else console.error(`Element with ID '${t}' not found or is empty.`);return null}const L=W("data-theme"),H=W("data-port");if(L&&H)try{const t=te(Le);t.provide("data-theme",{selectedTheme:L.selected_theme,selectedBack:L.selected_back}),t.provide("data-port",{selectedPort:H.selected_port,selectedPath:H.selected_path,appSlug:H.selected_app_slug});const n=se();t.use(n),t.mount("#app-app-root")}catch(t){console.error("Error initializing the Vue app:",t)}else console.error("Required data (data-theme or data-initial) is missing or invalid.");
