import{_ as U,g as V,a1 as K,ae as h,u as q,c as G}from"./hdos_D24I8Ewnx4pcuVD2m8YP9.js";import{aU as J,af as Q,aS as X,bF as Y,aO as Z,aW as y,I as C,M as I,b7 as ee,aD as L,az as w,g as te,a0 as O,q as oe,bE as ne,as as ae}from"./hdos_C_SZsOMSIrMtpKxCvYKSt.js";import{w as S,i as re}from"./hdos_Cuccj8xUVyEDTvA_fcq1n.js";function u(e){const t=typeof e=="function"?e():e,o=J(t);function n(i){o.value=i}return[o,n]}function be(e){const t=Symbol("contextKey");return{useProvide:(i,c)=>{const l=X({});return Z(t,l),Y(()=>{U(l,i,c||{})}),l},useInject:()=>Q(t,e)||{}}}const se=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},ie=V("Wave",e=>[se(e)]);function le(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function b(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&le(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ce(e){const{borderTopColor:t,borderColor:o,backgroundColor:n}=getComputedStyle(e);return b(t)?t:b(o)?o:b(n)?n:null}function g(e){return Number.isNaN(e)?0:e}const ue=I({props:{target:K(),className:String},setup(e){const t=ee(null),[o,n]=u(null),[i,c]=u([]),[l,m]=u(0),[d,p]=u(0),[a,v]=u(0),[$,j]=u(0),[k,B]=u(!1);function x(){const{target:r}=e,s=getComputedStyle(r);n(ce(r));const R=s.position==="static",{borderLeftWidth:z,borderTopWidth:F}=s;m(R?r.offsetLeft:g(-parseFloat(z))),p(R?r.offsetTop:g(-parseFloat(F))),v(r.offsetWidth),j(r.offsetHeight);const{borderTopLeftRadius:_,borderTopRightRadius:D,borderBottomLeftRadius:M,borderBottomRightRadius:A}=s;c([_,D,A,M].map(H=>g(parseFloat(H))))}let f,W,E;const T=()=>{clearTimeout(E),S.cancel(W),f?.disconnect()},N=()=>{var r;const s=(r=t.value)===null||r===void 0?void 0:r.parentElement;s&&(y(null,s),s.parentElement&&s.parentElement.removeChild(s))};L(()=>{T(),E=setTimeout(()=>{N()},5e3);const{target:r}=e;r&&(W=S(()=>{x(),B(!0)}),typeof ResizeObserver<"u"&&(f=new ResizeObserver(x),f.observe(r)))}),w(()=>{T()});const P=r=>{r.propertyName==="opacity"&&N()};return()=>{if(!k.value)return null;const r={left:`${l.value}px`,top:`${d.value}px`,width:`${a.value}px`,height:`${$.value}px`,borderRadius:i.value.map(s=>`${s}px`).join(" ")};return o&&(r["--wave-color"]=o.value),C(te,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[C("div",{ref:t,class:e.className,style:r,onTransitionend:P},null)]})}}});function de(e,t){const o=document.createElement("div");return o.style.position="absolute",o.style.left="0px",o.style.top="0px",e?.insertBefore(o,e?.firstChild),y(C(ue,{target:e,className:t},null),o),()=>{y(null,o),o.parentElement&&o.parentElement.removeChild(o)}}function ve(e,t){const o=O();let n;function i(){var c;const l=h(o);n?.(),!(!((c=t?.value)===null||c===void 0)&&c.disabled||!l)&&(n=de(l,e.value))}return w(()=>{n?.()}),i}const ge=I({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:o}=t;const n=O(),{prefixCls:i,wave:c}=q("wave",e),[,l]=ie(i),m=ve(oe(()=>G(i.value,l.value)),c);let d;const p=()=>{h(n).removeEventListener("click",d,!0)};return L(()=>{ne(()=>e.disabled,()=>{p(),ae(()=>{const a=h(n);a?.removeEventListener("click",d,!0),!(!a||a.nodeType!==1||e.disabled)&&(d=v=>{v.target.tagName==="INPUT"||!re(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||m()},a.addEventListener("click",d,!0))})},{immediate:!0,flush:"post"})}),w(()=>{p()}),()=>{var a;return(a=o.default)===null||a===void 0?void 0:a.call(o)[0]}}});export{ge as W,be as c,u};
