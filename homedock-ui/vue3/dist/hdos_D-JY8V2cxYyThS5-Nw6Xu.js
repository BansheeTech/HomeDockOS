import{d as ne,r as f,u as ce,z as M,o as ie,c as _,a as v,e as l,b as n,F as de,A as pe,k as ue,l as he,N as me,n as c,f as o,i as b,m as R,t as F,I as C,p as q,O as fe,h as ve,g as ge,q as xe,s as ye}from"./hdos_CIc2n1DLsrRO8n6ckJ7fC.js";import{N as we,_ as _e,f as D,C as be,F as Ce,g as Le}from"./hdos_DuJX_mMCVRyLOGZn5BNff.js";import{d as ke,a as k}from"./hdos_DZUKIvxDT3Fqh7rzmD7rn.js";import{d as Ve}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{A as He}from"./hdos_B_N3xH2Q9UCbWybKNk4VO.js";import{a as Ze}from"./hdos_HB5x-fcFlmjB3UAYCKDfy.js";import{E as Se,B as N}from"./hdos_EnsjvVYJImcPHvxQexGtX.js";import{a as p}from"./hdos_DadiNNJMC_OA8QwbJELQf.js";import{A as $e}from"./hdos_DGzyl_J1d9QBFU-T6HdbJ.js";import{a as Me}from"./hdos_C_4dtDQEknTaojJIg8yMT.js";import"./hdos_mLbhbaLALeOd8sztENRgu.js";import"./hdos_D6-XlEtGdUWrcdOe4mzvB.js";import"./hdos_DuTGV_oDpdzXebz1M857D.js";import"./hdos_CutTSUJX5ow7xHHV4oWOk.js";import"./hdos_BFPOUbwrgUVzjI_2g6ru4.js";import"./hdos_uCGFXcRKWSXS79DJcb_rZ.js";import"./hdos_DTouZyXcNPjlO-nYXuSd0.js";import"./hdos_BvEG8A6naDrpzNdieGPiz.js";import"./hdos_DjU5oz2wa4Yog7sRjtICP.js";const O={width:24,height:24,body:'<path fill="currentColor" d="M10 4H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2Z"/>'},z={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m9 16v-2H6v2h9m3-4v-2H6v2h12Z"/>'},L={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m0 18h12v-8l-4 4l-2-2l-6 6M8 9a2 2 0 0 0-2 2a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2Z"/>'},X={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m11 17v-6l-3 2.2V13H7v6h7v-2.2l3 2.2Z"/>'},B={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 11h-2v5a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2c.4 0 .7.1 1 .3V11h3v2m0-4V3.5L18.5 9H13Z"/>'},G={width:24,height:24,body:'<path fill="currentColor" d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-2 6h-2v2h2v2h-2v2h-2v-2h2v-2h-2v-2h2v-2h-2V8h2v2h2v2Z"/>'},I={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.8 18H14l-2-3.4l-2 3.4H8.2l2.9-4.5L8.2 11H10l2 3.4l2-3.4h1.8l-2.9 4.5l2.9 4.5M13 9V3.5L18.5 9H13Z"/>'},H={width:24,height:24,body:'<path fill="currentColor" d="M12.6 12.3h-2v3.2h2.1c.6 0 .9-.2 1.2-.5c.3-.3.4-.6.4-1.1c0-.5-.1-.8-.4-1.1c-.3-.3-.7-.5-1.3-.5M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.2 14c-.6.5-1.1.7-2.4.7h-2.2V20H9v-9h3.8c1.3 0 1.9.3 2.4.8c.6.6.8 1.2.8 2.1c0 .9-.2 1.6-.8 2.1M13 9V3.5L18.5 9H13Z"/>'},W={width:24,height:24,body:'<path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m1.2 18h-1.4L12 13.2L10.2 20H8.8l-2.2-9h1.5l1.4 6.8l1.8-6.8h1.3l1.8 6.8l1.4-6.8h1.5l-2.1 9M13 9V3.5L18.5 9H13Z"/>'},s={width:24,height:24,body:'<path fill="currentColor" d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74l1.42-1.41l-2.33-2.33l2.33-2.33l-1.42-1.41l-3.74 3.74m11.16 0l-3.74-3.74l-1.42 1.41l2.33 2.33l-2.33 2.33l1.42 1.41l3.74-3.74Z"/>'},Fe={width:24,height:24,body:'<path fill="currentColor" d="M13 9V3.5L18.5 9M6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6Z"/>'},De={width:24,height:24,body:'<path fill="currentColor" d="M10 4h4v9l3.5-3.5l2.42 2.42L12 19.84l-7.92-7.92L6.5 9.5L10 13V4Z"/>'},ze={width:24,height:24,body:'<path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>'},Be={width:24,height:24,body:'<path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5l-9-4m0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6 0 1.2.6 1.2 1.3v3.5c0 .6-.6 1.2-1.3 1.2H9.2c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2V9.5C9.2 8.1 10.6 7 12 7m0 1.2c-.8 0-1.5.5-1.5 1.3V11h3V9.5c0-.8-.7-1.3-1.5-1.3Z"/>'},Ie={width:24,height:24,body:'<path fill="currentColor" d="M16 8c1.1 0 2 .9 2 2v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V10c0-1.1.9-2 2-2h9V6c0-1.7-1.3-3-3-3S7 4.3 7 6H5c0-2.8 2.2-5 5-5s5 2.2 5 5v2h1m-6 9c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2m12-4h-2V7h2v6m0 4h-2v-2h2v2Z"/>'},Ee={class:"flex flex-col min-h-screen"},Te={class:"top-0 left-0 z-10"},Ue={class:"flex flex-1 overflow-hidden"},Ae={class:"hidden lg:block relative"},je={class:"flex-1 overflow-auto max-w-full holder"},Pe={class:"flex items-center align-center justify-center flex-col"},Re={class:"ant-upload-drag-icon"},qe={key:0,class:"text-xs mt-2"},Ne={class:"mt-4"},Oe={key:0,class:"flex justify-center items-center"},Xe={key:1,class:"grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] lg:grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-4"},Ge={class:"mt-2 flex space-x-2"},We=ne({__name:"Dropzone",setup(i){var P;const g=e=>{var a;if(e.endsWith("/"))return O;const t=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return x[t||"unknown"]||Fe},x={folder:O,txt:z,md:z,pdf:z,png:L,jpg:L,jpeg:L,gif:L,psd:L,webp:L,mp4:X,mkv:X,mp3:B,wav:B,flac:B,zip:G,rar:G,doc:W,docx:W,pptx:H,ppt:H,ppsx:H,pps:H,xlsx:I,xls:I,csv:I,exe:s,app:s,sh:s,js:s,ts:s,py:s,c:s,cpp:s,h:s,hpp:s,cs:s,java:s,php:s,html:s,css:s,json:s,xml:s,sql:s,rs:s},m=f(((P=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:P.getAttribute("content"))||""),{themeClasses:r}=ce(),Q=f("/drop-zone"),y=f([]),u=f(""),V=f([]),Z=f({}),S=f({}),Y=async e=>{const{file:t,onSuccess:a,onError:d}=e;try{await ee(t),V.value=V.value.filter(w=>w.uid!==t.uid),a(null,t)}catch(w){d(w)}},ee=async e=>{var a,d,w;const t=new FormData;t.append("file",e);try{const h=await k.post("/api/upload_file",t,{headers:{"X-HomeDock-CSRF-Token":m.value}});h.data.success||(p.error(h.data.error.value||"Upload failed"),console.error("Error during file upload:",h.data.error))}catch(h){k.isAxiosError(h)?((a=h.response)==null?void 0:a.status)===413?p.error("The selected file is larger than 1GB."):p.error(((w=(d=h.response)==null?void 0:d.data)==null?void 0:w.error_message)||`Unexpected error occurred: ${h.message}`):p.error("An unknown error occurred. Please try again."),console.error("Upload error:",h)}},te=async e=>{try{Z.value[e]=!0,S.value[e]=!0;const t=await k.get(`/api/download_file?file=${encodeURIComponent(e)}`,{headers:{"X-HomeDock-CSRF-Token":m.value},responseType:"blob"});S.value[e]=!1;const a=window.URL.createObjectURL(new Blob([t.data])),d=document.createElement("a");d.href=a,d.setAttribute("download",e),document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>{Z.value[e]=!1},2e3)}catch(t){console.error("Error downloading file:",t),p.error("Failed to download file. Please try again.")}},oe=async e=>{try{const t=await k.post("/api/delete_file",{file:e},{headers:{"X-HomeDock-CSRF-Token":m.value}});t.data.success?(p.success(t.data.message),$()):p.error(t.data.error||"Failed to delete file")}catch(t){console.error("Error deleting file:",t),p.error("Failed to delete file. Please try again.")}},$=async()=>{try{const e=await k.get("/api/get_files",{headers:{"X-HomeDock-CSRF-Token":m.value}});y.value=e.data.files||[]}catch(e){console.error("Error fetching files:",e),p.error("Failed to fetch files. Please try again.")}},ae=M(()=>u.value?y.value.filter(e=>e.name.toLowerCase().includes(u.value.toLowerCase())).map(e=>({value:e.name,label:e.name})):y.value.map(e=>({value:e.name,label:e.name}))),U=M(()=>u.value?y.value.filter(e=>e.name.toLowerCase().includes(u.value.toLowerCase())):y.value),le=e=>{const t=typeof e=="object"?e.value:e;u.value=t.toString(),p.info(`Selected: ${t}`)},se=e=>{e.file.status==="done"?p.success(`${e.file.name} uploaded successfully`):e.file.status==="error"&&p.error(`${e.file.name} upload failed.`)},A=M(()=>j(y.value.reduce((e,t)=>e+t.size,0)));function j(e){const t=typeof e=="number"?e:parseFloat(e);return t>=1e9?(t/1e9).toFixed(2)+" GBs":t>=1e6?(t/1e6).toFixed(2)+" MBs":t>=1e3?(t/1e3).toFixed(2)+" KBs":t+" B"}const re=()=>{$()};return ie(()=>{$()}),(e,t)=>(v(),_(q,null,[l(de),l(pe),l(ue),l(he),l(me),n("div",Ee,[n("header",Te,[l(we)]),t[3]||(t[3]=n("div",{class:"h-24"},null,-1)),n("div",Ue,[n("aside",Ae,[l(_e,{activePath:Q.value},null,8,["activePath"])]),n("div",{class:c([[o(r).back],"flex flex-col flex-1 pl-4 pt-3 pr-4 max-w-full overflow-x-hidden"])},[n("main",je,[l(be,{title:"Drop Zone",body:"Locally encrypted file vault",mdi_icon:o(D),id:"dropZoneUp",collapsible:!1},{default:b(()=>[l(o(Ze),{class:c([o(r).dropZoneDragHolder,o(r).scopeSelector]),fileList:V.value,"onUpdate:fileList":t[0]||(t[0]=a=>V.value=a),name:"file",multiple:!0,customRequest:Y,onChange:se,onSuccess:re,showUploadList:!0},{default:b(()=>[n("div",Pe,[n("p",Re,[l(He,{icons:[o(D),o(Be)],iconSize:64,interval:2e3,class:c([[o(r).dropZoneDragIcon],"text-4xl"])},null,8,["icons","class"])]),n("p",{class:c([[o(r).dropZoneDragUpText],"ant-upload-text px-4 text-balance"])},"Click or drag files to this area to upload and encrypt its content",2),n("p",{class:c([[o(r).dropZoneDragDownText],"ant-upload-hint px-4 text-balance"])},"Maximum file size allowed per file is 1GB",2),A.value!="0 B"?(v(),_("p",qe,[n("strong",{class:c([[o(r).dropZoneTotalSizeScope],"rounded-full px-4 py-0.5 ml-2"])},F(A.value)+" total",3)])):R("",!0)])]),_:1},8,["class","fileList"]),n("div",Ne,[l(o($e),{value:u.value,"onUpdate:value":t[2]||(t[2]=a=>u.value=a),options:ae.value,"popup-class-name":`${o(r).scopeSelector} z-0`,class:"w-full mb-4",onSelect:le},{default:b(()=>[l(o(Me),{value:u.value,"onUpdate:value":t[1]||(t[1]=a=>u.value=a),placeholder:"Search files...",class:c([[o(r).scopeSelector],"w-full text-sm"]),"enter-button":"Search"},{prefix:b(()=>[l(o(C),{icon:o(D),class:c([[o(r).dropZoneInputIcon],"mx-1"])},null,8,["icon","class"])]),_:1},8,["value","class"])]),_:1},8,["value","options","popup-class-name"]),n("div",null,[U.value.length===0?(v(),_("div",Oe,[l(o(Se),{class:c([o(r).dropZoneEmptyText]),description:"No encrypted files found"},null,8,["class"])])):(v(),_("div",Xe,[(v(!0),_(q,null,fe(U.value,a=>(v(),_("div",{key:a.name,class:c([[o(r).dropZoneFileDisplayer],"relative flex flex-col items-center justify-center text-center border border-dashed rounded-lg p-4 shadow-sm hover:shadow-md group transition duration-300"])},[l(o(C),{icon:Z.value[a.name]?o(Ie):o(Ve),class:c([[o(r).dropZoneLockIcon],"absolute right-2 top-2 transition duration-300 h-4 w-4 min-h-4 min-w-4"])},null,8,["icon","class"]),S.value[a.name]?(v(),ve(o(C),{key:0,icon:o(ke),class:c([[o(r).dropZoneLockIcon],"absolute right-7 top-2 transition duration-300 animate-spin h-4 w-4 min-h-4 min-w-4"])},null,8,["icon","class"])):R("",!0),l(o(C),{icon:g(a.name),class:c([[o(r).dropZoneFileIcon],"h-12 w-12 min-h-12 min-w-12 transition duration-300 group-hover:scale-110"])},null,8,["icon","class"]),n("span",{class:c([[o(r).dropZoneFileText],"mt-2 text-xs break-words w-full overflow-hidden text-ellipsis"])},F(a.name),3),n("span",{class:c([[o(r).dropZoneFileSize],"px-2 rounded-full text-[10px] mt-1"])},F(j(a.size)),3),n("div",Ge,[l(o(N),{type:"primary",onClick:d=>te(a.name),size:"small"},{default:b(()=>[l(o(C),{icon:o(De)},null,8,["icon"])]),_:2},1032,["onClick"]),l(o(N),{type:"dashed",onClick:d=>oe(a.name),size:"small",class:c([o(r).dropZoneDeleteIcon])},{default:b(()=>[l(o(C),{icon:o(ze),class:"transition duration-300 group-hover:rotate-90"},null,8,["icon"])]),_:2},1032,["onClick","class"])])],2))),128))]))])])]),_:1},8,["mdi_icon"])]),l(Ce)],2)])])],64))}}),Je=ge(We,[["__scopeId","data-v-317f1218"]]);function T(i){var x;const g=(x=document.getElementById(i))==null?void 0:x.textContent;if(g)try{const m=atob(g);return JSON.parse(m)}catch(m){console.error(`Error parsing data from element #${i}:`,m)}else console.error(`Element with ID '${i}' not found or is empty.`);return null}const E=T("data-theme"),J=T("data-common"),K=T("data-settings");if(E&&J&&K)try{const i=xe(Je),g=Le();i.use(g),i.provide("data-theme",{selectedTheme:E.selected_theme,selectedBack:E.selected_back}),i.provide("data-common",{version:J.version}),i.provide("data-settings",{userName:K.user_name});const x=ye();i.use(x),i.mount("#app-dropzone-root")}catch(i){console.error("Error initializing the Vue app:",i)}else console.error("Required data (data-theme or data-initial) is missing or invalid.");
