import{j as es,q as ss,d as ge,r as m,w as ls,B as as,C as ts,v as g,z as d,G as n,y as a,x as t,u as e,M as p,F as x,X as os,H as $,E as u,D as M,Z as c,T as he,I as xe,J as ns,R as z,U as K,am as is,W as rs,_ as us}from"./hdos_BpKZQtTEMhHASODHdgxqV.js";import{d as be,a as Q}from"./hdos_BbS_vWe5DNlDDYAPlKxdN.js";import{u as cs,f as ds,g as ps,l as J,A as vs,a7 as ms,a6 as fs,B as ee,s as X,v as ye}from"./hdos_BD58ffnhRAHAqEUb9oEcP.js";import{d as gs}from"./hdos_Cz8Dwn1iOWea_GVqOHEOb.js";import{d as se}from"./hdos_CS7Pix6yyXf4PLMilHEK5.js";import{d as hs}from"./hdos_R8ecdjzHoP22_qvuHhYVs.js";import{d as xs}from"./hdos_Cc8duC1RfUFCANHn9wXj9.js";import{d as le}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{d as ke}from"./hdos_DFUy6rfmTnhDoBOiO2sld.js";import{d as we}from"./hdos_D4VENToS-RM0shQaDqhsL.js";import{d as bs}from"./hdos_CDFXkGKiBr9cNCXfdSwVO.js";import{d as ys}from"./hdos_jF8OH77EP07gIC-pJ9fKj.js";import{d as ks}from"./hdos_DsXb5KuW4_9VoY6GQNAeZ.js";import{_ as ws}from"./hdos_Bd2w4hevB8zXu0HTTX0bz.js";import{B as y}from"./hdos_CeZ8s6OKH0mfkaalO6qV9.js";import{I as Ss}from"./hdos_D7asQplsXeJEQmeWSdEA7.js";import{I as A}from"./hdos_DC3VscrAD-GibJ9P6ntYZ.js";import{S as ae,c as f}from"./hdos_DiyJQsYH4fX2ylNYVT0uS.js";import{S as Se}from"./hdos_DoDSEsMGKUmzdQJI1w1zc.js";import"./hdos_BCYltYuYfJ0qALYCyebpR.js";import"./hdos_DtACOgHv1KwvRw3SB9v5H.js";import"./hdos_Dz3aTMQqM4LnOlKzV3COc.js";import"./hdos_itWSuQ2oYLgMGq-Z_V6WL.js";import"./hdos_CE1G-McAXm7G2-tH-xmrF.js";import"./hdos_DCQvziD-0BGtLQC-jPv6N.js";import"./hdos_CJoaCRc7PMIr83ndc1bSY.js";import"./hdos_B8pxkH9czGc60UNaIyaV6.js";import"./hdos_785gu03H94I2ew1jsneR9.js";import"./hdos_BHxBpIni23rYUTMznIDgx.js";import"./hdos_UYVfmeWtGELP5mLoxaJ78.js";import"./hdos_CqlMxxxMtniHFQu8ZmNU3.js";import"./hdos_D63Tfrq7hZ9D-jbqbBA6V.js";const _s={width:24,height:24,body:'<path fill="currentColor" d="m12.89 3l1.96.4L11.11 21l-1.96-.4L12.89 3m6.7 9L16 8.41V5.58L22.42 12L16 18.41v-2.83L19.59 12M1.58 12L8 5.58v2.83L4.41 12L8 15.58v2.83L1.58 12Z"/>'},Cs={width:24,height:24,body:'<path fill="currentColor" d="M20 12a8 8 0 0 0-8-8a8 8 0 0 0-8 8a8 8 0 0 0 8 8a8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12A10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5S7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5S14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/>'},Ts={width:24,height:24,body:'<path fill="currentColor" d="M7 15h2v3h2v-3h2v3h2v-3h2v3h2V9h-4V6H9v3H5v9h2v-3M4.38 3h15.25A2.37 2.37 0 0 1 22 5.38v14.25A2.37 2.37 0 0 1 19.63 22H4.38A2.37 2.37 0 0 1 2 19.63V5.38C2 4.06 3.06 3 4.38 3Z"/>'},_e={width:24,height:24,body:'<path fill="currentColor" d="m12 1l9 4v6c0 5.55-3.84 10.74-9 12c-5.16-1.26-9-6.45-9-12V5l9-4m4 13H8v1.5c0 .27.19.46.47.5h6.96c.31 0 .52-.16.57-.41V14m1-6l-2.67 2.67L12 8.34l-2.33 2.33L7 8l1 5h8l1-5Z"/>'},As={class:"app-install-config h-full flex flex-col overflow-hidden",style:{"container-type":"inline-size","container-name":"window"}},Is={key:0,class:"flex-1 flex items-center justify-center"},Es={class:"text-center"},Ms={key:1,class:"flex flex-col h-full overflow-hidden"},Ds={class:"flex-1 overflow-y-auto"},Ls={class:"flex items-center gap-4 mb-4"},$s={class:"relative flex-shrink-0 group"},Ns={key:1,class:"absolute flex items-center justify-center p-1 rounded-full -bottom-2 -right-2 shadow-md border bg-amber-600 border-gray-100 animate-bounce"},Us={class:"flex-1 min-w-0"},Bs={class:"flex items-center gap-2 flex-wrap text-xs"},Os={key:0,class:"flex items-center px-2 py-0.5 rounded-md bg-amber-600 text-white font-medium"},Ps={class:"action-buttons flex items-center gap-2"},Rs=["href"],Vs={class:"flex-shrink-0"},Ws={class:"flex items-center"},Fs={class:"flex items-center"},js={class:"px-4"},Hs={class:"mb-0"},Ys=["onClick"],zs=["src","alt"],Ks={class:"mb-6"},Xs={key:"simple"},Zs={key:0,class:"mb-6"},qs={class:"flex items-center gap-2 mb-3"},Gs={class:"space-y-3"},Qs={class:"mb-6"},Js={class:"flex items-center justify-between mb-3"},el={class:"flex items-center gap-2"},sl={key:0,class:"space-y-2"},ll={class:"grid grid-cols-[1fr_1fr_auto] gap-2 text-xs mb-1"},al={class:"mb-6"},tl={class:"flex items-center justify-between mb-3"},ol={class:"flex items-center gap-2"},nl={key:0,class:"space-y-2"},il={class:"grid grid-cols-[1fr_1fr_auto] gap-2 text-xs mb-1"},rl={class:"mb-6"},ul={class:"flex items-center gap-2 mb-3"},cl={key:0,class:"flex items-center gap-2"},dl={class:"mb-6"},pl={class:"flex items-center justify-between mb-3"},vl={class:"flex items-center gap-2"},ml={key:0,class:"space-y-2"},fl={class:"grid grid-cols-[1fr_1fr_auto] gap-2 text-xs mb-1"},gl={class:"mb-6"},hl={class:"mb-6"},xl={class:"flex items-center gap-2 mb-3"},bl={class:"mb-6"},yl={class:"flex items-center justify-between mb-3"},kl={class:"flex items-center gap-2"},wl={key:"advanced",class:"mb-2"},Sl=["disabled"],_l={class:"space-y-2.5 max-w-sm"},Cl={class:"flex items-center gap-2"},Tl={class:"space-y-4"},Al={class:"flex items-start gap-3"},Il={class:"flex-1"},El={class:"flex items-start gap-1"},Ml={class:"flex items-center justify-center min-h-[400px]"},Dl=["src","alt"],Ll={class:"space-y-3"},$l={class:"text-sm font-bold flex items-center gap-2"},Nl=es({__name:"AppInstallConfig",props:{app:{}},setup(Ce){const R=Ce,{themeClasses:l}=ss(),Te=cs(),Z=ds(),i=ge(()=>R.app?.name&&Te.apps.find(s=>s.name===R.app?.name)||R.app),te=ge(()=>{if(!i.value?.dependencies||i.value.dependencies.length===0)return"";const o=i.value.dependencies;if(o.length===1)return`This application will also install ${o[0]}`;if(o.length===2)return`This application will also install ${o[0]} and ${o[1]}`;if(o.length===3)return`This application will also install ${o[0]}, ${o[1]} and ${o[2]}`;{const s=o.slice(0,3).join(", "),r=o.length-3;return`This application will also install ${s} and ${r} more`}}),N=m(!1),k=m([]),w=m([]),b=m([]),S=m([]),V=m([]),I=m(!1),W=m("unless-stopped"),F=m(""),D=m(void 0),L=m(void 0),q=m(!1),j=m(!1),U=m(!1),H=m(!1),B=m(!1),G=m(!1),C=m([]),O=m(!1),T=m(0),E=m(null),P=m(!1),oe=m(0),ne=m(0),Ae=m(5),Y=m(!1),ie=ps();function Ie(o){const s=o.split(":");return s.length===2?{host:s[0].trim(),container:s[1].trim()}:{host:"",container:""}}function Ee(o){const s=o.split(":");return s.length>=2?{host:s[0].trim(),container:s.slice(1).join(":").trim()}:{host:"",container:""}}async function re(){if(!(!i.value?.name||j.value)){j.value=!0;try{const o=await Q.get("/api/get-appstore-info",{params:{containerName:i.value.name},headers:{"X-HomeDock-CSRF-Token":ie.value}});if(o.data?.success){const s=o.data.data.ports||[],r=o.data.data.volumes||[],v=o.data.data.environment||{},h=o.data.data.networks||[],me=o.data.data.capabilities||[],Qe=o.data.data.privileged||!1;k.value=s.map(_=>Ie(_)),w.value=r.map(_=>Ee(_));const fe=Array.isArray(h)?h:[];fe.length===0?b.value=[{type:"homedock_network",customName:""}]:b.value=fe.map(_=>["host","bridge","homedock_network","none"].includes(_)?{type:_,customName:""}:{type:"other",customName:_}),S.value=Object.entries(v).map(([_,Je])=>({key:_,value:String(Je)})),V.value=Array.isArray(me)?me:[],I.value=!!Qe,F.value=o.data.data.ymlContent||"",W.value="unless-stopped",D.value=o.data.data.user_name||void 0,L.value=o.data.data.password||void 0,q.value=o.data.data.ssl_enabled||!1}else console.error("Failed to fetch app info:",o.data.message),j.value=!1}catch(o){console.error("Error fetching app info:",o),j.value=!1}}}function Me(){k.value.push({host:"",container:""})}function De(o){k.value.splice(o,1)}function Le(){w.value.push({host:"",container:""})}function $e(o){w.value.splice(o,1)}function Ne(o){b.value[o].type!=="other"&&(b.value[o].customName="")}function Ue(){S.value.push({key:"",value:""})}function Be(o){S.value.splice(o,1)}function Oe(o,s){N.value=!!o}function Pe(){return k.value.map(o=>`${o.host}:${o.container}`).filter(o=>o!==":")}function Re(){return w.value.map(o=>`${o.host}:${o.container}`).filter(o=>o!==":")}function Ve(){const o={};return S.value.forEach(s=>{s.key&&s.value&&(o[s.key]=s.value)}),o}function We(){return b.value.map(o=>o.type==="other"?o.customName.trim():o.type).filter(o=>o!=="")}async function ue(){if(i.value?.name){if(i.value.is_external&&!H.value){U.value=!0;return}try{H.value=!1;const o=ie.value,s=N.value?{containerName:i.value.name,configType:"advanced",ymlContent:F.value,homedock_csrf_token:o}:{containerName:i.value.name,configType:"simple",userName:D.value,userPassword:L.value,ports:Pe(),volumes:Re(),networks:We(),environment:Ve(),capabilities:V.value,privileged:I.value,restartPolicy:W.value,homedock_csrf_token:o};try{const r=await Q.post("/api/process-config",s,{headers:{"X-HomeDock-CSRF-Token":o}});if(!r.data.success){console.error(`Failed to process configuration: ${r.data.message}`),X(r.data.message||"Failed to process configuration",l.value.scopeSelector,10);return}}catch(r){r.response?.status===400&&r.response?.data?.message?X(r.response.data.message,l.value.scopeSelector,10):r.response?ye(r,l.value.scopeSelector):X("Failed to process configuration",l.value.scopeSelector);return}await Z.trackInstallations(),await Q.post("/api/app-store-install-container",{containerName:i.value.name,homedock_csrf_token:o})}catch(o){console.error("Error during installation process:",o),o.response?ye(o,l.value.scopeSelector):X("An unexpected error occurred during installation",l.value.scopeSelector)}}}function Fe(){U.value=!1,H.value=!0,ue()}function je(){U.value=!1,H.value=!1}function He(o,s){const r=!!o;r&&!I.value?(G.value=!0,B.value=!0):I.value=r}function Ye(){B.value=!1,I.value=!0,G.value=!1}function ze(){B.value=!1,I.value=!1,G.value=!1}function ce(){if(!i.value?.name||!i.value?.screenshot_count){C.value=[];return}const o=i.value.name.toLowerCase();C.value=Array.from({length:i.value.screenshot_count},(s,r)=>`/images/app-store-screenshots/${o}-${r+1}.webp`)}function Ke(o){E.value&&(P.value=!0,Y.value=!1,oe.value=o.pageX-E.value.offsetLeft,ne.value=E.value.scrollLeft)}function Xe(o){if(!P.value||!E.value)return;o.preventDefault();const r=(o.pageX-E.value.offsetLeft-oe.value)*2;Math.abs(r)>Ae.value&&(Y.value=!0),E.value.scrollLeft=ne.value-r}function de(){P.value=!1}function Ze(o){if(Y.value){Y.value=!1;return}T.value=o,O.value=!0}function pe(){O.value=!1}function qe(){T.value>0&&T.value--}function Ge(){T.value<C.value.length-1&&T.value++}function ve(o){!O.value||C.value.length<=1||(o.key==="ArrowLeft"?qe():o.key==="ArrowRight"?Ge():o.key==="Escape"&&pe())}return ls(i,o=>{o?.name&&(re(),ce())},{immediate:!0}),as(()=>{i.value?.name&&(re(),ce()),window.addEventListener("keydown",ve)}),ts(()=>{window.removeEventListener("keydown",ve)}),(o,s)=>(d(),g("div",As,[i.value?(d(),g("div",Ms,[a("div",Ds,[a("div",{class:t([[e(l).storeContMainer,e(l).aeroExtraScope],"px-4 py-4"])},[a("div",Ls,[a("div",$s,[n(os,{draggable:"false",src:i.value?.picture_path||"docker-icons/notfound.jpg",alt:i.value?.name,class:t([[e(l).storeModalImageBack],"w-16 h-16 rounded-xl shadow-md transition ring-[1px] duration-200 group-hover:scale-105"])},null,8,["src","alt","class"]),q.value?(d(),g("div",{key:0,class:t([[e(l).storePopupSSLFlag],"absolute flex items-center justify-center p-1 rounded-full -top-1 -right-1 shadow-sm border"])},[n(e(p),{icon:e(le),class:"h-2.5 w-2.5"},null,8,["icon"])],2)):x("",!0),i.value?.is_external?(d(),g("div",Ns,[n(e(p),{icon:e(ke),class:"h-4 w-4 text-white"},null,8,["icon"])])):x("",!0)]),a("div",Us,[a("h1",{class:t([[e(l).storeModalAppName],"text-xl md:text-2xl font-bold mb-1"])},$(i.value?.display_name||i.value?.name),3),a("div",Bs,[a("span",{class:t([[e(l).storeModalAppType],"font-medium"])},$(i.value?.type),3),a("span",{class:t([e(l).storeModalAppCategory])},"•",2),a("span",{class:t([e(l).storeModalAppCategory])},$(i.value?.category),3),i.value?.is_external?(d(),g("div",Os,[n(e(p),{icon:e(ke),class:"mr-1 h-3 w-3"},null,8,["icon"]),s[12]||(s[12]=a("span",null,"External Package",-1))])):x("",!0),q.value?(d(),g("div",{key:1,class:t([[e(l).storeTextSSLFlag],"flex items-center"])},[n(e(p),{icon:e(le),class:"mr-1 h-3 w-3"},null,8,["icon"]),s[13]||(s[13]=a("span",{class:"font-medium"},"HTTPS",-1))],2)):x("",!0)])])]),a("div",Ps,[n(he,{name:"button-fade",mode:"out-in"},{default:u(()=>[i.value?.is_installed?(d(),M(e(y),{key:"installed",class:t([[e(l).storeButtonInstalled],"action-button-primary flex items-center justify-center"]),type:"default"},{default:u(()=>[n(e(p),{icon:e(gs),class:"mr-1.5"},null,8,["icon"]),s[14]||(s[14]=c(" Installed ",-1))]),_:1},8,["class"])):e(Z).currentlyInstalling===i.value?.name?(d(),M(e(y),{key:"installing",class:t([[e(l).storeButtonInstalling],"action-button-primary flex items-center justify-center"]),type:"default"},{default:u(()=>[n(e(p),{icon:e(be),class:"mr-1.5 animate-spin"},null,8,["icon"]),s[15]||(s[15]=c(" Installing... ",-1))]),_:1},8,["class"])):i.value?.name&&e(Z).queue.includes(i.value.name)?(d(),M(e(y),{key:"queued",class:t([[e(l).storeButtonQueued],"action-button-primary flex items-center justify-center"]),type:"default"},{default:u(()=>[n(e(p),{icon:e(xs),class:"mr-1.5"},null,8,["icon"]),s[16]||(s[16]=c(" Queued ",-1))]),_:1},8,["class"])):(d(),M(e(y),{class:t([[e(l).storeButtonInstall],"action-button-primary flex items-center justify-center"]),key:"install",type:"primary",onClick:ue},{default:u(()=>[n(e(p),{icon:e(J),class:"mr-1.5"},null,8,["icon"]),s[17]||(s[17]=c(" Install ",-1))]),_:1},8,["class"]))]),_:1}),a("a",{href:i.value?.is_external?"https://www.homedock.cloud":`https://www.homedock.cloud/apps/${i.value?.name.toLowerCase()}`,target:"_blank",class:"flex-shrink-0"},[n(e(y),{class:t([[e(l).storeLinkHDOSButton],"flex items-center"]),type:"dashed"},{default:u(()=>[n(e(p),{icon:e(hs),class:"w-4 h-4"},null,8,["icon"])]),_:1},8,["class"])],8,Rs),a("div",Vs,[n(e(Se),{checked:N.value,"onUpdate:checked":s[0]||(s[0]=r=>N.value=r),onChange:Oe},{checkedChildren:u(()=>[a("span",Ws,[n(e(p),{icon:e(Cs),class:"h-4 w-4"},null,8,["icon"]),s[18]||(s[18]=a("span",{class:"text-transparent"},".",-1))])]),unCheckedChildren:u(()=>[a("span",Fs,[n(e(p),{icon:e(_s),class:"h-4 w-4"},null,8,["icon"]),s[19]||(s[19]=a("span",{class:"text-transparent"},".",-1))])]),_:1},8,["checked"])])])],2),a("div",js,[a("p",{class:t([[e(l).storeAboutTextDescScope],"text-sm leading-relaxed mb-3"])},$(i.value?.description+"."||"No description available"),3),xe(a("div",Hs,[a("div",{ref_key:"screenshotsContainer",ref:E,class:t(["flex gap-2 overflow-x-auto pb-2 scrollbar-hide select-none",{"cursor-grab":!P.value,"cursor-grabbing":P.value}]),onMousedown:Ke,onMousemove:Xe,onMouseup:de,onMouseleave:de},[(d(!0),g(z,null,K(C.value,(r,v)=>(d(),g("button",{key:`screenshot-${v}`,onClick:h=>Ze(v),class:t([[e(l).screenshotThumb],"flex-shrink-0 w-[160px] h-[100px] md:w-[200px] md:h-[125px] lg:w-[280px] lg:h-[175px] xl:w-[320px] xl:h-[200px] rounded-lg overflow-hidden border-2 border-transparent transition-all duration-200 hover:scale-[1.01] hover:shadow-lg active:translate-y-0 active:scale-[0.98]"])},[a("img",{draggable:"false",src:r,alt:`${i.value?.name} screenshot ${v+1}`,class:"w-full h-full object-cover pointer-events-none"},null,8,zs)],10,Ys))),128))],34)],512),[[ns,C.value.length>0]]),a("div",Ks,[te.value?(d(),g("div",{key:0,class:t([[e(l).storeAboutTextDepsScope],"text-xs inline-flex items-start px-2.5 py-1.5 rounded-md"])},[n(e(p),{icon:e(vs),class:"h-3 w-3 min-h-3 min-w-3 mt-[1px] mr-1.5"},null,8,["icon"]),a("span",null,$(te.value),1)],2)):x("",!0)]),n(he,{name:"fade-slide",mode:"out-in"},{default:u(()=>[N.value?(d(),g("div",wl,[a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider mb-3"])},"Advanced Configuration",2),xe(a("textarea",{disabled:i.value?.is_installed,"onUpdate:modelValue":s[8]||(s[8]=r=>F.value=r),class:t([[e(l).hubTextArea],"flex-1 rounded-lg w-full font-mono text-xs resize-none p-3"]),style:{height:"500px"}},null,10,Sl),[[rs,F.value]])])):(d(),g("div",Xs,[D.value!==void 0||L.value!==void 0?(d(),g("div",Zs,[a("div",qs,[n(e(p),{icon:e(ks),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Access Credentials",2)]),a("div",Gs,[D.value!==void 0?(d(),M(e(A),{key:0,class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full"]),disabled:i.value?.is_installed,value:D.value,"onUpdate:value":s[1]||(s[1]=r=>D.value=r),placeholder:"Username"},null,8,["class","disabled","value"])):x("",!0),L.value!==void 0?(d(),M(e(Ss),{key:1,autocomplete:"new-password",class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full"]),disabled:i.value?.is_installed,value:L.value,"onUpdate:value":s[2]||(s[2]=r=>L.value=r),placeholder:"Password"},null,8,["class","disabled","value"])):x("",!0)])])):x("",!0),a("div",Qs,[a("div",Js,[a("div",el,[n(e(p),{icon:e(Ts),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Port Mappings",2)]),n(e(y),{disabled:i.value?.is_installed,type:"link",onClick:Me,size:"small"},{default:u(()=>[...s[20]||(s[20]=[c(" + Add ",-1)])]),_:1},8,["disabled"])]),k.value.length>0?(d(),g("div",sl,[a("div",ll,[a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Host",2),a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Container",2),s[21]||(s[21]=a("span",{class:"w-8"},null,-1))]),(d(!0),g(z,null,K(k.value,(r,v)=>(d(),g("div",{key:"port-"+v,class:"grid grid-cols-[1fr_1fr_auto] gap-2 items-center"},[n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:k.value[v].host,"onUpdate:value":h=>k.value[v].host=h,placeholder:"8080"},null,8,["class","disabled","value","onUpdate:value"]),n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:k.value[v].container,"onUpdate:value":h=>k.value[v].container=h,placeholder:"80"},null,8,["class","disabled","value","onUpdate:value"]),n(e(y),{class:t([e(l).storeLinkHDOSButton]),disabled:i.value?.is_installed,type:"text",size:"small",onClick:h=>De(v)},{default:u(()=>[n(e(p),{icon:e(se),class:"h-4 w-4"},null,8,["icon"])]),_:1},8,["class","disabled","onClick"])]))),128))])):x("",!0)]),a("div",al,[a("div",tl,[a("div",ol,[n(e(p),{icon:e(ms),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Volume Mounts",2)]),n(e(y),{disabled:i.value?.is_installed,type:"link",onClick:Le,size:"small"},{default:u(()=>[...s[22]||(s[22]=[c(" + Add ",-1)])]),_:1},8,["disabled"])]),w.value.length>0?(d(),g("div",nl,[a("div",il,[a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Host Path",2),a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Container Path",2),s[23]||(s[23]=a("span",{class:"w-8"},null,-1))]),(d(!0),g(z,null,K(w.value,(r,v)=>(d(),g("div",{key:"volume-"+v,class:"grid grid-cols-[1fr_1fr_auto] gap-2 items-center"},[n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:w.value[v].host,"onUpdate:value":h=>w.value[v].host=h,placeholder:"/host/path"},is({_:2},[r.host.includes("/DATA/SSLCerts")?{name:"prefix",fn:u(()=>[n(e(p),{icon:e(le),class:t([[e(l).installConfigSSLVolumeIcon],"h-3.5 w-3.5 -translate-x-0.5"])},null,8,["icon","class"])]),key:"0"}:void 0]),1032,["class","disabled","value","onUpdate:value"]),n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:w.value[v].container,"onUpdate:value":h=>w.value[v].container=h,placeholder:"/container/path"},null,8,["class","disabled","value","onUpdate:value"]),n(e(y),{class:t([e(l).storeLinkHDOSButton]),disabled:i.value?.is_installed,type:"text",size:"small",onClick:h=>$e(v)},{default:u(()=>[n(e(p),{icon:e(se),class:"h-4 w-4"},null,8,["icon"])]),_:1},8,["class","disabled","onClick"])]))),128))])):x("",!0)]),a("div",rl,[a("div",ul,[n(e(p),{icon:e(bs),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Network",2)]),b.value.length>0?(d(),g("div",cl,[n(e(ae),{class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full"]),"popup-class-name":`${e(l).scopeSelector}`,disabled:i.value?.is_installed,value:b.value[0].type,"onUpdate:value":s[3]||(s[3]=r=>b.value[0].type=r),onChange:s[4]||(s[4]=r=>Ne(0))},{default:u(()=>[n(e(f),{class:t([e(l).scopeSelector]),value:"host"},{default:u(()=>[...s[24]||(s[24]=[c("Host",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"bridge"},{default:u(()=>[...s[25]||(s[25]=[c("Bridge",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"homedock_network"},{default:u(()=>[...s[26]||(s[26]=[c("HomeDock OS Network",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"none"},{default:u(()=>[...s[27]||(s[27]=[c("None",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"other"},{default:u(()=>[...s[28]||(s[28]=[c("Other",-1)])]),_:1},8,["class"])]),_:1},8,["class","popup-class-name","disabled","value"])])):x("",!0),b.value.length>0&&b.value[0].type==="other"?(d(),M(e(A),{key:1,class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full mt-2"]),disabled:i.value?.is_installed,value:b.value[0].customName,"onUpdate:value":s[5]||(s[5]=r=>b.value[0].customName=r),placeholder:"custom-network-name"},null,8,["class","disabled","value"])):x("",!0)]),a("div",dl,[a("div",pl,[a("div",vl,[n(e(p),{icon:e(fs),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Environment Variables",2)]),n(e(y),{disabled:i.value?.is_installed,type:"link",onClick:Ue,size:"small"},{default:u(()=>[...s[29]||(s[29]=[c(" + Add ",-1)])]),_:1},8,["disabled"])]),S.value.length>0?(d(),g("div",ml,[a("div",fl,[a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Key",2),a("span",{class:t([[e(l).installConfigLabel],"font-medium"])},"Value",2),s[30]||(s[30]=a("span",{class:"w-8"},null,-1))]),(d(!0),g(z,null,K(S.value,(r,v)=>(d(),g("div",{key:"env-"+v,class:"grid grid-cols-[1fr_1fr_auto] gap-2 items-center"},[n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:S.value[v].key,"onUpdate:value":h=>S.value[v].key=h,placeholder:"VARIABLE_NAME"},null,8,["class","disabled","value","onUpdate:value"]),n(e(A),{class:t([e(l).scopeSelector,e(l).loginFormInput]),disabled:i.value?.is_installed,value:S.value[v].value,"onUpdate:value":h=>S.value[v].value=h,placeholder:"value"},null,8,["class","disabled","value","onUpdate:value"]),n(e(y),{class:t([e(l).storeLinkHDOSButton]),disabled:i.value?.is_installed,type:"text",size:"small",onClick:h=>Be(v)},{default:u(()=>[n(e(p),{icon:e(se),class:"h-4 w-4"},null,8,["icon"])]),_:1},8,["class","disabled","onClick"])]))),128))])):x("",!0)]),a("div",gl,[a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider mb-3"])},"Restart Policy",2),n(e(ae),{class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full"]),"popup-class-name":`${e(l).scopeSelector}`,disabled:i.value?.is_installed,value:W.value,"onUpdate:value":s[6]||(s[6]=r=>W.value=r)},{default:u(()=>[n(e(f),{class:t([e(l).scopeSelector]),value:"always"},{default:u(()=>[...s[31]||(s[31]=[c("Always",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"unless-stopped"},{default:u(()=>[...s[32]||(s[32]=[c("Unless Stopped",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"no"},{default:u(()=>[...s[33]||(s[33]=[c("No",-1)])]),_:1},8,["class"])]),_:1},8,["class","popup-class-name","disabled","value"])]),a("div",hl,[a("div",xl,[n(e(p),{icon:e(ys),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Capabilities",2)]),n(e(ae),{class:t([[e(l).scopeSelector,e(l).loginFormInput],"w-full"]),"popup-class-name":`${e(l).scopeSelector}`,disabled:i.value?.is_installed,value:V.value,"onUpdate:value":s[7]||(s[7]=r=>V.value=r),mode:"multiple",placeholder:"Select capabilities"},{default:u(()=>[n(e(f),{class:t([e(l).scopeSelector]),value:"NET_ADMIN"},{default:u(()=>[...s[34]||(s[34]=[c("NET_ADMIN (Network administration)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"NET_RAW"},{default:u(()=>[...s[35]||(s[35]=[c("NET_RAW (Raw sockets)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_ADMIN"},{default:u(()=>[...s[36]||(s[36]=[c("SYS_ADMIN (System administration)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_MODULE"},{default:u(()=>[...s[37]||(s[37]=[c("SYS_MODULE (Load kernel modules)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_PTRACE"},{default:u(()=>[...s[38]||(s[38]=[c("SYS_PTRACE (Trace processes)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"IPC_LOCK"},{default:u(()=>[...s[39]||(s[39]=[c("IPC_LOCK (Lock memory)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_TIME"},{default:u(()=>[...s[40]||(s[40]=[c("SYS_TIME (Modify system time)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_NICE"},{default:u(()=>[...s[41]||(s[41]=[c("SYS_NICE (Modify process priorities)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"DAC_OVERRIDE"},{default:u(()=>[...s[42]||(s[42]=[c("DAC_OVERRIDE (Bypass file permissions)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"CHOWN"},{default:u(()=>[...s[43]||(s[43]=[c("CHOWN (Change file ownership)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"FOWNER"},{default:u(()=>[...s[44]||(s[44]=[c("FOWNER (Bypass permission checks)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SETUID"},{default:u(()=>[...s[45]||(s[45]=[c("SETUID (Manipulate process UIDs)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SETGID"},{default:u(()=>[...s[46]||(s[46]=[c("SETGID (Manipulate process GIDs)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"NET_BIND_SERVICE"},{default:u(()=>[...s[47]||(s[47]=[c("NET_BIND_SERVICE (Bind ports < 1024)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"SYS_RESOURCE"},{default:u(()=>[...s[48]||(s[48]=[c("SYS_RESOURCE (Override resource limits)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"MKNOD"},{default:u(()=>[...s[49]||(s[49]=[c("MKNOD (Create special files)",-1)])]),_:1},8,["class"]),n(e(f),{class:t([e(l).scopeSelector]),value:"AUDIT_WRITE"},{default:u(()=>[...s[50]||(s[50]=[c("AUDIT_WRITE (Write to audit log)",-1)])]),_:1},8,["class"])]),_:1},8,["class","popup-class-name","disabled","value"])]),a("div",bl,[a("div",yl,[a("div",kl,[n(e(p),{icon:e(_e),class:t(["h-4 w-4",[e(l).storeAboutTextScope]])},null,8,["icon","class"]),a("h3",{class:t([[e(l).storeAboutTextScope],"text-xs font-semibold uppercase tracking-wider"])},"Privileged Mode",2)])]),n(e(Se),{disabled:i.value?.is_installed,checked:I.value,onChange:He},{checkedChildren:u(()=>[...s[51]||(s[51]=[a("span",null,"On",-1)])]),unCheckedChildren:u(()=>[...s[52]||(s[52]=[a("span",null,"Off",-1)])]),_:1},8,["disabled","checked"])])]))]),_:1})])]),n(ws,{icon:e(J),message:"Install App",info:i.value?.name?`Installing ${i.value.display_name||i.value.name}`:"Configure application",showHelp:!0},{help:u(()=>[a("div",_l,[a("div",Cl,[n(e(p),{icon:e(J),class:t(["w-5 h-5",e(l).statusBarIcon])},null,8,["icon","class"]),a("h4",{class:t(["text-base font-semibold",e(l).statusBarText])},"Install App",2)]),a("div",{class:t(["text-[10px] md:text-xs space-y-2 leading-relaxed",e(l).statusBarInfo])},[...s[53]||(s[53]=[a("p",null,"Configure your application before installation using simple mode with form fields or advanced mode with direct compose editing. Set ports, volumes, credentials, and restart policies to customize how your application runs. Toggle between modes using the switch to choose your preferred configuration method.",-1)])],2)])]),_:1},8,["icon","info"])])):(d(),g("div",Is,[a("div",Es,[n(e(p),{icon:e(be),class:t([[e(l).installConfigLoadingIcon],"animate-spin h-12 w-12 mx-auto mb-4"])},null,8,["icon","class"]),a("p",{class:t([e(l).installConfigLoadingText])},"Loading application details...",2)])])),n(ee,{visible:U.value,"onUpdate:visible":s[9]||(s[9]=r=>U.value=r),type:"warning",title:"External Package Warning","ok-text":"Install Anyway","cancel-text":"Cancel",onOk:Fe,onCancel:je},{default:u(()=>[a("div",Tl,[a("div",Al,[n(e(p),{icon:e(we),class:"w-6 h-6 text-red-500 flex-shrink-0"},null,8,["icon"]),a("div",Il,[a("p",{class:t([["font-semibold mb-3",e(l).externalWarningTitle],"text-sm"])},"You are about to install an external package",2),a("p",{class:t(["text-sm mb-2",e(l).externalWarningText])},"This application was not added or verified by the HomeDock OS team. External packages can potentially be dangerous if they contain malicious code.",2),a("div",{class:t(["border rounded-lg p-3 mb-3",e(l).externalWarningAuthorBg,e(l).externalWarningAuthorBorder])},[a("p",{class:t(["text-sm font-semibold",e(l).externalWarningAuthorTitle])},"HDS Package Author:",2),a("p",{class:t(["text-sm",e(l).externalWarningAuthorText])},$(i.value?.author||"Unknown"),3)],2),a("p",{class:t(["text-sm font-semibold mb-2",e(l).externalWarningTitle])},"Security Recommendations:",2),a("ul",{class:t(["text-xs -space-y-1",e(l).externalWarningListText])},[s[56]||(s[56]=a("li",{class:"flex items-start gap-1"},[a("span",{class:"mt-0.5"},"•"),a("span",null,"Only install packages from authors you trust")],-1)),s[57]||(s[57]=a("li",{class:"flex items-start gap-1"},[a("span",{class:"mt-0.5"},"•"),a("span",null,"Review the package configuration before installing")],-1)),s[58]||(s[58]=a("li",{class:"flex items-start gap-1"},[a("span",{class:"mt-0.5"},"•"),a("span",null,"Be cautious of packages requesting unusual permissions")],-1)),a("li",El,[s[55]||(s[55]=a("span",{class:"mt-0.5"},"•",-1)),a("span",null,[s[54]||(s[54]=c("Report suspicious packages to ",-1)),a("a",{href:"mailto:support@homedock.cloud",class:t([e(l).hyperLink])},"support@homedock.cloud",2)])])],2),a("p",{class:t(["text-xs mt-2 underline",e(l).externalWarningDisclaimerText])},"By proceeding, you acknowledge the risks associated with installing external packages.",2)])])])]),_:1},8,["visible"]),n(ee,{visible:O.value,"onUpdate:visible":s[10]||(s[10]=r=>O.value=r),type:"info",title:"Screenshot Preview","ok-text":"Close","ok-cancel":!1,width:1200,onOk:pe},{default:u(()=>[a("div",Ml,[C.value[T.value]?(d(),g("img",{key:0,src:C.value[T.value],alt:`${i.value?.name} screenshot ${T.value+1}`,class:"max-w-full max-h-[70vh] mx-auto rounded-lg object-contain"},null,8,Dl)):x("",!0)])]),_:1},8,["visible"]),n(ee,{visible:B.value,"onUpdate:visible":s[11]||(s[11]=r=>B.value=r),type:"warning",title:"Privileged Mode Warning","ok-text":"I Understand, Enable","cancel-text":"Cancel",onOk:Ye,onCancel:ze,icon:e(we),width:480,"reverse-buttons":!0},{default:u(()=>[a("div",Ll,[a("p",{class:t([[e(l).notTextDown],"text-sm leading-relaxed"])},[...s[59]||(s[59]=[c("Enabling ",-1),a("strong",null,"Privileged Mode",-1),c(" grants the container ",-1),a("strong",null,"unrestricted access",-1),c(" to all host system resources and devices. This removes all security isolation provided by Docker.",-1)])],2),a("div",{class:t([[e(l).dropZoneTotalSizeScope],"rounded-lg p-3.5 space-y-2.5"])},[a("p",$l,[n(e(p),{icon:e(_e),class:"w-5 h-5"},null,8,["icon"]),s[60]||(s[60]=a("span",null,"Security Risks",-1))]),s[61]||(s[61]=a("p",{class:"text-xs leading-relaxed"},"With Privileged Mode enabled, the container can:",-1)),s[62]||(s[62]=a("ul",{class:"text-xs space-y-1.5 ml-4 list-disc"},[a("li",null,[c("Access "),a("strong",null,"all host devices"),c(" and hardware")]),a("li",null,[c("Modify "),a("strong",null,"kernel parameters"),c(" and load modules")]),a("li",null,[c("Potentially "),a("strong",null,"compromise the entire host"),c(" system")]),a("li",null,[c("Bypass "),a("strong",null,"all container security"),c(" mechanisms")])],-1))],2),a("p",{class:t([[e(l).notTextDown],"text-xs leading-relaxed font-semibold"])},"Only enable if absolutely necessary and you trust this application completely.",2)])]),_:1},8,["visible","icon"])]))}}),va=us(Nl,[["__scopeId","data-v-24276b4e"]]);export{va as default};
