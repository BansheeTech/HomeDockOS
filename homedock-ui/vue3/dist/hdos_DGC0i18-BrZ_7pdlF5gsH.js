const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["hdos_DP2qXfLO6N_jlyGAakb7V.js","hdos_D6-XlEtGdUWrcdOe4mzvB.js"])))=>i.map(i=>d[i]);
import{d as L,r as g,u as K,o as te,c as I,a as S,b as s,e as n,f as e,n as r,_ as j,g as P,w as Q,h as F,i as b,j as se,I as y,v as ae,T as W,F as oe,A as ne,k as le,l as re,N as ie,m as ce,t as ue,p as de,q as me,s as pe}from"./hdos_DrLYHBVTzGKueIqeVa0-U.js";import{d as he,a as $,A as fe}from"./hdos_DZUKIvxDT3Fqh7rzmD7rn.js";import{d as ge,a as ve,b as we,c as _e,e as ye}from"./hdos_DDDdO9fX8HX2xdo5Gmwgk.js";import{d as O}from"./hdos_DPhlMBAcwmj4N6C-RIU0v.js";import{S as be}from"./hdos_B_h6sD-xVE6K6dmluLDj5.js";import{A as xe}from"./hdos_Dm5dEznyEODSGAI8tnVb_.js";import{d as Se}from"./hdos_ZmCbB4Uq2A8pQKvDpZM1l.js";import{F as D}from"./hdos_C4bM1MY4Ua6tVaTIeC4Go.js";import"./hdos_6wtC4xZBn0TVcSk6DJMNK.js";import{I as R}from"./hdos_Kvj9A8OxobVg_qMjbV2tq.js";import{B as H}from"./hdos_OIxCipLLecMZlhY603d5p.js";import{a as C}from"./hdos_GgH5WXxDlCTCgwDOggafj.js";import"./hdos_D590cRYUQ5xMehs05b2Mb.js";import"./hdos_BRZNl8W1Jb8iN7oKcFKrQ.js";import"./hdos_CnlsLbV3So9mi8mgxx_lE.js";const ke="modulepreload",Ce=function(k){return"/homedock-ui/vue3/dist/"+k},N={},Ie=function(l,i,w){let p=Promise.resolve();if(i&&i.length>0){let f=function(t){return Promise.all(t.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),h=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));p=f(i.map(t=>{if(t=Ce(t),t in N)return;N[t]=!0;const d=t.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${u}`))return;const o=document.createElement("link");if(o.rel=d?"stylesheet":ke,d||(o.as="script"),o.crossOrigin="",o.href=t,h&&o.setAttribute("nonce",h),document.head.appendChild(o),d)return new Promise((E,T)=>{o.addEventListener("load",E),o.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${t}`)))})}))}function _(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return p.then(f=>{for(const a of f||[])a.status==="rejected"&&_(a.reason);return l().catch(_)})},Te={width:24,height:24,body:'<path fill="currentColor" d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z"/>'},Ae={width:24,height:24,body:'<path fill="currentColor" d="M12 17.5c-3.8 0-7.2-2.1-8.8-5.5H1c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5h-2.2c-1.6 3.4-5 5.5-8.8 5.5Z"/>'},Ee={width:24,height:24,body:'<path fill="currentColor" d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20Z"/>'},qe={width:24,height:24,body:'<path fill="currentColor" d="M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z"/>'},$e={id:"cloudScreen",class:"cloud-screen"},De={class:"banshee-cloud"},je={target:"_blank",href:"https://banshee.pro"},Fe={class:"objectHead"},Le={class:"object"},Pe=300,Be=750,Ve=2500,Oe=L({__name:"SplashScreen",setup(k){const l=g(null),i=g(null),w=g(null),{themeClasses:p}=K(),_=new Audio("/audio/splash.mp3"),f=(t,d,u)=>{setTimeout(()=>{t.classList.add(d)},u)},a=()=>{_.play().catch(u=>console.error("Error playing sound: ",u));let t=Pe;l.value.querySelectorAll(".object").forEach(u=>{f(u,"filling",t),t+=Be}),setTimeout(()=>{l.value.classList.add("splashFadeOut"),l.value.addEventListener("transitionend",function u(o){o.propertyName==="opacity"&&(l.value.remove(),l.value.removeEventListener("transitionend",u))})},t+Ve)},h=()=>{w.value.classList.add("shootUp"),i.value.style.opacity="0",a(),i.value.addEventListener("transitionend",()=>{i.value.style.display="none"},{once:!0}),localStorage.setItem("splashShown","true")};return te(()=>{i.value=document.getElementById("cloudScreen"),w.value=document.getElementById("cloudImage"),localStorage.getItem("splashShown")?(l.value.style.display="none",i.value.style.display="none"):(l.value.style.display="block",i.value.style.display="flex")}),(t,d)=>(S(),I("div",null,[s("div",$e,[s("div",{id:"cloudImage",class:"flex flex-col items-center justify-center",onClick:h},[n(xe,{class:r([e(p).splashColor]),icons:[e(Ee),e(qe)],interval:1e3,iconSize:96},null,8,["class","icons"]),s("div",{class:r([[e(p).splashColor],"cloudtext text-center"])},"Click to Start",2)]),s("span",De,[s("a",je,[s("span",null,[n(j,{class:r([[e(p).compLogo],"optin-banshee will-change-transform"]),src:"/images/optin_banshee.png"},null,8,["class"])])])])]),s("div",{class:r([[e(p).cloudBack],"splash"]),ref_key:"splashElement",ref:l},[s("h1",Fe,[s("div",Le,[n(j,{class:r([[e(p).compLogo],"object-logo mr-1"]),src:"/images/logo_trans.svg"},null,8,["class"])]),s("div",{class:r([[e(p).afterSplash],"object object-text ml-1 h-8"])},"HomeDock OS",2)])],2)]))}}),Re=P(Oe,[["__scopeId","data-v-e634c4be"]]),He={class:"relative text-xs w-full h-8 z-30 text-white text-center flex items-center justify-center rounded-2xl bg-gradient-to-r from-[#6e0000] via-[#4b0092] to-[#1575bf] animate-rainbow py-2.5"},Ne={target:"_blank",href:"https://www.homedock.cloud",class:"flex items-center justify-center"},Ue=L({__name:"CloudInstances",props:{isVisible:{type:Boolean}},emits:["update:isVisible"],setup(k,{emit:l}){const i=k,w=l,p=g(!1),_=()=>{const a=new Date().toISOString().split("T")[0];localStorage.setItem("cloudInstancePopShown",a),p.value=!1,w("update:isVisible",!1)},f=()=>{const a=localStorage.getItem("cloudInstancePopShown"),h=new Date;let t=!1;if(!a)t=!0;else{const d=new Date(a);(h.getTime()-d.getTime())/(1e3*3600*24)>7&&(t=!0)}t?(p.value=!0,w("update:isVisible",!0)):(p.value=!1,w("update:isVisible",!1))};return Q(()=>i.isVisible,a=>{a&&f()}),(a,h)=>(S(),F(W,{name:"slide-down-fade"},{default:b(()=>[se(s("div",He,[s("span",{id:"CloudInstancesClose",class:"absolute right-4 text-white cursor-pointer",onClick:_},[n(e(y),{icon:e(ge),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"])]),s("a",Ne,[n(e(y),{icon:e(Se),class:"mr-1 text-current",width:"14",height:"14"},null,8,["icon"]),h[0]||(h[0]=s("span",null,"Check out our HomeDock OS Cloud Instances!",-1))])],512),[[ae,p.value]])]),_:1}))}}),Me=P(Ue,[["__scopeId","data-v-06360ac0"]]),Ke={class:"flex justify-between items-start mb-6"},Qe={key:0,class:"flex items-center justify-center"},We={key:1},Ze={href:"https://github.com/BansheeTech/HomeDockOS",target:"_blank",class:"flex items-center"},ze={href:"https://www.homedock.cloud",target:"_blank",class:"flex items-center"},Xe={href:"https://docs.homedock.cloud",target:"_blank",class:"flex items-center"},Ge={href:"https://discord.gg/Zj3JCYsRWw",target:"_blank",class:"flex items-center"},Je=L({__name:"Login",setup(k){var B;const l=g({username:"",password:""}),i=g(!1),w=()=>{i.value||(i.value=!0,setTimeout(()=>{i.value=!1},1e3))},p={username:[{required:!0,message:"Username is required",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"}]},_=g(!1),f=g(!1),a=g(!1),h=g(((B=document.querySelector('meta[name="homedock_csrf_token"]'))==null?void 0:B.getAttribute("content"))||null),t=g(void 0),d=g(null),u=g(!1),{themeClasses:o}=K(),E=()=>{_.value=!_.value},T=()=>{f.value=!0},Z=async()=>{if(!h.value){C.error("CSRF token missing.");return}if(!(a.value||u.value)){a.value=!0;try{const m=await $.get("/api/pksend",{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":h.value}}),c=m.data.public_key,v=m.data.token;if(!c||!v)throw new Error("Public Key or token not found in response.");const A=(await Ie(async()=>{const{default:q}=await import("./hdos_DP2qXfLO6N_jlyGAakb7V.js").then(ee=>ee.i);return{default:q}},__vite__mapDeps([0,1]))).default,X=new TextEncoder().encode(l.value.password),G=Array.from(X).map(q=>String.fromCharCode(q)).join(""),J=A.pki.publicKeyFromPem(c).encrypt(G,"RSA-OAEP",{md:A.md.sha256.create(),mgf1:{md:A.md.sha256.create()}}),Y=A.util.encode64(J),V=await $.post("/api/pcrypt",{token:v,password:Y},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":h.value}});if(V.data.status!=="success"){C.error(V.data.message||"Error encrypting password.");return}const x=await $.post("/login",{token:v,username:l.value.username,homedock_csrf_token:h.value},{headers:{"Content-Type":"application/json","X-HomeDock-CSRF-Token":h.value}});if(x.data.message?x.data.status==="success"?(C.success(x.data.message),u.value=!0,setTimeout(()=>{window.location.href=x.data.redirect_url},2500)):(x.data.remaining_attempts!==void 0&&(d.value=x.data.remaining_attempts),C.error(x.data.message),t.value="error"):C.error("Unexpected error, please contact support."),x.data.redirect_url){setTimeout(()=>{window.location.href=x.data.redirect_url},2500);return}}catch(m){if(m instanceof fe)if(m.response&&m.response.data){const{message:c,redirect_url:v}=m.response.data;if(c&&(C.error(c),t.value="error"),m.response.data.remaining_attempts!==void 0&&(d.value=m.response.data.remaining_attempts),v){setTimeout(()=>{window.location.href=v},2500);return}}else console.error("There was an error while signing in:",m),C.error("There was an error while signing in.")}finally{a.value=!1}}};Q(d,()=>{const m=document.querySelector(".animated-attempts");m&&(m.classList.add("updated"),setTimeout(()=>m.classList.remove("updated"),300))});const z=m=>{console.log("Validation failed:",m)};return(m,c)=>(S(),I(de,null,[n(oe),n(ne),n(le),n(re),n(ie),n(Re),n(be),s("div",{class:r([[e(o).back],"flex items-center justify-center min-h-screen login-wrapper relative p-3 overflow-hidden"])},[s("div",{class:r([{bounce:i.value},"w-full max-w-xl"])},[s("div",{class:r([[e(o).form],"group px-6 py-12 lg:px-12 rounded-3xl shadow-lg w-full relative z-10 container-scroller mb-2"])},[s("div",Ke,[n(j,{src:"/images/logo_trans.svg",alt:"Logo",class:r([[e(o).logo],"h-20 hd-top-form-logo animate-pulse"])},null,8,["class"])]),s("h2",{class:r([[e(o).mainText],"text-xl font-normal mb-2"])},"Welcome to HomeDock OS",2),s("p",{class:r([[e(o).subText],"font-light mb-6 leading-3"])},"Sign in to continue",2),n(e(D),{layout:"vertical",model:l.value,rules:p,onFinish:Z,onFinishFailed:z},{default:b(()=>[n(e(D).Item,{name:"username"},{default:b(()=>[c[3]||(c[3]=s("label",{class:"text-gray-300",for:"username"},"Username",-1)),n(e(R),{class:r([[e(o).scopeSelector,e(o).loginFormInput],"h-10 group inputUser"]),autocomplete:"username",value:l.value.username,"onUpdate:value":c[0]||(c[0]=v=>l.value.username=v),placeholder:"Username...",maxlength:30,status:t.value,required:"",onFocus:T},{prefix:b(()=>[n(e(y),{icon:e(ve),class:r(["mr-0.5 transition duration-300",[e(o).formIcon,{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),_:1},8,["class","value","status"])]),_:1,__:[3]}),c[6]||(c[6]=s("div",{class:"mt-2"},null,-1)),n(e(D).Item,{name:""},{default:b(()=>[c[4]||(c[4]=s("label",{class:"text-gray-300",for:"password"},"Password",-1)),n(e(R),{class:r([[e(o).scopeSelector,e(o).loginFormInput],"h-10 group"]),autocomplete:"current-password",value:l.value.password,"onUpdate:value":c[1]||(c[1]=v=>l.value.password=v),type:_.value?"text":"password",placeholder:"••••••••",status:t.value,maxlength:30,required:"",onFocus:T},{prefix:b(()=>[n(e(y),{icon:e(O),class:r(["mr-0.5 transition duration-300",[e(o).formIcon,{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]]),width:"16",height:"16"},null,8,["icon","class"])]),suffix:b(()=>[n(e(H),{class:r(["mb-1 transition duration-300",{"text-gray-300 group-hover:text-blue-500":t.value!=="error","text-red-500":t.value==="error"}]),type:"link",onClick:E,icon:""},{default:b(()=>[_.value?(S(),F(e(y),{key:0,icon:e(Te),class:"mt-1"},null,8,["icon"])):(S(),F(e(y),{key:1,icon:e(Ae),class:"mt-1"},null,8,["icon"]))]),_:1},8,["class"])]),_:1},8,["class","value","type","status"])]),_:1,__:[4]}),n(e(H),{id:"main_button_login",onClick:w,class:r([{clicked:u.value},"w-full flex items-center justify-center h-14 mt-8 relative overflow-hidden border-0 disabled:bg-blue-400 disabled:cursor-pointer disabled:text-white"]),loading:a.value,type:"primary",htmlType:"submit",disabled:a.value||u.value},{default:b(()=>[u.value?(S(),I("span",We,[n(e(y),{icon:e(he),class:"text-white animate-spin",width:"26",height:"26"},null,8,["icon"])])):(S(),I("div",Qe,[n(e(y),{icon:e(O),class:"text-white",width:"16",height:"16"},null,8,["icon"]),c[5]||(c[5]=s("span",{class:"ml-1"},"Sign In",-1))]))]),_:1},8,["class","loading","disabled"]),n(W,{name:"slide-down-error"},{default:b(()=>[d.value!==null?(S(),I("p",{key:0,class:r([[e(o).subText,"animated-attempts"],"text-xs mt-2"])},"Remaining attempts: "+ue(d.value),3)):ce("",!0)]),_:1})]),_:1,__:[6]},8,["model"]),s("div",{class:r([[e(o).loginSocialsCont],"flex items-center space-x-2 transition-all duration-300 ease-in-out transform translate-y-5 w-fit px-1.5 group-hover:px-10 py-1 rounded-full mx-auto"])},[s("a",Ze,[n(e(y),{class:r([[e(o).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(we)},null,8,["class","icon"])]),s("a",ze,[n(e(y),{class:r([[e(o).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(_e)},null,8,["class","icon"])]),s("a",Xe,[n(e(y),{class:r([[e(o).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),icon:e(ye)},null,8,["class","icon"])]),s("a",Ge,[(S(),I("svg",{xmlns:"http://www.w3.org/2000/svg",class:r([[e(o).loginSocials],"w-5 h-5 transition duration-300 hover:scale-125 hover:-translate-y-1"]),viewBox:"0 0 24 24"},c[7]||(c[7]=[s("rect",{width:"24",height:"24",fill:"none"},null,-1),s("path",{fill:"currentColor",d:"M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.1.1 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.1 16.1 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02M8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12m6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12"},null,-1)]),2))])],2)],2),n(Me,{isVisible:f.value,"onUpdate:isVisible":c[2]||(c[2]=v=>f.value=v)},null,8,["isVisible"])],2)],2)],64))}}),Ye=P(Je,[["__scopeId","data-v-cefaee39"]]);var M;const U=(M=document.getElementById("data-theme"))==null?void 0:M.textContent;if(U){const k=atob(U);let l;try{l=JSON.parse(k);const i=me(Ye);i.provide("data-theme",{selectedTheme:l.selected_theme,selectedBack:l.selected_back});const w=pe();i.use(w),i.mount("#app-login-root")}catch(i){console.error("Error parsing data-theme objects:",i)}}else console.error("The element 'data-theme' wasn't found or it's empty.");
